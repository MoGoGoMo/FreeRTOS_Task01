ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 1


   1              		.cpu cortex-m4
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"bsp_uart_fifo.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.UartVarInit,"ax",%progbits
  18              		.align	1
  19              		.arch armv7e-m
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv4-sp-d16
  25              	UartVarInit:
  26              	.LFB140:
  27              		.file 1 "bsp/src/bsp_uart_fifo.c"
   1:bsp/src/bsp_uart_fifo.c **** /**
   2:bsp/src/bsp_uart_fifo.c ****   ******************************************************************************
   3:bsp/src/bsp_uart_fifo.c ****   * @file    Project/F446_T1/bsp_usart_fifo.c
   4:bsp/src/bsp_uart_fifo.c ****   * @author  Gordon Tao
   5:bsp/src/bsp_uart_fifo.c ****   * @version V0.1
   6:bsp/src/bsp_uart_fifo.c ****   * @date    27-June-2019
   7:bsp/src/bsp_uart_fifo.c ****   * @brief   Source file for USART  module
   8:bsp/src/bsp_uart_fifo.c ****   ******************************************************************************
   9:bsp/src/bsp_uart_fifo.c ****   * @attention
  10:bsp/src/bsp_uart_fifo.c ****   * @Modified_log:
  11:bsp/src/bsp_uart_fifo.c ****   * Versions:            Date              Author            Description
  12:bsp/src/bsp_uart_fifo.c ****   * 0.1              2019-06-27           Gordon         first version of USART function
  13:bsp/src/bsp_uart_fifo.c ****   *
  14:bsp/src/bsp_uart_fifo.c ****   * <h2><center>&copy; COPYRIGHT 2019 MOGO Technology</center></h2>
  15:bsp/src/bsp_uart_fifo.c ****   *
  16:bsp/src/bsp_uart_fifo.c ****   ******************************************************************************
  17:bsp/src/bsp_uart_fifo.c ****   */
  18:bsp/src/bsp_uart_fifo.c **** 
  19:bsp/src/bsp_uart_fifo.c **** #include "bsp.h"
  20:bsp/src/bsp_uart_fifo.c **** 
  21:bsp/src/bsp_uart_fifo.c **** /* Define the USART Structure for each one */
  22:bsp/src/bsp_uart_fifo.c **** #if UART1_FIFO_EN == 1
  23:bsp/src/bsp_uart_fifo.c **** 	static UartStr_TypeDef g_tUart1;
  24:bsp/src/bsp_uart_fifo.c **** 	static uint8_t g_TxBuf1[UART1_TX_BUF_SIZE];		
  25:bsp/src/bsp_uart_fifo.c **** 	static uint8_t g_RxBuf1[UART1_RX_BUF_SIZE];		
  26:bsp/src/bsp_uart_fifo.c **** #endif
  27:bsp/src/bsp_uart_fifo.c **** 
  28:bsp/src/bsp_uart_fifo.c **** #if UART2_FIFO_EN == 1
  29:bsp/src/bsp_uart_fifo.c **** 	static UartStr_TypeDef g_tUart2;
  30:bsp/src/bsp_uart_fifo.c **** 	static uint8_t g_TxBuf2[UART2_TX_BUF_SIZE];		
  31:bsp/src/bsp_uart_fifo.c **** 	static uint8_t g_RxBuf2[UART2_RX_BUF_SIZE];		
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 2


  32:bsp/src/bsp_uart_fifo.c **** #endif
  33:bsp/src/bsp_uart_fifo.c **** 
  34:bsp/src/bsp_uart_fifo.c **** #if UART3_FIFO_EN == 1
  35:bsp/src/bsp_uart_fifo.c **** 	static UartStr_TypeDef g_tUart3;
  36:bsp/src/bsp_uart_fifo.c **** 	static uint8_t g_TxBuf3[UART3_TX_BUF_SIZE];		
  37:bsp/src/bsp_uart_fifo.c **** 	static uint8_t g_RxBuf3[UART3_RX_BUF_SIZE];		
  38:bsp/src/bsp_uart_fifo.c **** #endif
  39:bsp/src/bsp_uart_fifo.c **** 
  40:bsp/src/bsp_uart_fifo.c **** #if UART4_FIFO_EN == 1
  41:bsp/src/bsp_uart_fifo.c **** 	static UartStr_TypeDef g_tUart4;
  42:bsp/src/bsp_uart_fifo.c **** 	static uint8_t g_TxBuf4[UART4_TX_BUF_SIZE];		
  43:bsp/src/bsp_uart_fifo.c **** 	static uint8_t g_RxBuf4[UART4_RX_BUF_SIZE];		
  44:bsp/src/bsp_uart_fifo.c **** #endif
  45:bsp/src/bsp_uart_fifo.c **** 
  46:bsp/src/bsp_uart_fifo.c **** #if UART5_FIFO_EN == 1
  47:bsp/src/bsp_uart_fifo.c **** 	static UartStr_TypeDef g_tUart5;
  48:bsp/src/bsp_uart_fifo.c **** 	static uint8_t g_TxBuf5[UART5_TX_BUF_SIZE];		
  49:bsp/src/bsp_uart_fifo.c **** 	static uint8_t g_RxBuf5[UART5_RX_BUF_SIZE];		
  50:bsp/src/bsp_uart_fifo.c **** #endif
  51:bsp/src/bsp_uart_fifo.c **** 
  52:bsp/src/bsp_uart_fifo.c **** #if UART6_FIFO_EN == 1
  53:bsp/src/bsp_uart_fifo.c **** 	static UartStr_TypeDef g_tUart6;
  54:bsp/src/bsp_uart_fifo.c **** 	static uint8_t g_TxBuf6[UART6_TX_BUF_SIZE];		
  55:bsp/src/bsp_uart_fifo.c **** 	static uint8_t g_RxBuf6[UART6_RX_BUF_SIZE];		
  56:bsp/src/bsp_uart_fifo.c **** #endif
  57:bsp/src/bsp_uart_fifo.c **** 
  58:bsp/src/bsp_uart_fifo.c **** static void UartVarInit(void);
  59:bsp/src/bsp_uart_fifo.c **** 
  60:bsp/src/bsp_uart_fifo.c **** static void InitHardUart(void);
  61:bsp/src/bsp_uart_fifo.c **** static void UartSend(UartStr_TypeDef *_pUart, uint8_t *_ucaBuf, uint16_t _usLen);
  62:bsp/src/bsp_uart_fifo.c **** static uint8_t UartGetChar(UartStr_TypeDef *_pUart, uint8_t *_pByte);
  63:bsp/src/bsp_uart_fifo.c **** static void UartIRQ(UartStr_TypeDef *_pUart);
  64:bsp/src/bsp_uart_fifo.c **** static void ConfigUartNVIC(void);
  65:bsp/src/bsp_uart_fifo.c **** 
  66:bsp/src/bsp_uart_fifo.c **** /*
  67:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
  68:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: bsp_InitUart
  69:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: åˆå§‹åŒ–ä¸²å£ç¡¬ä»¶ï¼Œå¹¶å¯¹å…¨å±€å˜é‡èµ‹åˆå€¼.
  70:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚:  æ— 
  71:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: æ— 
  72:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
  73:bsp/src/bsp_uart_fifo.c **** */
  74:bsp/src/bsp_uart_fifo.c **** void bsp_InitUart(void)
  75:bsp/src/bsp_uart_fifo.c **** {
  76:bsp/src/bsp_uart_fifo.c **** 	UartVarInit();		
  77:bsp/src/bsp_uart_fifo.c **** 
  78:bsp/src/bsp_uart_fifo.c **** 	InitHardUart();		
  79:bsp/src/bsp_uart_fifo.c **** 
  80:bsp/src/bsp_uart_fifo.c **** 	ConfigUartNVIC();	
  81:bsp/src/bsp_uart_fifo.c **** }
  82:bsp/src/bsp_uart_fifo.c **** 
  83:bsp/src/bsp_uart_fifo.c **** /*
  84:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
  85:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: ComToUart
  86:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: å°†COMç«¯å£å·è½¬æ¢ä¸ºUARTæŒ‡é’ˆ
  87:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚: _ucPort: ç«¯å£å·(COM1 - COM6)
  88:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: uartæŒ‡é’ˆ
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 3


  89:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
  90:bsp/src/bsp_uart_fifo.c **** */
  91:bsp/src/bsp_uart_fifo.c **** UartStr_TypeDef *ComToUart(UartPort_TypeDef _ucPort)
  92:bsp/src/bsp_uart_fifo.c **** {
  93:bsp/src/bsp_uart_fifo.c **** 	if (_ucPort == COM1)
  94:bsp/src/bsp_uart_fifo.c **** 	{
  95:bsp/src/bsp_uart_fifo.c **** 		#if UART1_FIFO_EN == 1
  96:bsp/src/bsp_uart_fifo.c **** 			return &g_tUart1;
  97:bsp/src/bsp_uart_fifo.c **** 		#else
  98:bsp/src/bsp_uart_fifo.c **** 			return 0;
  99:bsp/src/bsp_uart_fifo.c **** 		#endif
 100:bsp/src/bsp_uart_fifo.c **** 	}
 101:bsp/src/bsp_uart_fifo.c **** 	else if (_ucPort == COM2)
 102:bsp/src/bsp_uart_fifo.c **** 	{
 103:bsp/src/bsp_uart_fifo.c **** 		#if UART2_FIFO_EN == 1
 104:bsp/src/bsp_uart_fifo.c **** 			return &g_tUart2;
 105:bsp/src/bsp_uart_fifo.c **** 		#else
 106:bsp/src/bsp_uart_fifo.c **** 			return;
 107:bsp/src/bsp_uart_fifo.c **** 		#endif
 108:bsp/src/bsp_uart_fifo.c **** 	}
 109:bsp/src/bsp_uart_fifo.c **** 	else if (_ucPort == COM3)
 110:bsp/src/bsp_uart_fifo.c **** 	{
 111:bsp/src/bsp_uart_fifo.c **** 		#if UART3_FIFO_EN == 1
 112:bsp/src/bsp_uart_fifo.c **** 			return &g_tUart3;
 113:bsp/src/bsp_uart_fifo.c **** 		#else
 114:bsp/src/bsp_uart_fifo.c **** 			return 0;
 115:bsp/src/bsp_uart_fifo.c **** 		#endif
 116:bsp/src/bsp_uart_fifo.c **** 	}
 117:bsp/src/bsp_uart_fifo.c **** 	else if (_ucPort == COM4)
 118:bsp/src/bsp_uart_fifo.c **** 	{
 119:bsp/src/bsp_uart_fifo.c **** 		#if UART4_FIFO_EN == 1
 120:bsp/src/bsp_uart_fifo.c **** 			return &g_tUart4;
 121:bsp/src/bsp_uart_fifo.c **** 		#else
 122:bsp/src/bsp_uart_fifo.c **** 			return 0;
 123:bsp/src/bsp_uart_fifo.c **** 		#endif
 124:bsp/src/bsp_uart_fifo.c **** 	}
 125:bsp/src/bsp_uart_fifo.c **** 	else if (_ucPort == COM5)
 126:bsp/src/bsp_uart_fifo.c **** 	{
 127:bsp/src/bsp_uart_fifo.c **** 		#if UART5_FIFO_EN == 1
 128:bsp/src/bsp_uart_fifo.c **** 			return &g_tUart5;
 129:bsp/src/bsp_uart_fifo.c **** 		#else
 130:bsp/src/bsp_uart_fifo.c **** 			return 0;
 131:bsp/src/bsp_uart_fifo.c **** 		#endif
 132:bsp/src/bsp_uart_fifo.c **** 	}
 133:bsp/src/bsp_uart_fifo.c **** 	else if (_ucPort == COM6)
 134:bsp/src/bsp_uart_fifo.c **** 	{
 135:bsp/src/bsp_uart_fifo.c **** 		#if UART6_FIFO_EN == 1
 136:bsp/src/bsp_uart_fifo.c **** 			return &g_tUart6;
 137:bsp/src/bsp_uart_fifo.c **** 		#else
 138:bsp/src/bsp_uart_fifo.c **** 			return 0;
 139:bsp/src/bsp_uart_fifo.c **** 		#endif
 140:bsp/src/bsp_uart_fifo.c **** 	}
 141:bsp/src/bsp_uart_fifo.c **** 	else
 142:bsp/src/bsp_uart_fifo.c **** 	{
 143:bsp/src/bsp_uart_fifo.c **** 		/* ä¸åšä»»ä½•å¤„ç† */
 144:bsp/src/bsp_uart_fifo.c **** 		return 0;
 145:bsp/src/bsp_uart_fifo.c **** 	}
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 4


 146:bsp/src/bsp_uart_fifo.c **** }
 147:bsp/src/bsp_uart_fifo.c **** 
 148:bsp/src/bsp_uart_fifo.c **** 
 149:bsp/src/bsp_uart_fifo.c **** /*
 150:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 151:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: ComToUart
 152:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: å°†COMç«¯å£å·è½¬æ¢ä¸º USART_TypeDef* USARTx
 153:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚: _ucPort: ç«¯å£å·(COM1 - COM6)
 154:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: USART_TypeDef*,  USART1, USART2, USART3, UART4, UART5
 155:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 156:bsp/src/bsp_uart_fifo.c **** */
 157:bsp/src/bsp_uart_fifo.c **** USART_TypeDef *ComToUSARTx(UartPort_TypeDef _ucPort)
 158:bsp/src/bsp_uart_fifo.c **** {
 159:bsp/src/bsp_uart_fifo.c **** 	if (_ucPort == COM1)
 160:bsp/src/bsp_uart_fifo.c **** 	{
 161:bsp/src/bsp_uart_fifo.c **** 		#if UART1_FIFO_EN == 1
 162:bsp/src/bsp_uart_fifo.c **** 			return USART1;
 163:bsp/src/bsp_uart_fifo.c **** 		#else
 164:bsp/src/bsp_uart_fifo.c **** 			return 0;
 165:bsp/src/bsp_uart_fifo.c **** 		#endif
 166:bsp/src/bsp_uart_fifo.c **** 	}
 167:bsp/src/bsp_uart_fifo.c **** 	else if (_ucPort == COM2)
 168:bsp/src/bsp_uart_fifo.c **** 	{
 169:bsp/src/bsp_uart_fifo.c **** 		#if UART2_FIFO_EN == 1
 170:bsp/src/bsp_uart_fifo.c **** 			return USART2;
 171:bsp/src/bsp_uart_fifo.c **** 		#else
 172:bsp/src/bsp_uart_fifo.c **** 			return;
 173:bsp/src/bsp_uart_fifo.c **** 		#endif
 174:bsp/src/bsp_uart_fifo.c **** 	}
 175:bsp/src/bsp_uart_fifo.c **** 	else if (_ucPort == COM3)
 176:bsp/src/bsp_uart_fifo.c **** 	{
 177:bsp/src/bsp_uart_fifo.c **** 		#if UART3_FIFO_EN == 1
 178:bsp/src/bsp_uart_fifo.c **** 			return USART3;
 179:bsp/src/bsp_uart_fifo.c **** 		#else
 180:bsp/src/bsp_uart_fifo.c **** 			return 0;
 181:bsp/src/bsp_uart_fifo.c **** 		#endif
 182:bsp/src/bsp_uart_fifo.c **** 	}
 183:bsp/src/bsp_uart_fifo.c **** 	else if (_ucPort == COM4)
 184:bsp/src/bsp_uart_fifo.c **** 	{
 185:bsp/src/bsp_uart_fifo.c **** 		#if UART4_FIFO_EN == 1
 186:bsp/src/bsp_uart_fifo.c **** 			return USART4;
 187:bsp/src/bsp_uart_fifo.c **** 		#else
 188:bsp/src/bsp_uart_fifo.c **** 			return 0;
 189:bsp/src/bsp_uart_fifo.c **** 		#endif
 190:bsp/src/bsp_uart_fifo.c **** 	}
 191:bsp/src/bsp_uart_fifo.c **** 	else if (_ucPort == COM5)
 192:bsp/src/bsp_uart_fifo.c **** 	{
 193:bsp/src/bsp_uart_fifo.c **** 		#if UART5_FIFO_EN == 1
 194:bsp/src/bsp_uart_fifo.c **** 			return USART5;
 195:bsp/src/bsp_uart_fifo.c **** 		#else
 196:bsp/src/bsp_uart_fifo.c **** 			return 0;
 197:bsp/src/bsp_uart_fifo.c **** 		#endif
 198:bsp/src/bsp_uart_fifo.c **** 	}
 199:bsp/src/bsp_uart_fifo.c **** 	else
 200:bsp/src/bsp_uart_fifo.c **** 	{
 201:bsp/src/bsp_uart_fifo.c **** 		/* ä¸åšä»»ä½•å¤„ç† */
 202:bsp/src/bsp_uart_fifo.c **** 		return 0;
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 5


 203:bsp/src/bsp_uart_fifo.c **** 	}
 204:bsp/src/bsp_uart_fifo.c **** }
 205:bsp/src/bsp_uart_fifo.c **** 
 206:bsp/src/bsp_uart_fifo.c **** /*
 207:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 208:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: comSendBuf
 209:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: å‘ä¸²å£å‘é€ä¸€ç»„æ•°æ®ã€‚æ•°æ®æ”¾åˆ°å‘é€ç¼“å†²åŒºåç«‹å³è¿”å›ï¼Œç”±ä¸­æ–
 210:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚: _ucPort: ç«¯å£å·(COM1 - COM6)
 211:bsp/src/bsp_uart_fifo.c **** *			  _ucaBuf: å¾…å‘é€çš„æ•°æ®ç¼“å†²åŒº
 212:bsp/src/bsp_uart_fifo.c **** *			  _usLen : æ•°æ®é•¿åº¦
 213:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: æ— 
 214:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 215:bsp/src/bsp_uart_fifo.c **** */
 216:bsp/src/bsp_uart_fifo.c **** void comSendBuf(UartPort_TypeDef _ucPort, uint8_t *_ucaBuf, uint16_t _usLen)
 217:bsp/src/bsp_uart_fifo.c **** {
 218:bsp/src/bsp_uart_fifo.c **** 	UartStr_TypeDef *pUart;
 219:bsp/src/bsp_uart_fifo.c **** 
 220:bsp/src/bsp_uart_fifo.c **** 	pUart = ComToUart(_ucPort);
 221:bsp/src/bsp_uart_fifo.c **** 	if (pUart == 0)
 222:bsp/src/bsp_uart_fifo.c **** 	{
 223:bsp/src/bsp_uart_fifo.c **** 		return;
 224:bsp/src/bsp_uart_fifo.c **** 	}
 225:bsp/src/bsp_uart_fifo.c **** 
 226:bsp/src/bsp_uart_fifo.c **** 	if (pUart->SendBefor != 0)
 227:bsp/src/bsp_uart_fifo.c **** 	{
 228:bsp/src/bsp_uart_fifo.c **** 		pUart->SendBefor();		/* å¦‚æœæ˜¯RS485é€šä¿¡ï¼Œå¯ä»¥åœ¨è¿™ä¸ªå‡½æ•°ä¸­å°†RS485è®¾ç½®ä¸ºå‘é€æ¨¡
 229:bsp/src/bsp_uart_fifo.c **** 	}
 230:bsp/src/bsp_uart_fifo.c **** 
 231:bsp/src/bsp_uart_fifo.c **** 	UartSend(pUart, _ucaBuf, _usLen);
 232:bsp/src/bsp_uart_fifo.c **** }
 233:bsp/src/bsp_uart_fifo.c **** 
 234:bsp/src/bsp_uart_fifo.c **** /*
 235:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 236:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: comSendChar
 237:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: å‘ä¸²å£å‘é€1ä¸ªå­—èŠ‚ã€‚æ•°æ®æ”¾åˆ°å‘é€ç¼“å†²åŒºåç«‹å³è¿”å›ï¼Œç”±ä¸­æ–­æ
 238:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚: _ucPort: ç«¯å£å·(COM1 - COM6)
 239:bsp/src/bsp_uart_fifo.c **** *			  _ucByte: å¾…å‘é€çš„æ•°æ®
 240:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: æ— 
 241:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 242:bsp/src/bsp_uart_fifo.c **** */
 243:bsp/src/bsp_uart_fifo.c **** void comSendChar(UartPort_TypeDef _ucPort, uint8_t _ucByte)
 244:bsp/src/bsp_uart_fifo.c **** {
 245:bsp/src/bsp_uart_fifo.c **** 	comSendBuf(_ucPort, &_ucByte, 1);
 246:bsp/src/bsp_uart_fifo.c **** }
 247:bsp/src/bsp_uart_fifo.c **** 
 248:bsp/src/bsp_uart_fifo.c **** /*
 249:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 250:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: comGetChar
 251:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: ä»æ¥æ”¶ç¼“å†²åŒºè¯»å–1å­—èŠ‚ï¼Œéé˜»å¡ã€‚æ— è®ºæœ‰æ— æ•°æ®å‡ç«‹å³è¿”å›ã€‚
 252:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚: _ucPort: ç«¯å£å·(COM1 - COM5)
 253:bsp/src/bsp_uart_fifo.c **** *			  _pByte: æ¥æ”¶åˆ°çš„æ•°æ®å­˜æ”¾åœ¨è¿™ä¸ªåœ°å€
 254:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: 0 è¡¨ç¤ºæ— æ•°æ®, 1 è¡¨ç¤ºè¯»å–åˆ°æœ‰æ•ˆå­—èŠ‚
 255:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 256:bsp/src/bsp_uart_fifo.c **** */
 257:bsp/src/bsp_uart_fifo.c **** uint8_t comGetChar(UartPort_TypeDef _ucPort, uint8_t *_pByte)
 258:bsp/src/bsp_uart_fifo.c **** {
 259:bsp/src/bsp_uart_fifo.c **** 	UartStr_TypeDef *pUart;
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 6


 260:bsp/src/bsp_uart_fifo.c **** 
 261:bsp/src/bsp_uart_fifo.c **** 	pUart = ComToUart(_ucPort);
 262:bsp/src/bsp_uart_fifo.c **** 	if (pUart == 0)
 263:bsp/src/bsp_uart_fifo.c **** 	{
 264:bsp/src/bsp_uart_fifo.c **** 		return 0;
 265:bsp/src/bsp_uart_fifo.c **** 	}
 266:bsp/src/bsp_uart_fifo.c **** 
 267:bsp/src/bsp_uart_fifo.c **** 	return UartGetChar(pUart, _pByte);
 268:bsp/src/bsp_uart_fifo.c **** }
 269:bsp/src/bsp_uart_fifo.c **** 
 270:bsp/src/bsp_uart_fifo.c **** /*
 271:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 272:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: comClearTxFifo
 273:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: æ¸…é›¶ä¸²å£å‘é€ç¼“å†²åŒº
 274:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚: _ucPort: ç«¯å£å·(COM1 - COM6)
 275:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: æ— 
 276:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 277:bsp/src/bsp_uart_fifo.c **** */
 278:bsp/src/bsp_uart_fifo.c **** void comClearTxFifo(UartPort_TypeDef _ucPort)
 279:bsp/src/bsp_uart_fifo.c **** {
 280:bsp/src/bsp_uart_fifo.c **** 	UartStr_TypeDef *pUart;
 281:bsp/src/bsp_uart_fifo.c **** 
 282:bsp/src/bsp_uart_fifo.c **** 	pUart = ComToUart(_ucPort);
 283:bsp/src/bsp_uart_fifo.c **** 	if (pUart == 0)
 284:bsp/src/bsp_uart_fifo.c **** 	{
 285:bsp/src/bsp_uart_fifo.c **** 		return;
 286:bsp/src/bsp_uart_fifo.c **** 	}
 287:bsp/src/bsp_uart_fifo.c **** 
 288:bsp/src/bsp_uart_fifo.c **** 	pUart->usTxWrite = 0;
 289:bsp/src/bsp_uart_fifo.c **** 	pUart->usTxRead = 0;
 290:bsp/src/bsp_uart_fifo.c **** 	pUart->usTxCount = 0;
 291:bsp/src/bsp_uart_fifo.c **** }
 292:bsp/src/bsp_uart_fifo.c **** 
 293:bsp/src/bsp_uart_fifo.c **** /*
 294:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 295:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: comClearRxFifo
 296:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: æ¸…é›¶ä¸²å£æ¥æ”¶ç¼“å†²åŒº
 297:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚: _ucPort: ç«¯å£å·(COM1 - COM6)
 298:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: æ— 
 299:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 300:bsp/src/bsp_uart_fifo.c **** */
 301:bsp/src/bsp_uart_fifo.c **** void comClearRxFifo(UartPort_TypeDef _ucPort)
 302:bsp/src/bsp_uart_fifo.c **** {
 303:bsp/src/bsp_uart_fifo.c **** 	UartStr_TypeDef *pUart;
 304:bsp/src/bsp_uart_fifo.c **** 
 305:bsp/src/bsp_uart_fifo.c **** 	pUart = ComToUart(_ucPort);
 306:bsp/src/bsp_uart_fifo.c **** 	if (pUart == 0)
 307:bsp/src/bsp_uart_fifo.c **** 	{
 308:bsp/src/bsp_uart_fifo.c **** 		return;
 309:bsp/src/bsp_uart_fifo.c **** 	}
 310:bsp/src/bsp_uart_fifo.c **** 
 311:bsp/src/bsp_uart_fifo.c **** 	pUart->usRxWrite = 0;
 312:bsp/src/bsp_uart_fifo.c **** 	pUart->usRxRead = 0;
 313:bsp/src/bsp_uart_fifo.c **** 	pUart->usRxCount = 0;
 314:bsp/src/bsp_uart_fifo.c **** }
 315:bsp/src/bsp_uart_fifo.c **** 
 316:bsp/src/bsp_uart_fifo.c **** /*
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 7


 317:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 318:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: comSetBaud
 319:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: è®¾ç½®ä¸²å£çš„æ³¢ç‰¹ç‡
 320:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚: _ucPort: ç«¯å£å·(COM1 - COM5)
 321:bsp/src/bsp_uart_fifo.c **** *			  _BaudRate: æ³¢ç‰¹ç‡ï¼Œ0-4500000ï¼Œ æœ€å¤§4.5Mbps
 322:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: æ— 
 323:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 324:bsp/src/bsp_uart_fifo.c **** */
 325:bsp/src/bsp_uart_fifo.c **** void comSetBaud(UartPort_TypeDef _ucPort, uint32_t _BaudRate)
 326:bsp/src/bsp_uart_fifo.c **** {
 327:bsp/src/bsp_uart_fifo.c **** 	USART_TypeDef* USARTx;
 328:bsp/src/bsp_uart_fifo.c **** 	
 329:bsp/src/bsp_uart_fifo.c **** 	USARTx = ComToUSARTx(_ucPort);
 330:bsp/src/bsp_uart_fifo.c **** 	if (USARTx == 0)
 331:bsp/src/bsp_uart_fifo.c **** 	{
 332:bsp/src/bsp_uart_fifo.c **** 		return;
 333:bsp/src/bsp_uart_fifo.c **** 	}
 334:bsp/src/bsp_uart_fifo.c **** 	
 335:bsp/src/bsp_uart_fifo.c **** 	USART_SetBaudRate(USARTx, _BaudRate);
 336:bsp/src/bsp_uart_fifo.c **** }
 337:bsp/src/bsp_uart_fifo.c **** 
 338:bsp/src/bsp_uart_fifo.c **** /*
 339:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 340:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: USART_SetBaudRate
 341:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: ä¿®æ”¹æ³¢ç‰¹ç‡å¯„å­˜å™¨ï¼Œä¸æ›´æ”¹å…¶ä»–è®¾ç½®ã€‚å¦‚æœä½¿ç”¨ USART_Initå‡½æ•°, å
 342:bsp/src/bsp_uart_fifo.c **** *			  æ ¹æ®å›ºä»¶åº“ä¸­ USART_Initå‡½æ•°ï¼Œå°†å…¶ä¸­é…ç½®æ³¢ç‰¹ç‡çš„éƒ¨åˆ†å•ç‹¬æå‡ºæ¥å°è£…ä
 343:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚: USARTx : USART1, USART2, USART3, UART4, UART5
 344:bsp/src/bsp_uart_fifo.c **** *			  BaudRate : æ³¢ç‰¹ç‡ï¼Œå–å€¼ 0 - 4500000
 345:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: æ— 
 346:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 347:bsp/src/bsp_uart_fifo.c **** */
 348:bsp/src/bsp_uart_fifo.c **** void USART_SetBaudRate(USART_TypeDef* USARTx, uint32_t BaudRate)
 349:bsp/src/bsp_uart_fifo.c **** {
 350:bsp/src/bsp_uart_fifo.c **** 	uint32_t tmpreg = 0x00, apbclock = 0x00;
 351:bsp/src/bsp_uart_fifo.c **** 	uint32_t integerdivider = 0x00;
 352:bsp/src/bsp_uart_fifo.c **** 	uint32_t fractionaldivider = 0x00;
 353:bsp/src/bsp_uart_fifo.c **** 	RCC_ClocksTypeDef RCC_ClocksStatus;
 354:bsp/src/bsp_uart_fifo.c **** 
 355:bsp/src/bsp_uart_fifo.c **** 	/* Check the parameters */
 356:bsp/src/bsp_uart_fifo.c **** 	assert_param(IS_USART_ALL_PERIPH(USARTx));
 357:bsp/src/bsp_uart_fifo.c **** 	assert_param(IS_USART_BAUDRATE(BaudRate));  
 358:bsp/src/bsp_uart_fifo.c **** 
 359:bsp/src/bsp_uart_fifo.c **** 	/*---------------------------- USART BRR Configuration -----------------------*/
 360:bsp/src/bsp_uart_fifo.c **** 	/* Configure the USART Baud Rate */
 361:bsp/src/bsp_uart_fifo.c **** 	RCC_GetClocksFreq(&RCC_ClocksStatus);
 362:bsp/src/bsp_uart_fifo.c **** 
 363:bsp/src/bsp_uart_fifo.c **** 	if ((USARTx == USART1) || (USARTx == USART6))
 364:bsp/src/bsp_uart_fifo.c **** 	{
 365:bsp/src/bsp_uart_fifo.c **** 		apbclock = RCC_ClocksStatus.PCLK2_Frequency;
 366:bsp/src/bsp_uart_fifo.c **** 	}
 367:bsp/src/bsp_uart_fifo.c **** 	else
 368:bsp/src/bsp_uart_fifo.c **** 	{
 369:bsp/src/bsp_uart_fifo.c **** 		apbclock = RCC_ClocksStatus.PCLK1_Frequency;
 370:bsp/src/bsp_uart_fifo.c **** 	}
 371:bsp/src/bsp_uart_fifo.c **** 
 372:bsp/src/bsp_uart_fifo.c **** 	/* Determine the integer part */
 373:bsp/src/bsp_uart_fifo.c **** 	if ((USARTx->CR1 & USART_CR1_OVER8) != 0)
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 8


 374:bsp/src/bsp_uart_fifo.c **** 	{
 375:bsp/src/bsp_uart_fifo.c **** 		/* Integer part computing in case Oversampling mode is 8 Samples */
 376:bsp/src/bsp_uart_fifo.c **** 		integerdivider = ((25 * apbclock) / (2 * (BaudRate)));    
 377:bsp/src/bsp_uart_fifo.c **** 	}
 378:bsp/src/bsp_uart_fifo.c **** 	else /* if ((USARTx->CR1 & USART_CR1_OVER8) == 0) */
 379:bsp/src/bsp_uart_fifo.c **** 	{
 380:bsp/src/bsp_uart_fifo.c **** 		/* Integer part computing in case Oversampling mode is 16 Samples */
 381:bsp/src/bsp_uart_fifo.c **** 		integerdivider = ((25 * apbclock) / (4 * (BaudRate)));    
 382:bsp/src/bsp_uart_fifo.c **** 	}
 383:bsp/src/bsp_uart_fifo.c **** 	tmpreg = (integerdivider / 100) << 4;
 384:bsp/src/bsp_uart_fifo.c **** 
 385:bsp/src/bsp_uart_fifo.c **** 	/* Determine the fractional part */
 386:bsp/src/bsp_uart_fifo.c **** 	fractionaldivider = integerdivider - (100 * (tmpreg >> 4));
 387:bsp/src/bsp_uart_fifo.c **** 
 388:bsp/src/bsp_uart_fifo.c **** 	/* Implement the fractional part in the register */
 389:bsp/src/bsp_uart_fifo.c **** 	if ((USARTx->CR1 & USART_CR1_OVER8) != 0)
 390:bsp/src/bsp_uart_fifo.c **** 	{
 391:bsp/src/bsp_uart_fifo.c **** 		tmpreg |= ((((fractionaldivider * 8) + 50) / 100)) & ((uint8_t)0x07);
 392:bsp/src/bsp_uart_fifo.c **** 	}
 393:bsp/src/bsp_uart_fifo.c **** 	else /* if ((USARTx->CR1 & USART_CR1_OVER8) == 0) */
 394:bsp/src/bsp_uart_fifo.c **** 	{
 395:bsp/src/bsp_uart_fifo.c **** 		tmpreg |= ((((fractionaldivider * 16) + 50) / 100)) & ((uint8_t)0x0F);
 396:bsp/src/bsp_uart_fifo.c **** 	}
 397:bsp/src/bsp_uart_fifo.c **** 
 398:bsp/src/bsp_uart_fifo.c **** 	/* Write to USART BRR register */
 399:bsp/src/bsp_uart_fifo.c **** 	USARTx->BRR = (uint16_t)tmpreg;
 400:bsp/src/bsp_uart_fifo.c **** }
 401:bsp/src/bsp_uart_fifo.c **** 
 402:bsp/src/bsp_uart_fifo.c **** /*
 403:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 404:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: UartVarInit
 405:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: åˆå§‹åŒ–ä¸²å£ç›¸å…³çš„å˜é‡
 406:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚: æ— 
 407:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: æ— 
 408:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 409:bsp/src/bsp_uart_fifo.c **** */
 410:bsp/src/bsp_uart_fifo.c **** static void UartVarInit(void)
 411:bsp/src/bsp_uart_fifo.c **** {
  28              		.loc 1 411 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
 412:bsp/src/bsp_uart_fifo.c **** #if UART1_FIFO_EN == 1
 413:bsp/src/bsp_uart_fifo.c **** 	g_tUart1.uart = USART1;						/* STM32 ä¸²å£è®¾å¤‡ */
 414:bsp/src/bsp_uart_fifo.c **** 	g_tUart1.pTxBuf = g_TxBuf1;					/* å‘é€ç¼“å†²åŒºæŒ‡é’ˆ */
 415:bsp/src/bsp_uart_fifo.c **** 	g_tUart1.pRxBuf = g_RxBuf1;					/* æ¥æ”¶ç¼“å†²åŒºæŒ‡é’ˆ */
 416:bsp/src/bsp_uart_fifo.c **** 	g_tUart1.usTxBufSize = UART1_TX_BUF_SIZE;	/* å‘é€ç¼“å†²åŒºå¤§å° */
 417:bsp/src/bsp_uart_fifo.c **** 	g_tUart1.usRxBufSize = UART1_RX_BUF_SIZE;	/* æ¥æ”¶ç¼“å†²åŒºå¤§å° */
 418:bsp/src/bsp_uart_fifo.c **** 	g_tUart1.usTxWrite = 0;						/* å‘é€FIFOå†™ç´¢å¼• */
 419:bsp/src/bsp_uart_fifo.c **** 	g_tUart1.usTxRead = 0;						/* å‘é€FIFOè¯»ç´¢å¼• */
 420:bsp/src/bsp_uart_fifo.c **** 	g_tUart1.usRxWrite = 0;						/* æ¥æ”¶FIFOå†™ç´¢å¼• */
 421:bsp/src/bsp_uart_fifo.c **** 	g_tUart1.usRxRead = 0;						/* æ¥æ”¶FIFOè¯»ç´¢å¼• */
 422:bsp/src/bsp_uart_fifo.c **** 	g_tUart1.usRxCount = 0;						/* æ¥æ”¶åˆ°çš„æ–°æ•°æ®ä¸ªæ•° */
 423:bsp/src/bsp_uart_fifo.c **** 	g_tUart1.usTxCount = 0;						/* å¾…å‘é€çš„æ•°æ®ä¸ªæ•° */
 424:bsp/src/bsp_uart_fifo.c **** 	g_tUart1.SendBefor = 0;						/* å‘é€æ•°æ®å‰çš„å›è°ƒå‡½æ•° */
 425:bsp/src/bsp_uart_fifo.c **** 	g_tUart1.SendOver = 0;						/* å‘é€å®Œæ¯•åçš„å›è°ƒå‡½æ•° */
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 9


 426:bsp/src/bsp_uart_fifo.c **** 	g_tUart1.ReciveNew = 0;						/* æ¥æ”¶åˆ°æ–°æ•°æ®åçš„å›è°ƒå‡½æ•° */
 427:bsp/src/bsp_uart_fifo.c **** #endif
 428:bsp/src/bsp_uart_fifo.c **** 
 429:bsp/src/bsp_uart_fifo.c **** #if UART2_FIFO_EN == 1
 430:bsp/src/bsp_uart_fifo.c **** 	g_tUart2.uart = USART2;						/* STM32 ä¸²å£è®¾å¤‡ */
  33              		.loc 1 430 2 view .LVU1
  34              		.loc 1 430 16 is_stmt 0 view .LVU2
  35 0000 0A4B     		ldr	r3, .L2
  36 0002 0B4A     		ldr	r2, .L2+4
  37 0004 1A60     		str	r2, [r3]
 431:bsp/src/bsp_uart_fifo.c **** 	g_tUart2.pTxBuf = g_TxBuf2;					/* å‘é€ç¼“å†²åŒºæŒ‡é’ˆ */
  38              		.loc 1 431 2 is_stmt 1 view .LVU3
  39              		.loc 1 431 18 is_stmt 0 view .LVU4
  40 0006 0B4A     		ldr	r2, .L2+8
  41 0008 5A60     		str	r2, [r3, #4]
 432:bsp/src/bsp_uart_fifo.c **** 	g_tUart2.pRxBuf = g_RxBuf2;					/* æ¥æ”¶ç¼“å†²åŒºæŒ‡é’ˆ */
  42              		.loc 1 432 2 is_stmt 1 view .LVU5
  43              		.loc 1 432 18 is_stmt 0 view .LVU6
  44 000a 0B4A     		ldr	r2, .L2+12
  45 000c 9A60     		str	r2, [r3, #8]
 433:bsp/src/bsp_uart_fifo.c **** 	g_tUart2.usTxBufSize = UART2_TX_BUF_SIZE;	/* å‘é€ç¼“å†²åŒºå¤§å° */
  46              		.loc 1 433 2 is_stmt 1 view .LVU7
  47              		.loc 1 433 23 is_stmt 0 view .LVU8
  48 000e 4FF48062 		mov	r2, #1024
  49 0012 9A81     		strh	r2, [r3, #12]	@ movhi
 434:bsp/src/bsp_uart_fifo.c **** 	g_tUart2.usRxBufSize = UART2_RX_BUF_SIZE;	/* æ¥æ”¶ç¼“å†²åŒºå¤§å° */
  50              		.loc 1 434 2 is_stmt 1 view .LVU9
  51              		.loc 1 434 23 is_stmt 0 view .LVU10
  52 0014 DA81     		strh	r2, [r3, #14]	@ movhi
 435:bsp/src/bsp_uart_fifo.c **** 	g_tUart2.usTxWrite = 0;						/* å‘é€FIFOå†™ç´¢å¼• */
  53              		.loc 1 435 2 is_stmt 1 view .LVU11
  54              		.loc 1 435 21 is_stmt 0 view .LVU12
  55 0016 0022     		movs	r2, #0
  56 0018 1A82     		strh	r2, [r3, #16]	@ movhi
 436:bsp/src/bsp_uart_fifo.c **** 	g_tUart2.usTxRead = 0;						/* å‘é€FIFOè¯»ç´¢å¼• */
  57              		.loc 1 436 2 is_stmt 1 view .LVU13
  58              		.loc 1 436 20 is_stmt 0 view .LVU14
  59 001a 5A82     		strh	r2, [r3, #18]	@ movhi
 437:bsp/src/bsp_uart_fifo.c **** 	g_tUart2.usRxWrite = 0;						/* æ¥æ”¶FIFOå†™ç´¢å¼• */
  60              		.loc 1 437 2 is_stmt 1 view .LVU15
  61              		.loc 1 437 21 is_stmt 0 view .LVU16
  62 001c DA82     		strh	r2, [r3, #22]	@ movhi
 438:bsp/src/bsp_uart_fifo.c **** 	g_tUart2.usRxRead = 0;						/* æ¥æ”¶FIFOè¯»ç´¢å¼• */
  63              		.loc 1 438 2 is_stmt 1 view .LVU17
  64              		.loc 1 438 20 is_stmt 0 view .LVU18
  65 001e 1A83     		strh	r2, [r3, #24]	@ movhi
 439:bsp/src/bsp_uart_fifo.c **** 	g_tUart2.usRxCount = 0;						/* æ¥æ”¶åˆ°çš„æ–°æ•°æ®ä¸ªæ•° */
  66              		.loc 1 439 2 is_stmt 1 view .LVU19
  67              		.loc 1 439 21 is_stmt 0 view .LVU20
  68 0020 5A83     		strh	r2, [r3, #26]	@ movhi
 440:bsp/src/bsp_uart_fifo.c **** 	g_tUart2.usTxCount = 0;						/* å¾…å‘é€çš„æ•°æ®ä¸ªæ•° */
  69              		.loc 1 440 2 is_stmt 1 view .LVU21
  70              		.loc 1 440 21 is_stmt 0 view .LVU22
  71 0022 9A82     		strh	r2, [r3, #20]	@ movhi
 441:bsp/src/bsp_uart_fifo.c **** 	g_tUart2.SendBefor = 0;						/* å‘é€æ•°æ®å‰çš„å›è°ƒå‡½æ•° */
  72              		.loc 1 441 2 is_stmt 1 view .LVU23
  73              		.loc 1 441 21 is_stmt 0 view .LVU24
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 10


  74 0024 DA61     		str	r2, [r3, #28]
 442:bsp/src/bsp_uart_fifo.c **** 	g_tUart2.SendOver = 0;						/* å‘é€å®Œæ¯•åçš„å›è°ƒå‡½æ•° */
  75              		.loc 1 442 2 is_stmt 1 view .LVU25
  76              		.loc 1 442 20 is_stmt 0 view .LVU26
  77 0026 1A62     		str	r2, [r3, #32]
 443:bsp/src/bsp_uart_fifo.c **** 	g_tUart2.ReciveNew = 0;						/* æ¥æ”¶åˆ°æ–°æ•°æ®åçš„å›è°ƒå‡½æ•° */
  78              		.loc 1 443 2 is_stmt 1 view .LVU27
  79              		.loc 1 443 21 is_stmt 0 view .LVU28
  80 0028 5A62     		str	r2, [r3, #36]
 444:bsp/src/bsp_uart_fifo.c **** #endif
 445:bsp/src/bsp_uart_fifo.c **** 
 446:bsp/src/bsp_uart_fifo.c **** #if UART3_FIFO_EN == 1
 447:bsp/src/bsp_uart_fifo.c **** 	g_tUart3.uart = USART3;						/* STM32 ä¸²å£è®¾å¤‡ */
 448:bsp/src/bsp_uart_fifo.c **** 	g_tUart3.pTxBuf = g_TxBuf3;					/* å‘é€ç¼“å†²åŒºæŒ‡é’ˆ */
 449:bsp/src/bsp_uart_fifo.c **** 	g_tUart3.pRxBuf = g_RxBuf3;					/* æ¥æ”¶ç¼“å†²åŒºæŒ‡é’ˆ */
 450:bsp/src/bsp_uart_fifo.c **** 	g_tUart3.usTxBufSize = UART3_TX_BUF_SIZE;	/* å‘é€ç¼“å†²åŒºå¤§å° */
 451:bsp/src/bsp_uart_fifo.c **** 	g_tUart3.usRxBufSize = UART3_RX_BUF_SIZE;	/* æ¥æ”¶ç¼“å†²åŒºå¤§å° */
 452:bsp/src/bsp_uart_fifo.c **** 	g_tUart3.usTxWrite = 0;						/* å‘é€FIFOå†™ç´¢å¼• */
 453:bsp/src/bsp_uart_fifo.c **** 	g_tUart3.usTxRead = 0;						/* å‘é€FIFOè¯»ç´¢å¼• */
 454:bsp/src/bsp_uart_fifo.c **** 	g_tUart3.usRxWrite = 0;						/* æ¥æ”¶FIFOå†™ç´¢å¼• */
 455:bsp/src/bsp_uart_fifo.c **** 	g_tUart3.usRxRead = 0;						/* æ¥æ”¶FIFOè¯»ç´¢å¼• */
 456:bsp/src/bsp_uart_fifo.c **** 	g_tUart3.usRxCount = 0;						/* æ¥æ”¶åˆ°çš„æ–°æ•°æ®ä¸ªæ•° */
 457:bsp/src/bsp_uart_fifo.c **** 	g_tUart3.usTxCount = 0;						/* å¾…å‘é€çš„æ•°æ®ä¸ªæ•° */
 458:bsp/src/bsp_uart_fifo.c **** 	g_tUart3.SendBefor = RS485_SendBefor;		/* å‘é€æ•°æ®å‰çš„å›è°ƒå‡½æ•° */
 459:bsp/src/bsp_uart_fifo.c **** 	g_tUart3.SendOver = RS485_SendOver;			/* å‘é€å®Œæ¯•åçš„å›è°ƒå‡½æ•° */
 460:bsp/src/bsp_uart_fifo.c **** 	g_tUart3.ReciveNew = RS485_ReciveNew;		/* æ¥æ”¶åˆ°æ–°æ•°æ®åçš„å›è°ƒå‡½æ•° */
 461:bsp/src/bsp_uart_fifo.c **** #endif
 462:bsp/src/bsp_uart_fifo.c **** 
 463:bsp/src/bsp_uart_fifo.c **** #if UART4_FIFO_EN == 1
 464:bsp/src/bsp_uart_fifo.c **** 	g_tUart4.uart = UART4;						/* STM32 ä¸²å£è®¾å¤‡ */
 465:bsp/src/bsp_uart_fifo.c **** 	g_tUart4.pTxBuf = g_TxBuf4;					/* å‘é€ç¼“å†²åŒºæŒ‡é’ˆ */
 466:bsp/src/bsp_uart_fifo.c **** 	g_tUart4.pRxBuf = g_RxBuf4;					/* æ¥æ”¶ç¼“å†²åŒºæŒ‡é’ˆ */
 467:bsp/src/bsp_uart_fifo.c **** 	g_tUart4.usTxBufSize = UART4_TX_BUF_SIZE;	/* å‘é€ç¼“å†²åŒºå¤§å° */
 468:bsp/src/bsp_uart_fifo.c **** 	g_tUart4.usRxBufSize = UART4_RX_BUF_SIZE;	/* æ¥æ”¶ç¼“å†²åŒºå¤§å° */
 469:bsp/src/bsp_uart_fifo.c **** 	g_tUart4.usTxWrite = 0;						/* å‘é€FIFOå†™ç´¢å¼• */
 470:bsp/src/bsp_uart_fifo.c **** 	g_tUart4.usTxRead = 0;						/* å‘é€FIFOè¯»ç´¢å¼• */
 471:bsp/src/bsp_uart_fifo.c **** 	g_tUart4.usRxWrite = 0;						/* æ¥æ”¶FIFOå†™ç´¢å¼• */
 472:bsp/src/bsp_uart_fifo.c **** 	g_tUart4.usRxRead = 0;						/* æ¥æ”¶FIFOè¯»ç´¢å¼• */
 473:bsp/src/bsp_uart_fifo.c **** 	g_tUart4.usRxCount = 0;						/* æ¥æ”¶åˆ°çš„æ–°æ•°æ®ä¸ªæ•° */
 474:bsp/src/bsp_uart_fifo.c **** 	g_tUart4.usTxCount = 0;						/* å¾…å‘é€çš„æ•°æ®ä¸ªæ•° */
 475:bsp/src/bsp_uart_fifo.c **** 	g_tUart4.SendBefor = 0;						/* å‘é€æ•°æ®å‰çš„å›è°ƒå‡½æ•° */
 476:bsp/src/bsp_uart_fifo.c **** 	g_tUart4.SendOver = 0;						/* å‘é€å®Œæ¯•åçš„å›è°ƒå‡½æ•° */
 477:bsp/src/bsp_uart_fifo.c **** 	g_tUart4.ReciveNew = 0;						/* æ¥æ”¶åˆ°æ–°æ•°æ®åçš„å›è°ƒå‡½æ•° */
 478:bsp/src/bsp_uart_fifo.c **** #endif
 479:bsp/src/bsp_uart_fifo.c **** 
 480:bsp/src/bsp_uart_fifo.c **** #if UART5_FIFO_EN == 1
 481:bsp/src/bsp_uart_fifo.c **** 	g_tUart5.uart = UART5;						/* STM32 ä¸²å£è®¾å¤‡ */
 482:bsp/src/bsp_uart_fifo.c **** 	g_tUart5.pTxBuf = g_TxBuf5;					/* å‘é€ç¼“å†²åŒºæŒ‡é’ˆ */
 483:bsp/src/bsp_uart_fifo.c **** 	g_tUart5.pRxBuf = g_RxBuf5;					/* æ¥æ”¶ç¼“å†²åŒºæŒ‡é’ˆ */
 484:bsp/src/bsp_uart_fifo.c **** 	g_tUart5.usTxBufSize = UART5_TX_BUF_SIZE;	/* å‘é€ç¼“å†²åŒºå¤§å° */
 485:bsp/src/bsp_uart_fifo.c **** 	g_tUart5.usRxBufSize = UART5_RX_BUF_SIZE;	/* æ¥æ”¶ç¼“å†²åŒºå¤§å° */
 486:bsp/src/bsp_uart_fifo.c **** 	g_tUart5.usTxWrite = 0;						/* å‘é€FIFOå†™ç´¢å¼• */
 487:bsp/src/bsp_uart_fifo.c **** 	g_tUart5.usTxRead = 0;						/* å‘é€FIFOè¯»ç´¢å¼• */
 488:bsp/src/bsp_uart_fifo.c **** 	g_tUart5.usRxWrite = 0;						/* æ¥æ”¶FIFOå†™ç´¢å¼• */
 489:bsp/src/bsp_uart_fifo.c **** 	g_tUart5.usRxRead = 0;						/* æ¥æ”¶FIFOè¯»ç´¢å¼• */
 490:bsp/src/bsp_uart_fifo.c **** 	g_tUart5.usRxCount = 0;						/* æ¥æ”¶åˆ°çš„æ–°æ•°æ®ä¸ªæ•° */
 491:bsp/src/bsp_uart_fifo.c **** 	g_tUart5.usTxCount = 0;						/* å¾…å‘é€çš„æ•°æ®ä¸ªæ•° */
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 11


 492:bsp/src/bsp_uart_fifo.c **** 	g_tUart5.SendBefor = 0;						/* å‘é€æ•°æ®å‰çš„å›è°ƒå‡½æ•° */
 493:bsp/src/bsp_uart_fifo.c **** 	g_tUart5.SendOver = 0;						/* å‘é€å®Œæ¯•åçš„å›è°ƒå‡½æ•° */
 494:bsp/src/bsp_uart_fifo.c **** 	g_tUart5.ReciveNew = 0;						/* æ¥æ”¶åˆ°æ–°æ•°æ®åçš„å›è°ƒå‡½æ•° */
 495:bsp/src/bsp_uart_fifo.c **** #endif
 496:bsp/src/bsp_uart_fifo.c **** 
 497:bsp/src/bsp_uart_fifo.c **** 
 498:bsp/src/bsp_uart_fifo.c **** #if UART6_FIFO_EN == 1
 499:bsp/src/bsp_uart_fifo.c **** 	g_tUart6.uart = USART6;						/* STM32 ä¸²å£è®¾å¤‡ */
 500:bsp/src/bsp_uart_fifo.c **** 	g_tUart6.pTxBuf = g_TxBuf6;					/* å‘é€ç¼“å†²åŒºæŒ‡é’ˆ */
 501:bsp/src/bsp_uart_fifo.c **** 	g_tUart6.pRxBuf = g_RxBuf6;					/* æ¥æ”¶ç¼“å†²åŒºæŒ‡é’ˆ */
 502:bsp/src/bsp_uart_fifo.c **** 	g_tUart6.usTxBufSize = UART6_TX_BUF_SIZE;	/* å‘é€ç¼“å†²åŒºå¤§å° */
 503:bsp/src/bsp_uart_fifo.c **** 	g_tUart6.usRxBufSize = UART6_RX_BUF_SIZE;	/* æ¥æ”¶ç¼“å†²åŒºå¤§å° */
 504:bsp/src/bsp_uart_fifo.c **** 	g_tUart6.usTxWrite = 0;						/* å‘é€FIFOå†™ç´¢å¼• */
 505:bsp/src/bsp_uart_fifo.c **** 	g_tUart6.usTxRead = 0;						/* å‘é€FIFOè¯»ç´¢å¼• */
 506:bsp/src/bsp_uart_fifo.c **** 	g_tUart6.usRxWrite = 0;						/* æ¥æ”¶FIFOå†™ç´¢å¼• */
 507:bsp/src/bsp_uart_fifo.c **** 	g_tUart6.usRxRead = 0;						/* æ¥æ”¶FIFOè¯»ç´¢å¼• */
 508:bsp/src/bsp_uart_fifo.c **** 	g_tUart6.usRxCount = 0;						/* æ¥æ”¶åˆ°çš„æ–°æ•°æ®ä¸ªæ•° */
 509:bsp/src/bsp_uart_fifo.c **** 	g_tUart6.usTxCount = 0;						/* å¾…å‘é€çš„æ•°æ®ä¸ªæ•° */
 510:bsp/src/bsp_uart_fifo.c **** 	g_tUart6.SendBefor = 0;						/* å‘é€æ•°æ®å‰çš„å›è°ƒå‡½æ•° */
 511:bsp/src/bsp_uart_fifo.c **** 	g_tUart6.SendOver = 0;						/* å‘é€å®Œæ¯•åçš„å›è°ƒå‡½æ•° */
 512:bsp/src/bsp_uart_fifo.c **** 	g_tUart6.ReciveNew = 0;						/* æ¥æ”¶åˆ°æ–°æ•°æ®åçš„å›è°ƒå‡½æ•° */
 513:bsp/src/bsp_uart_fifo.c **** #endif
 514:bsp/src/bsp_uart_fifo.c **** }
  81              		.loc 1 514 1 view .LVU29
  82 002a 7047     		bx	lr
  83              	.L3:
  84              		.align	2
  85              	.L2:
  86 002c 00000000 		.word	.LANCHOR0
  87 0030 00440040 		.word	1073759232
  88 0034 00000000 		.word	.LANCHOR1
  89 0038 00000000 		.word	.LANCHOR2
  90              		.cfi_endproc
  91              	.LFE140:
  93              		.section	.text.InitHardUart,"ax",%progbits
  94              		.align	1
  95              		.syntax unified
  96              		.thumb
  97              		.thumb_func
  98              		.fpu fpv4-sp-d16
 100              	InitHardUart:
 101              	.LFB141:
 515:bsp/src/bsp_uart_fifo.c **** 
 516:bsp/src/bsp_uart_fifo.c **** /*
 517:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 518:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: InitHardUart
 519:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: é…ç½®ä¸²å£çš„ç¡¬ä»¶å‚æ•°ï¼ˆæ³¢ç‰¹ç‡ï¼Œæ•°æ®ä½ï¼Œåœæ­¢ä½ï¼Œèµ·å§‹ä½ï¼Œæ ¡éª
 520:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚: æ— 
 521:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: æ— 
 522:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 523:bsp/src/bsp_uart_fifo.c **** */
 524:bsp/src/bsp_uart_fifo.c **** static void InitHardUart(void)
 525:bsp/src/bsp_uart_fifo.c **** {
 102              		.loc 1 525 1 is_stmt 1 view -0
 103              		.cfi_startproc
 104              		@ args = 0, pretend = 0, frame = 24
 105              		@ frame_needed = 0, uses_anonymous_args = 0
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 12


 106 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 107              	.LCFI0:
 108              		.cfi_def_cfa_offset 20
 109              		.cfi_offset 4, -20
 110              		.cfi_offset 5, -16
 111              		.cfi_offset 6, -12
 112              		.cfi_offset 7, -8
 113              		.cfi_offset 14, -4
 114 0002 87B0     		sub	sp, sp, #28
 115              	.LCFI1:
 116              		.cfi_def_cfa_offset 48
 526:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitTypeDef GPIO_InitStructure;
 117              		.loc 1 526 2 view .LVU31
 527:bsp/src/bsp_uart_fifo.c **** 	USART_InitTypeDef USART_InitStructure;
 118              		.loc 1 527 2 view .LVU32
 528:bsp/src/bsp_uart_fifo.c **** 
 529:bsp/src/bsp_uart_fifo.c **** #if UART1_FIFO_EN == 1		/* ä¸²å£1 TX = PA9   RX = PA10 æˆ– TX = PB6   RX = PB7*/
 530:bsp/src/bsp_uart_fifo.c **** 
 531:bsp/src/bsp_uart_fifo.c **** 	/* ç¬¬1æ­¥ï¼š é…ç½®GPIO */
 532:bsp/src/bsp_uart_fifo.c **** 	#if 1	/* TX = PA9   RX = PA10 */
 533:bsp/src/bsp_uart_fifo.c **** 		/* æ‰“å¼€ GPIO æ—¶é’Ÿ */
 534:bsp/src/bsp_uart_fifo.c **** 		RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA, ENABLE);
 535:bsp/src/bsp_uart_fifo.c **** 
 536:bsp/src/bsp_uart_fifo.c **** 		/* æ‰“å¼€ UART æ—¶é’Ÿ */
 537:bsp/src/bsp_uart_fifo.c **** 		RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1, ENABLE);
 538:bsp/src/bsp_uart_fifo.c **** 
 539:bsp/src/bsp_uart_fifo.c **** 		/* å°† PA9 æ˜ å°„ä¸º USART1_TX */
 540:bsp/src/bsp_uart_fifo.c **** 		GPIO_PinAFConfig(GPIOA, GPIO_PinSource9, GPIO_AF_USART1);
 541:bsp/src/bsp_uart_fifo.c **** 
 542:bsp/src/bsp_uart_fifo.c **** 		/* å°† PA10 æ˜ å°„ä¸º USART1_RX */
 543:bsp/src/bsp_uart_fifo.c **** 		GPIO_PinAFConfig(GPIOA, GPIO_PinSource10, GPIO_AF_USART1);
 544:bsp/src/bsp_uart_fifo.c **** 
 545:bsp/src/bsp_uart_fifo.c **** 		/* é…ç½® USART Tx ä¸ºå¤ç”¨åŠŸèƒ½ */
 546:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;	/* è¾“å‡ºç±»å‹ä¸ºæ¨æŒ½ */
 547:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;	/* å†…éƒ¨ä¸Šæ‹‰ç”µé˜»ä½¿èƒ½ */
 548:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;	/* å¤ç”¨æ¨¡å¼ */
 549:bsp/src/bsp_uart_fifo.c **** 
 550:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9;
 551:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 552:bsp/src/bsp_uart_fifo.c **** 		GPIO_Init(GPIOA, &GPIO_InitStructure);
 553:bsp/src/bsp_uart_fifo.c **** 
 554:bsp/src/bsp_uart_fifo.c **** 		/* é…ç½® USART Rx ä¸ºå¤ç”¨åŠŸèƒ½ */
 555:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
 556:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10;
 557:bsp/src/bsp_uart_fifo.c **** 		GPIO_Init(GPIOA, &GPIO_InitStructure);
 558:bsp/src/bsp_uart_fifo.c **** 	#else	/* TX = PB6   RX = PB7  */
 559:bsp/src/bsp_uart_fifo.c **** 		/* æ‰“å¼€ GPIO æ—¶é’Ÿ */
 560:bsp/src/bsp_uart_fifo.c **** 		RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOB, ENABLE);
 561:bsp/src/bsp_uart_fifo.c **** 
 562:bsp/src/bsp_uart_fifo.c **** 		/* æ‰“å¼€ UART æ—¶é’Ÿ */
 563:bsp/src/bsp_uart_fifo.c **** 		RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1, ENABLE);
 564:bsp/src/bsp_uart_fifo.c **** 
 565:bsp/src/bsp_uart_fifo.c **** 		/* å°† PB6 æ˜ å°„ä¸º USART1_TX */
 566:bsp/src/bsp_uart_fifo.c **** 		GPIO_PinAFConfig(GPIOB, GPIO_PinSource6, GPIO_AF_USART1);
 567:bsp/src/bsp_uart_fifo.c **** 
 568:bsp/src/bsp_uart_fifo.c **** 		/* å°† PB7 æ˜ å°„ä¸º USART1_RX */
 569:bsp/src/bsp_uart_fifo.c **** 		GPIO_PinAFConfig(GPIOB, GPIO_PinSource7, GPIO_AF_USART1);
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 13


 570:bsp/src/bsp_uart_fifo.c **** 
 571:bsp/src/bsp_uart_fifo.c **** 		/* é…ç½® USART Tx ä¸ºå¤ç”¨åŠŸèƒ½ */
 572:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;	/* è¾“å‡ºç±»å‹ä¸ºæ¨æŒ½ */
 573:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;	/* å†…éƒ¨ä¸Šæ‹‰ç”µé˜»ä½¿èƒ½ */
 574:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;	/* å¤ç”¨æ¨¡å¼ */
 575:bsp/src/bsp_uart_fifo.c **** 
 576:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Pin = GPIO_Pin_6;
 577:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 578:bsp/src/bsp_uart_fifo.c **** 		GPIO_Init(GPIOB, &GPIO_InitStructure);
 579:bsp/src/bsp_uart_fifo.c **** 
 580:bsp/src/bsp_uart_fifo.c **** 		/* é…ç½® USART Rx ä¸ºå¤ç”¨åŠŸèƒ½ */
 581:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
 582:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Pin = GPIO_Pin_7;
 583:bsp/src/bsp_uart_fifo.c **** 		GPIO_Init(GPIOB, &GPIO_InitStructure);
 584:bsp/src/bsp_uart_fifo.c **** 	#endif
 585:bsp/src/bsp_uart_fifo.c **** 
 586:bsp/src/bsp_uart_fifo.c **** 	/* ç¬¬2æ­¥ï¼š é…ç½®ä¸²å£ç¡¬ä»¶å‚æ•° */
 587:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_BaudRate = UART1_BAUD;	/* æ³¢ç‰¹ç‡ */
 588:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_WordLength = USART_WordLength_8b;
 589:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_StopBits = USART_StopBits_1;
 590:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_Parity = USART_Parity_No ;
 591:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
 592:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;
 593:bsp/src/bsp_uart_fifo.c **** 	USART_Init(USART1, &USART_InitStructure);
 594:bsp/src/bsp_uart_fifo.c **** 
 595:bsp/src/bsp_uart_fifo.c **** 	USART_ITConfig(USART1, USART_IT_RXNE, ENABLE);	/* ä½¿èƒ½æ¥æ”¶ä¸­æ–­ */
 596:bsp/src/bsp_uart_fifo.c **** 	/*
 597:bsp/src/bsp_uart_fifo.c **** 		USART_ITConfig(USART1, USART_IT_TXE, ENABLE);
 598:bsp/src/bsp_uart_fifo.c **** 		æ³¨æ„: ä¸è¦åœ¨æ­¤å¤„æ‰“å¼€å‘é€ä¸­æ–­
 599:bsp/src/bsp_uart_fifo.c **** 		å‘é€ä¸­æ–­ä½¿èƒ½åœ¨SendUart()å‡½æ•°æ‰“å¼€
 600:bsp/src/bsp_uart_fifo.c **** 	*/
 601:bsp/src/bsp_uart_fifo.c **** 	USART_Cmd(USART1, ENABLE);		/* ä½¿èƒ½ä¸²å£ */
 602:bsp/src/bsp_uart_fifo.c **** 
 603:bsp/src/bsp_uart_fifo.c **** 	/* CPUçš„å°ç¼ºé™·ï¼šä¸²å£é…ç½®å¥½ï¼Œå¦‚æœç›´æ¥Sendï¼Œåˆ™ç¬¬1ä¸ªå­—èŠ‚å‘é€ä¸å‡ºå»
 604:bsp/src/bsp_uart_fifo.c **** 		å¦‚ä¸‹è¯­å¥è§£å†³ç¬¬1ä¸ªå­—èŠ‚æ— æ³•æ­£ç¡®å‘é€å‡ºå»çš„é—®é¢˜ */
 605:bsp/src/bsp_uart_fifo.c **** 	USART_ClearFlag(USART1, USART_FLAG_TC);     /* æ¸…å‘é€å®Œæˆæ ‡å¿—ï¼ŒTransmission Complete flag 
 606:bsp/src/bsp_uart_fifo.c **** #endif
 607:bsp/src/bsp_uart_fifo.c **** 
 608:bsp/src/bsp_uart_fifo.c **** #if UART2_FIFO_EN == 1		/* ä¸²å£2 TX = PD5   RX = PD6 æˆ–  TX = PA2ï¼Œ RX = PA3  */
 609:bsp/src/bsp_uart_fifo.c **** 	/* ç¬¬1æ­¥ï¼š é…ç½®GPIO */
 610:bsp/src/bsp_uart_fifo.c **** 	#if 0	/* ä¸²å£2 TX = PD5   RX = PD6 */
 611:bsp/src/bsp_uart_fifo.c **** 		/* æ‰“å¼€ GPIO æ—¶é’Ÿ */
 612:bsp/src/bsp_uart_fifo.c **** 		RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOD, ENABLE);
 613:bsp/src/bsp_uart_fifo.c **** 
 614:bsp/src/bsp_uart_fifo.c **** 		/* æ‰“å¼€ UART æ—¶é’Ÿ */
 615:bsp/src/bsp_uart_fifo.c **** 		RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART2, ENABLE);
 616:bsp/src/bsp_uart_fifo.c **** 
 617:bsp/src/bsp_uart_fifo.c **** 		/* å°† PD5 æ˜ å°„ä¸º USART2_TX */
 618:bsp/src/bsp_uart_fifo.c **** 		GPIO_PinAFConfig(GPIOD, GPIO_PinSource5, GPIO_AF_USART2);
 619:bsp/src/bsp_uart_fifo.c **** 
 620:bsp/src/bsp_uart_fifo.c **** 		/* å°† PD6 æ˜ å°„ä¸º USART2_RX */
 621:bsp/src/bsp_uart_fifo.c **** 		GPIO_PinAFConfig(GPIOD, GPIO_PinSource6, GPIO_AF_USART2);
 622:bsp/src/bsp_uart_fifo.c **** 
 623:bsp/src/bsp_uart_fifo.c **** 		/* é…ç½® USART Tx ä¸ºå¤ç”¨åŠŸèƒ½ */
 624:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;	/* è¾“å‡ºç±»å‹ä¸ºæ¨æŒ½ */
 625:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;	/* å†…éƒ¨ä¸Šæ‹‰ç”µé˜»ä½¿èƒ½ */
 626:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;	/* å¤ç”¨æ¨¡å¼ */
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 14


 627:bsp/src/bsp_uart_fifo.c **** 
 628:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Pin = GPIO_Pin_5;
 629:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 630:bsp/src/bsp_uart_fifo.c **** 		GPIO_Init(GPIOD, &GPIO_InitStructure);
 631:bsp/src/bsp_uart_fifo.c **** 
 632:bsp/src/bsp_uart_fifo.c **** 		/* é…ç½® USART Rx ä¸ºå¤ç”¨åŠŸèƒ½ */
 633:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
 634:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Pin = GPIO_Pin_6;
 635:bsp/src/bsp_uart_fifo.c **** 		GPIO_Init(GPIOD, &GPIO_InitStructure);
 636:bsp/src/bsp_uart_fifo.c **** 
 637:bsp/src/bsp_uart_fifo.c **** 	#else	/* ä¸²å£2   TX = PA2ï¼Œ RX = PA3 */
 638:bsp/src/bsp_uart_fifo.c **** 		/* æ‰“å¼€ GPIO æ—¶é’Ÿ */
 639:bsp/src/bsp_uart_fifo.c **** 		RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOA, ENABLE);
 119              		.loc 1 639 3 view .LVU33
 120 0004 0121     		movs	r1, #1
 121 0006 0846     		mov	r0, r1
 122 0008 FFF7FEFF 		bl	RCC_AHB1PeriphClockCmd
 123              	.LVL0:
 640:bsp/src/bsp_uart_fifo.c **** 
 641:bsp/src/bsp_uart_fifo.c **** 		/* æ‰“å¼€ UART æ—¶é’Ÿ */
 642:bsp/src/bsp_uart_fifo.c **** 		RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART2, ENABLE);
 124              		.loc 1 642 3 view .LVU34
 125 000c 0121     		movs	r1, #1
 126 000e 4FF40030 		mov	r0, #131072
 127 0012 FFF7FEFF 		bl	RCC_APB1PeriphClockCmd
 128              	.LVL1:
 643:bsp/src/bsp_uart_fifo.c **** 
 644:bsp/src/bsp_uart_fifo.c ****     #ifdef STM32F446xx
 645:bsp/src/bsp_uart_fifo.c ****         /* Alternate function PA2 to USART2_TX*/
 646:bsp/src/bsp_uart_fifo.c ****         GPIO_PinAFConfig(GPIOA, GPIO_PinSource2, GPIO_AF_USART2);
 129              		.loc 1 646 9 view .LVU35
 130 0016 244D     		ldr	r5, .L6
 131 0018 0722     		movs	r2, #7
 132 001a 0221     		movs	r1, #2
 133 001c 2846     		mov	r0, r5
 134 001e FFF7FEFF 		bl	GPIO_PinAFConfig
 135              	.LVL2:
 647:bsp/src/bsp_uart_fifo.c **** 
 648:bsp/src/bsp_uart_fifo.c ****     #else
 649:bsp/src/bsp_uart_fifo.c **** 		/* å°† PA2 æ˜ å°„ä¸º USART2_TX. åœ¨STM32-V5æ¿ä¸­ï¼ŒPA2 ç®¡è„šç”¨äºä»¥å¤ªç½‘ */
 650:bsp/src/bsp_uart_fifo.c **** 		//GPIO_PinAFConfig(GPIOA, GPIO_PinSource2, GPIO_AF_USART2);
 651:bsp/src/bsp_uart_fifo.c ****     #endif
 652:bsp/src/bsp_uart_fifo.c **** 
 653:bsp/src/bsp_uart_fifo.c **** 		/* å°† PA3 æ˜ å°„ä¸º USART2_RX */
 654:bsp/src/bsp_uart_fifo.c **** 		GPIO_PinAFConfig(GPIOA, GPIO_PinSource3, GPIO_AF_USART2);
 136              		.loc 1 654 3 view .LVU36
 137 0022 0722     		movs	r2, #7
 138 0024 0321     		movs	r1, #3
 139 0026 2846     		mov	r0, r5
 140 0028 FFF7FEFF 		bl	GPIO_PinAFConfig
 141              	.LVL3:
 655:bsp/src/bsp_uart_fifo.c **** 
 656:bsp/src/bsp_uart_fifo.c **** 		/* é…ç½® USART Tx ä¸ºå¤ç”¨åŠŸèƒ½ */
 657:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;	/* è¾“å‡ºç±»å‹ä¸ºæ¨æŒ½ */
 142              		.loc 1 657 3 view .LVU37
 143              		.loc 1 657 33 is_stmt 0 view .LVU38
 144 002c 0024     		movs	r4, #0
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 15


 145 002e 8DF81640 		strb	r4, [sp, #22]
 658:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;	/* å†…éƒ¨ä¸Šæ‹‰ç”µé˜»ä½¿èƒ½ */
 146              		.loc 1 658 3 is_stmt 1 view .LVU39
 147              		.loc 1 658 32 is_stmt 0 view .LVU40
 148 0032 0127     		movs	r7, #1
 149 0034 8DF81770 		strb	r7, [sp, #23]
 659:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;	/* å¤ç”¨æ¨¡å¼ */
 150              		.loc 1 659 3 is_stmt 1 view .LVU41
 151              		.loc 1 659 32 is_stmt 0 view .LVU42
 152 0038 0226     		movs	r6, #2
 153 003a 8DF81460 		strb	r6, [sp, #20]
 660:bsp/src/bsp_uart_fifo.c **** 
 661:bsp/src/bsp_uart_fifo.c ****     #ifdef STM32F446xx
 662:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Pin = GPIO_Pin_2;
 154              		.loc 1 662 3 is_stmt 1 view .LVU43
 155              		.loc 1 662 31 is_stmt 0 view .LVU44
 156 003e 0423     		movs	r3, #4
 157 0040 0493     		str	r3, [sp, #16]
 663:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 158              		.loc 1 663 3 is_stmt 1 view .LVU45
 159              		.loc 1 663 33 is_stmt 0 view .LVU46
 160 0042 8DF81560 		strb	r6, [sp, #21]
 664:bsp/src/bsp_uart_fifo.c **** 		GPIO_Init(GPIOA, &GPIO_InitStructure);
 161              		.loc 1 664 3 is_stmt 1 view .LVU47
 162 0046 04A9     		add	r1, sp, #16
 163 0048 2846     		mov	r0, r5
 164 004a FFF7FEFF 		bl	GPIO_Init
 165              	.LVL4:
 665:bsp/src/bsp_uart_fifo.c ****     #else
 666:bsp/src/bsp_uart_fifo.c ****         //GPIO_InitStructure.GPIO_Pin = GPIO_Pin_2;
 667:bsp/src/bsp_uart_fifo.c **** 		//GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 668:bsp/src/bsp_uart_fifo.c **** 		//GPIO_Init(GPIOA, &GPIO_InitStructure);
 669:bsp/src/bsp_uart_fifo.c ****     #endif
 670:bsp/src/bsp_uart_fifo.c **** 
 671:bsp/src/bsp_uart_fifo.c **** 		/* é…ç½® USART Rx ä¸ºå¤ç”¨åŠŸèƒ½ */
 672:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
 166              		.loc 1 672 3 view .LVU48
 167              		.loc 1 672 32 is_stmt 0 view .LVU49
 168 004e 8DF81460 		strb	r6, [sp, #20]
 673:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Pin = GPIO_Pin_3;
 169              		.loc 1 673 3 is_stmt 1 view .LVU50
 170              		.loc 1 673 31 is_stmt 0 view .LVU51
 171 0052 0823     		movs	r3, #8
 172 0054 0493     		str	r3, [sp, #16]
 674:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 173              		.loc 1 674 3 is_stmt 1 view .LVU52
 174              		.loc 1 674 33 is_stmt 0 view .LVU53
 175 0056 8DF81560 		strb	r6, [sp, #21]
 675:bsp/src/bsp_uart_fifo.c **** 		GPIO_Init(GPIOA, &GPIO_InitStructure);
 176              		.loc 1 675 3 is_stmt 1 view .LVU54
 177 005a 04A9     		add	r1, sp, #16
 178 005c 2846     		mov	r0, r5
 179 005e FFF7FEFF 		bl	GPIO_Init
 180              	.LVL5:
 676:bsp/src/bsp_uart_fifo.c **** 	#endif
 677:bsp/src/bsp_uart_fifo.c **** 
 678:bsp/src/bsp_uart_fifo.c **** 	/* ç¬¬2æ­¥ï¼š é…ç½®ä¸²å£ç¡¬ä»¶å‚æ•° */
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 16


 679:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_BaudRate = UART2_BAUD;	/* æ³¢ç‰¹ç‡ */
 181              		.loc 1 679 2 view .LVU55
 182              		.loc 1 679 37 is_stmt 0 view .LVU56
 183 0062 4FF4E133 		mov	r3, #115200
 184 0066 0093     		str	r3, [sp]
 680:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_WordLength = USART_WordLength_8b;
 185              		.loc 1 680 2 is_stmt 1 view .LVU57
 186              		.loc 1 680 39 is_stmt 0 view .LVU58
 187 0068 ADF80440 		strh	r4, [sp, #4]	@ movhi
 681:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_StopBits = USART_StopBits_1;
 188              		.loc 1 681 2 is_stmt 1 view .LVU59
 189              		.loc 1 681 37 is_stmt 0 view .LVU60
 190 006c ADF80640 		strh	r4, [sp, #6]	@ movhi
 682:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_Parity = USART_Parity_No ;
 191              		.loc 1 682 2 is_stmt 1 view .LVU61
 192              		.loc 1 682 35 is_stmt 0 view .LVU62
 193 0070 ADF80840 		strh	r4, [sp, #8]	@ movhi
 683:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
 194              		.loc 1 683 2 is_stmt 1 view .LVU63
 195              		.loc 1 683 48 is_stmt 0 view .LVU64
 196 0074 ADF80C40 		strh	r4, [sp, #12]	@ movhi
 684:bsp/src/bsp_uart_fifo.c ****     #ifdef STM32F446xx
 685:bsp/src/bsp_uart_fifo.c ****     USART_InitStructure.USART_Mode = USART_Mode_Tx | USART_Mode_Rx;
 197              		.loc 1 685 5 is_stmt 1 view .LVU65
 198              		.loc 1 685 36 is_stmt 0 view .LVU66
 199 0078 0C23     		movs	r3, #12
 200 007a ADF80A30 		strh	r3, [sp, #10]	@ movhi
 686:bsp/src/bsp_uart_fifo.c ****     #else
 687:bsp/src/bsp_uart_fifo.c **** 	     USART_InitStructure.USART_Mode = USART_Mode_Rx;		/* ä»…é€‰æ‹©æ¥æ”¶æ¨¡å¼ */
 688:bsp/src/bsp_uart_fifo.c ****     #endif
 689:bsp/src/bsp_uart_fifo.c **** 	USART_Init(USART2, &USART_InitStructure);
 201              		.loc 1 689 2 is_stmt 1 view .LVU67
 202 007e 0B4C     		ldr	r4, .L6+4
 203 0080 6946     		mov	r1, sp
 204 0082 2046     		mov	r0, r4
 205 0084 FFF7FEFF 		bl	USART_Init
 206              	.LVL6:
 690:bsp/src/bsp_uart_fifo.c **** 
 691:bsp/src/bsp_uart_fifo.c **** 	USART_ITConfig(USART2, USART_IT_RXNE, ENABLE);	/* ä½¿èƒ½æ¥æ”¶ä¸­æ–­ */
 207              		.loc 1 691 2 view .LVU68
 208 0088 3A46     		mov	r2, r7
 209 008a 40F22551 		movw	r1, #1317
 210 008e 2046     		mov	r0, r4
 211 0090 FFF7FEFF 		bl	USART_ITConfig
 212              	.LVL7:
 692:bsp/src/bsp_uart_fifo.c **** 	/*
 693:bsp/src/bsp_uart_fifo.c **** 		USART_ITConfig(USART1, USART_IT_TXE, ENABLE);
 694:bsp/src/bsp_uart_fifo.c **** 		æ³¨æ„: ä¸è¦åœ¨æ­¤å¤„æ‰“å¼€å‘é€ä¸­æ–­
 695:bsp/src/bsp_uart_fifo.c **** 		å‘é€ä¸­æ–­ä½¿èƒ½åœ¨SendUart()å‡½æ•°æ‰“å¼€
 696:bsp/src/bsp_uart_fifo.c **** 	*/
 697:bsp/src/bsp_uart_fifo.c **** 	USART_Cmd(USART2, ENABLE);		/* ä½¿èƒ½ä¸²å£ */
 213              		.loc 1 697 2 view .LVU69
 214 0094 3946     		mov	r1, r7
 215 0096 2046     		mov	r0, r4
 216 0098 FFF7FEFF 		bl	USART_Cmd
 217              	.LVL8:
 698:bsp/src/bsp_uart_fifo.c **** 
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 17


 699:bsp/src/bsp_uart_fifo.c **** 	/* CPUçš„å°ç¼ºé™·ï¼šä¸²å£é…ç½®å¥½ï¼Œå¦‚æœç›´æ¥Sendï¼Œåˆ™ç¬¬1ä¸ªå­—èŠ‚å‘é€ä¸å‡ºå»
 700:bsp/src/bsp_uart_fifo.c **** 		å¦‚ä¸‹è¯­å¥è§£å†³ç¬¬1ä¸ªå­—èŠ‚æ— æ³•æ­£ç¡®å‘é€å‡ºå»çš„é—®é¢˜ */
 701:bsp/src/bsp_uart_fifo.c **** 	USART_ClearFlag(USART2, USART_FLAG_TC);     /* æ¸…å‘é€å®Œæˆæ ‡å¿—ï¼ŒTransmission Complete flag 
 218              		.loc 1 701 2 view .LVU70
 219 009c 4021     		movs	r1, #64
 220 009e 2046     		mov	r0, r4
 221 00a0 FFF7FEFF 		bl	USART_ClearFlag
 222              	.LVL9:
 702:bsp/src/bsp_uart_fifo.c **** #endif
 703:bsp/src/bsp_uart_fifo.c **** 
 704:bsp/src/bsp_uart_fifo.c **** #if UART3_FIFO_EN == 1			/* ä¸²å£3 TX = PB10   RX = PB11 */
 705:bsp/src/bsp_uart_fifo.c **** 
 706:bsp/src/bsp_uart_fifo.c **** 	/* é…ç½® PB2ä¸ºæ¨æŒ½è¾“å‡ºï¼Œç”¨äºåˆ‡æ¢ RS485èŠ¯ç‰‡çš„æ”¶å‘çŠ¶æ€ */
 707:bsp/src/bsp_uart_fifo.c **** 	{
 708:bsp/src/bsp_uart_fifo.c **** 		RCC_AHB1PeriphClockCmd(RCC_RS485_TXEN, ENABLE);
 709:bsp/src/bsp_uart_fifo.c **** 
 710:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Mode = GPIO_Mode_OUT;		/* è®¾ä¸ºè¾“å‡ºå£ */
 711:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;		/* è®¾ä¸ºæ¨æŒ½æ¨¡å¼ */
 712:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_NOPULL;	/* ä¸Šä¸‹æ‹‰ç”µé˜»ä¸ä½¿èƒ½ */
 713:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Speed = GPIO_Speed_100MHz;	/* IOå£æœ€å¤§é€Ÿåº¦ */
 714:bsp/src/bsp_uart_fifo.c **** 
 715:bsp/src/bsp_uart_fifo.c **** 		GPIO_InitStructure.GPIO_Pin = PIN_RS485_TXEN;
 716:bsp/src/bsp_uart_fifo.c **** 		GPIO_Init(PORT_RS485_TXEN, &GPIO_InitStructure);
 717:bsp/src/bsp_uart_fifo.c **** 	}
 718:bsp/src/bsp_uart_fifo.c **** 
 719:bsp/src/bsp_uart_fifo.c **** 	/* æ‰“å¼€ GPIO æ—¶é’Ÿ */
 720:bsp/src/bsp_uart_fifo.c **** 	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOB, ENABLE);
 721:bsp/src/bsp_uart_fifo.c **** 
 722:bsp/src/bsp_uart_fifo.c **** 	/* æ‰“å¼€ UART æ—¶é’Ÿ */
 723:bsp/src/bsp_uart_fifo.c **** 	RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART3, ENABLE);
 724:bsp/src/bsp_uart_fifo.c **** 
 725:bsp/src/bsp_uart_fifo.c **** 	/* å°† PB10 æ˜ å°„ä¸º USART3_TX */
 726:bsp/src/bsp_uart_fifo.c **** 	GPIO_PinAFConfig(GPIOB, GPIO_PinSource10, GPIO_AF_USART3);
 727:bsp/src/bsp_uart_fifo.c **** 
 728:bsp/src/bsp_uart_fifo.c **** 	/* å°† PB11 æ˜ å°„ä¸º USART3_RX */
 729:bsp/src/bsp_uart_fifo.c **** 	GPIO_PinAFConfig(GPIOB, GPIO_PinSource11, GPIO_AF_USART3);
 730:bsp/src/bsp_uart_fifo.c **** 
 731:bsp/src/bsp_uart_fifo.c **** 	/* é…ç½® USART Tx ä¸ºå¤ç”¨åŠŸèƒ½ */
 732:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;	/* è¾“å‡ºç±»å‹ä¸ºæ¨æŒ½ */
 733:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;	/* å†…éƒ¨ä¸Šæ‹‰ç”µé˜»ä½¿èƒ½ */
 734:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;	/* å¤ç”¨æ¨¡å¼ */
 735:bsp/src/bsp_uart_fifo.c **** 
 736:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10;
 737:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 738:bsp/src/bsp_uart_fifo.c **** 	GPIO_Init(GPIOB, &GPIO_InitStructure);
 739:bsp/src/bsp_uart_fifo.c **** 
 740:bsp/src/bsp_uart_fifo.c **** 	/* é…ç½® USART Rx ä¸ºå¤ç”¨åŠŸèƒ½ */
 741:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
 742:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_11;
 743:bsp/src/bsp_uart_fifo.c **** 	GPIO_Init(GPIOB, &GPIO_InitStructure);
 744:bsp/src/bsp_uart_fifo.c **** 
 745:bsp/src/bsp_uart_fifo.c **** 	/* ç¬¬2æ­¥ï¼š é…ç½®ä¸²å£ç¡¬ä»¶å‚æ•° */
 746:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_BaudRate = UART3_BAUD;	/* æ³¢ç‰¹ç‡ */
 747:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_WordLength = USART_WordLength_8b;
 748:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_StopBits = USART_StopBits_1;
 749:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_Parity = USART_Parity_No ;
 750:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 18


 751:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;
 752:bsp/src/bsp_uart_fifo.c **** 	USART_Init(USART3, &USART_InitStructure);
 753:bsp/src/bsp_uart_fifo.c **** 
 754:bsp/src/bsp_uart_fifo.c **** 	USART_ITConfig(USART3, USART_IT_RXNE, ENABLE);	/* ä½¿èƒ½æ¥æ”¶ä¸­æ–­ */
 755:bsp/src/bsp_uart_fifo.c **** 	/*
 756:bsp/src/bsp_uart_fifo.c **** 		USART_ITConfig(USART1, USART_IT_TXE, ENABLE);
 757:bsp/src/bsp_uart_fifo.c **** 		æ³¨æ„: ä¸è¦åœ¨æ­¤å¤„æ‰“å¼€å‘é€ä¸­æ–­
 758:bsp/src/bsp_uart_fifo.c **** 		å‘é€ä¸­æ–­ä½¿èƒ½åœ¨SendUart()å‡½æ•°æ‰“å¼€
 759:bsp/src/bsp_uart_fifo.c **** 	*/
 760:bsp/src/bsp_uart_fifo.c **** 	USART_Cmd(USART3, ENABLE);		/* ä½¿èƒ½ä¸²å£ */
 761:bsp/src/bsp_uart_fifo.c **** 
 762:bsp/src/bsp_uart_fifo.c **** 	/* CPUçš„å°ç¼ºé™·ï¼šä¸²å£é…ç½®å¥½ï¼Œå¦‚æœç›´æ¥Sendï¼Œåˆ™ç¬¬1ä¸ªå­—èŠ‚å‘é€ä¸å‡ºå»
 763:bsp/src/bsp_uart_fifo.c **** 		å¦‚ä¸‹è¯­å¥è§£å†³ç¬¬1ä¸ªå­—èŠ‚æ— æ³•æ­£ç¡®å‘é€å‡ºå»çš„é—®é¢˜ */
 764:bsp/src/bsp_uart_fifo.c **** 	USART_ClearFlag(USART3, USART_FLAG_TC);     /* æ¸…å‘é€å®Œæˆæ ‡å¿—ï¼ŒTransmission Complete flag 
 765:bsp/src/bsp_uart_fifo.c **** #endif
 766:bsp/src/bsp_uart_fifo.c **** 
 767:bsp/src/bsp_uart_fifo.c **** #if UART4_FIFO_EN == 1			/* ä¸²å£4 TX = PC10   RX = PC11 */
 768:bsp/src/bsp_uart_fifo.c **** 	/* ç¬¬1æ­¥ï¼š é…ç½®GPIO */
 769:bsp/src/bsp_uart_fifo.c **** 
 770:bsp/src/bsp_uart_fifo.c **** 	/* æ‰“å¼€ GPIO æ—¶é’Ÿ */
 771:bsp/src/bsp_uart_fifo.c **** 	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOC, ENABLE);
 772:bsp/src/bsp_uart_fifo.c **** 
 773:bsp/src/bsp_uart_fifo.c **** 	/* æ‰“å¼€ UART æ—¶é’Ÿ */
 774:bsp/src/bsp_uart_fifo.c **** 	RCC_APB1PeriphClockCmd(RCC_APB1Periph_UART4, ENABLE);
 775:bsp/src/bsp_uart_fifo.c **** 
 776:bsp/src/bsp_uart_fifo.c **** 	/* å°† PC10 æ˜ å°„ä¸º UART4_TX */
 777:bsp/src/bsp_uart_fifo.c **** 	GPIO_PinAFConfig(GPIOC, GPIO_PinSource10, GPIO_AF_USART1);
 778:bsp/src/bsp_uart_fifo.c **** 
 779:bsp/src/bsp_uart_fifo.c **** 	/* å°† PC11 æ˜ å°„ä¸º UART4_RX */
 780:bsp/src/bsp_uart_fifo.c **** 	GPIO_PinAFConfig(GPIOC, GPIO_PinSource11, GPIO_AF_USART1);
 781:bsp/src/bsp_uart_fifo.c **** 
 782:bsp/src/bsp_uart_fifo.c **** 	/* é…ç½® USART Tx ä¸ºå¤ç”¨åŠŸèƒ½ */
 783:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;	/* è¾“å‡ºç±»å‹ä¸ºæ¨æŒ½ */
 784:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;	/* å†…éƒ¨ä¸Šæ‹‰ç”µé˜»ä½¿èƒ½ */
 785:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;	/* å¤ç”¨æ¨¡å¼ */
 786:bsp/src/bsp_uart_fifo.c **** 
 787:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10;
 788:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 789:bsp/src/bsp_uart_fifo.c **** 	GPIO_Init(GPIOC, &GPIO_InitStructure);
 790:bsp/src/bsp_uart_fifo.c **** 
 791:bsp/src/bsp_uart_fifo.c **** 	/* é…ç½® USART Rx ä¸ºå¤ç”¨åŠŸèƒ½ */
 792:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
 793:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_11;
 794:bsp/src/bsp_uart_fifo.c **** 	GPIO_Init(GPIOC, &GPIO_InitStructure);
 795:bsp/src/bsp_uart_fifo.c **** 
 796:bsp/src/bsp_uart_fifo.c **** 	/* ç¬¬2æ­¥ï¼š é…ç½®ä¸²å£ç¡¬ä»¶å‚æ•° */
 797:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_BaudRate = UART1_BAUD;	/* æ³¢ç‰¹ç‡ */
 798:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_WordLength = USART_WordLength_8b;
 799:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_StopBits = USART_StopBits_1;
 800:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_Parity = USART_Parity_No ;
 801:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
 802:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;
 803:bsp/src/bsp_uart_fifo.c **** 	USART_Init(UART4, &USART_InitStructure);
 804:bsp/src/bsp_uart_fifo.c **** 
 805:bsp/src/bsp_uart_fifo.c **** 	USART_ITConfig(UART4, USART_IT_RXNE, ENABLE);	/* ä½¿èƒ½æ¥æ”¶ä¸­æ–­ */
 806:bsp/src/bsp_uart_fifo.c **** 	/*
 807:bsp/src/bsp_uart_fifo.c **** 		USART_ITConfig(USART1, USART_IT_TXE, ENABLE);
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 19


 808:bsp/src/bsp_uart_fifo.c **** 		æ³¨æ„: ä¸è¦åœ¨æ­¤å¤„æ‰“å¼€å‘é€ä¸­æ–­
 809:bsp/src/bsp_uart_fifo.c **** 		å‘é€ä¸­æ–­ä½¿èƒ½åœ¨SendUart()å‡½æ•°æ‰“å¼€
 810:bsp/src/bsp_uart_fifo.c **** 	*/
 811:bsp/src/bsp_uart_fifo.c **** 	USART_Cmd(UART4, ENABLE);		/* ä½¿èƒ½ä¸²å£ */
 812:bsp/src/bsp_uart_fifo.c **** 
 813:bsp/src/bsp_uart_fifo.c **** 	/* CPUçš„å°ç¼ºé™·ï¼šä¸²å£é…ç½®å¥½ï¼Œå¦‚æœç›´æ¥Sendï¼Œåˆ™ç¬¬1ä¸ªå­—èŠ‚å‘é€ä¸å‡ºå»
 814:bsp/src/bsp_uart_fifo.c **** 		å¦‚ä¸‹è¯­å¥è§£å†³ç¬¬1ä¸ªå­—èŠ‚æ— æ³•æ­£ç¡®å‘é€å‡ºå»çš„é—®é¢˜ */
 815:bsp/src/bsp_uart_fifo.c **** 	USART_ClearFlag(UART4, USART_FLAG_TC);     /* æ¸…å‘é€å®Œæˆæ ‡å¿—ï¼ŒTransmission Complete flag *
 816:bsp/src/bsp_uart_fifo.c **** #endif
 817:bsp/src/bsp_uart_fifo.c **** 
 818:bsp/src/bsp_uart_fifo.c **** #if UART5_FIFO_EN == 1			/* ä¸²å£5 TX = PC12   RX = PD2 */
 819:bsp/src/bsp_uart_fifo.c **** 	/* ç¬¬1æ­¥ï¼š é…ç½®GPIO */
 820:bsp/src/bsp_uart_fifo.c **** 
 821:bsp/src/bsp_uart_fifo.c **** 	/* æ‰“å¼€ GPIO æ—¶é’Ÿ */
 822:bsp/src/bsp_uart_fifo.c **** 	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOC |RCC_AHB1Periph_GPIOD, ENABLE);
 823:bsp/src/bsp_uart_fifo.c **** 
 824:bsp/src/bsp_uart_fifo.c **** 	/* æ‰“å¼€ UART æ—¶é’Ÿ */
 825:bsp/src/bsp_uart_fifo.c **** 	RCC_APB1PeriphClockCmd(RCC_APB1Periph_UART5, ENABLE);
 826:bsp/src/bsp_uart_fifo.c **** 
 827:bsp/src/bsp_uart_fifo.c **** 	/* å°† PC12 æ˜ å°„ä¸º UART5_TX */
 828:bsp/src/bsp_uart_fifo.c **** 	GPIO_PinAFConfig(GPIOC, GPIO_PinSource12, GPIO_AF_UART5);
 829:bsp/src/bsp_uart_fifo.c **** 
 830:bsp/src/bsp_uart_fifo.c **** 	/* å°† PD2 æ˜ å°„ä¸º UART5_RX */
 831:bsp/src/bsp_uart_fifo.c **** 	GPIO_PinAFConfig(GPIOD, GPIO_PinSource2, GPIO_AF_UART5);
 832:bsp/src/bsp_uart_fifo.c **** 
 833:bsp/src/bsp_uart_fifo.c **** 	/* é…ç½® UART Tx ä¸ºå¤ç”¨åŠŸèƒ½ */
 834:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;	/* è¾“å‡ºç±»å‹ä¸ºæ¨æŒ½ */
 835:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;	/* å†…éƒ¨ä¸Šæ‹‰ç”µé˜»ä½¿èƒ½ */
 836:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;	/* å¤ç”¨æ¨¡å¼ */
 837:bsp/src/bsp_uart_fifo.c **** 
 838:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_12;
 839:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 840:bsp/src/bsp_uart_fifo.c **** 	GPIO_Init(GPIOC, &GPIO_InitStructure);
 841:bsp/src/bsp_uart_fifo.c **** 
 842:bsp/src/bsp_uart_fifo.c **** 	/* é…ç½® UART Rx ä¸ºå¤ç”¨åŠŸèƒ½ */
 843:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
 844:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_2;
 845:bsp/src/bsp_uart_fifo.c **** 	GPIO_Init(GPIOD, &GPIO_InitStructure);
 846:bsp/src/bsp_uart_fifo.c **** 
 847:bsp/src/bsp_uart_fifo.c **** 	/* ç¬¬2æ­¥ï¼š é…ç½®ä¸²å£ç¡¬ä»¶å‚æ•° */
 848:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_BaudRate = UART5_BAUD;	/* æ³¢ç‰¹ç‡ */
 849:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_WordLength = USART_WordLength_8b;
 850:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_StopBits = USART_StopBits_1;
 851:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_Parity = USART_Parity_No ;
 852:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
 853:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;
 854:bsp/src/bsp_uart_fifo.c **** 	USART_Init(UART5, &USART_InitStructure);
 855:bsp/src/bsp_uart_fifo.c **** 
 856:bsp/src/bsp_uart_fifo.c **** 	USART_ITConfig(UART5, USART_IT_RXNE, ENABLE);	/* ä½¿èƒ½æ¥æ”¶ä¸­æ–­ */
 857:bsp/src/bsp_uart_fifo.c **** 	/*
 858:bsp/src/bsp_uart_fifo.c **** 		USART_ITConfig(USART1, USART_IT_TXE, ENABLE);
 859:bsp/src/bsp_uart_fifo.c **** 		æ³¨æ„: ä¸è¦åœ¨æ­¤å¤„æ‰“å¼€å‘é€ä¸­æ–­
 860:bsp/src/bsp_uart_fifo.c **** 		å‘é€ä¸­æ–­ä½¿èƒ½åœ¨SendUart()å‡½æ•°æ‰“å¼€
 861:bsp/src/bsp_uart_fifo.c **** 	*/
 862:bsp/src/bsp_uart_fifo.c **** 	USART_Cmd(UART5, ENABLE);		/* ä½¿èƒ½ä¸²å£ */
 863:bsp/src/bsp_uart_fifo.c **** 
 864:bsp/src/bsp_uart_fifo.c **** 	/* CPUçš„å°ç¼ºé™·ï¼šä¸²å£é…ç½®å¥½ï¼Œå¦‚æœç›´æ¥Sendï¼Œåˆ™ç¬¬1ä¸ªå­—èŠ‚å‘é€ä¸å‡ºå»
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 20


 865:bsp/src/bsp_uart_fifo.c **** 		å¦‚ä¸‹è¯­å¥è§£å†³ç¬¬1ä¸ªå­—èŠ‚æ— æ³•æ­£ç¡®å‘é€å‡ºå»çš„é—®é¢˜ */
 866:bsp/src/bsp_uart_fifo.c **** 	USART_ClearFlag(UART5, USART_FLAG_TC);     /* æ¸…å‘é€å®Œæˆæ ‡å¿—ï¼ŒTransmission Complete flag *
 867:bsp/src/bsp_uart_fifo.c **** #endif
 868:bsp/src/bsp_uart_fifo.c **** 
 869:bsp/src/bsp_uart_fifo.c **** #if UART6_FIFO_EN == 1			/* PG14/USART6_TX , PC7/USART6_RX,PG8/USART6_RTS, PG15/USART6_CTS */
 870:bsp/src/bsp_uart_fifo.c **** 	/* ç¬¬1æ­¥ï¼š é…ç½®GPIO */
 871:bsp/src/bsp_uart_fifo.c **** 
 872:bsp/src/bsp_uart_fifo.c **** 	/* æ‰“å¼€ GPIO æ—¶é’Ÿ */
 873:bsp/src/bsp_uart_fifo.c **** 	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOC |RCC_AHB1Periph_GPIOG, ENABLE);
 874:bsp/src/bsp_uart_fifo.c **** 
 875:bsp/src/bsp_uart_fifo.c **** 	/* æ‰“å¼€ UART æ—¶é’Ÿ */
 876:bsp/src/bsp_uart_fifo.c **** 	RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART6, ENABLE);
 877:bsp/src/bsp_uart_fifo.c **** 
 878:bsp/src/bsp_uart_fifo.c **** 	/* å°† PG14 æ˜ å°„ä¸º USART6_TX */
 879:bsp/src/bsp_uart_fifo.c **** 	GPIO_PinAFConfig(GPIOG, GPIO_PinSource14, GPIO_AF_USART6);
 880:bsp/src/bsp_uart_fifo.c **** 
 881:bsp/src/bsp_uart_fifo.c **** 	/* å°† PC7 æ˜ å°„ä¸º USART6_RX */
 882:bsp/src/bsp_uart_fifo.c **** 	GPIO_PinAFConfig(GPIOC, GPIO_PinSource7, GPIO_AF_USART6);
 883:bsp/src/bsp_uart_fifo.c **** 
 884:bsp/src/bsp_uart_fifo.c **** 	/* å°† PG8 æ˜ å°„ä¸º USART6_RTS */
 885:bsp/src/bsp_uart_fifo.c **** 	GPIO_PinAFConfig(GPIOG, GPIO_PinSource8, GPIO_AF_USART6);
 886:bsp/src/bsp_uart_fifo.c **** 
 887:bsp/src/bsp_uart_fifo.c **** 	/* å°† PG15 æ˜ å°„ä¸º USART6_CTS */
 888:bsp/src/bsp_uart_fifo.c **** 	GPIO_PinAFConfig(GPIOG, GPIO_PinSource15, GPIO_AF_USART6);
 889:bsp/src/bsp_uart_fifo.c **** 
 890:bsp/src/bsp_uart_fifo.c **** 	/* é…ç½® PG14/USART6_TX ä¸ºå¤ç”¨åŠŸèƒ½ */
 891:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;	/* è¾“å‡ºç±»å‹ä¸ºæ¨æŒ½ */
 892:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_PuPd = GPIO_PuPd_UP;	/* å†…éƒ¨ä¸Šæ‹‰ç”µé˜»ä½¿èƒ½ */
 893:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;	/* å¤ç”¨æ¨¡å¼ */
 894:bsp/src/bsp_uart_fifo.c **** 
 895:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_14;
 896:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
 897:bsp/src/bsp_uart_fifo.c **** 	GPIO_Init(GPIOG, &GPIO_InitStructure);
 898:bsp/src/bsp_uart_fifo.c **** 
 899:bsp/src/bsp_uart_fifo.c **** 	/* é…ç½® PC7/USART6_RX ä¸ºå¤ç”¨åŠŸèƒ½ */
 900:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
 901:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_7;
 902:bsp/src/bsp_uart_fifo.c **** 	GPIO_Init(GPIOC, &GPIO_InitStructure);
 903:bsp/src/bsp_uart_fifo.c **** 
 904:bsp/src/bsp_uart_fifo.c **** 	/* é…ç½® PG8/USART6_RTS ä¸ºå¤ç”¨åŠŸèƒ½ */
 905:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
 906:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_8;
 907:bsp/src/bsp_uart_fifo.c **** 	GPIO_Init(GPIOG, &GPIO_InitStructure);
 908:bsp/src/bsp_uart_fifo.c **** 
 909:bsp/src/bsp_uart_fifo.c **** 	/* é…ç½® PG15/USART6_CTS ä¸ºå¤ç”¨åŠŸèƒ½ */
 910:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
 911:bsp/src/bsp_uart_fifo.c **** 	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_15;
 912:bsp/src/bsp_uart_fifo.c **** 	GPIO_Init(GPIOG, &GPIO_InitStructure);
 913:bsp/src/bsp_uart_fifo.c **** 
 914:bsp/src/bsp_uart_fifo.c **** 	/* ç¬¬2æ­¥ï¼š é…ç½®ä¸²å£ç¡¬ä»¶å‚æ•° */
 915:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_BaudRate = UART6_BAUD;	/* æ³¢ç‰¹ç‡ */
 916:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_WordLength = USART_WordLength_8b;
 917:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_StopBits = USART_StopBits_1;
 918:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_Parity = USART_Parity_No ;
 919:bsp/src/bsp_uart_fifo.c **** 	//USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_RTS_CTS;	/* é€‰æ‹©ç¡¬ä
 920:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;	/* ä¸è¦ç¡¬ä»¶æµ
 921:bsp/src/bsp_uart_fifo.c **** 	USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 21


 922:bsp/src/bsp_uart_fifo.c **** 	USART_Init(USART6, &USART_InitStructure);
 923:bsp/src/bsp_uart_fifo.c **** 
 924:bsp/src/bsp_uart_fifo.c **** 	USART_ITConfig(USART6, USART_IT_RXNE, ENABLE);	/* ä½¿èƒ½æ¥æ”¶ä¸­æ–­ */
 925:bsp/src/bsp_uart_fifo.c **** 	/*
 926:bsp/src/bsp_uart_fifo.c **** 		USART_ITConfig(USART1, USART_IT_TXE, ENABLE);
 927:bsp/src/bsp_uart_fifo.c **** 		æ³¨æ„: ä¸è¦åœ¨æ­¤å¤„æ‰“å¼€å‘é€ä¸­æ–­
 928:bsp/src/bsp_uart_fifo.c **** 		å‘é€ä¸­æ–­ä½¿èƒ½åœ¨SendUart()å‡½æ•°æ‰“å¼€
 929:bsp/src/bsp_uart_fifo.c **** 	*/
 930:bsp/src/bsp_uart_fifo.c **** 	USART_Cmd(USART6, ENABLE);		/* ä½¿èƒ½ä¸²å£ */
 931:bsp/src/bsp_uart_fifo.c **** 
 932:bsp/src/bsp_uart_fifo.c **** 	/* CPUçš„å°ç¼ºé™·ï¼šä¸²å£é…ç½®å¥½ï¼Œå¦‚æœç›´æ¥Sendï¼Œåˆ™ç¬¬1ä¸ªå­—èŠ‚å‘é€ä¸å‡ºå»
 933:bsp/src/bsp_uart_fifo.c **** 		å¦‚ä¸‹è¯­å¥è§£å†³ç¬¬1ä¸ªå­—èŠ‚æ— æ³•æ­£ç¡®å‘é€å‡ºå»çš„é—®é¢˜ */
 934:bsp/src/bsp_uart_fifo.c **** 	USART_ClearFlag(USART6, USART_FLAG_TC);     /* æ¸…å‘é€å®Œæˆæ ‡å¿—ï¼ŒTransmission Complete flag 
 935:bsp/src/bsp_uart_fifo.c **** #endif
 936:bsp/src/bsp_uart_fifo.c **** }
 223              		.loc 1 936 1 is_stmt 0 view .LVU71
 224 00a4 07B0     		add	sp, sp, #28
 225              	.LCFI2:
 226              		.cfi_def_cfa_offset 20
 227              		@ sp needed
 228 00a6 F0BD     		pop	{r4, r5, r6, r7, pc}
 229              	.L7:
 230              		.align	2
 231              	.L6:
 232 00a8 00000240 		.word	1073872896
 233 00ac 00440040 		.word	1073759232
 234              		.cfi_endproc
 235              	.LFE141:
 237              		.section	.text.ConfigUartNVIC,"ax",%progbits
 238              		.align	1
 239              		.syntax unified
 240              		.thumb
 241              		.thumb_func
 242              		.fpu fpv4-sp-d16
 244              	ConfigUartNVIC:
 245              	.LFB142:
 937:bsp/src/bsp_uart_fifo.c **** 
 938:bsp/src/bsp_uart_fifo.c **** /*
 939:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 940:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: ConfigUartNVIC
 941:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: é…ç½®ä¸²å£ç¡¬ä»¶ä¸­æ–­.
 942:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚:  æ— 
 943:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: æ— 
 944:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
 945:bsp/src/bsp_uart_fifo.c **** */
 946:bsp/src/bsp_uart_fifo.c **** static void ConfigUartNVIC(void)
 947:bsp/src/bsp_uart_fifo.c **** {
 246              		.loc 1 947 1 is_stmt 1 view -0
 247              		.cfi_startproc
 248              		@ args = 0, pretend = 0, frame = 8
 249              		@ frame_needed = 0, uses_anonymous_args = 0
 250 0000 00B5     		push	{lr}
 251              	.LCFI3:
 252              		.cfi_def_cfa_offset 4
 253              		.cfi_offset 14, -4
 254 0002 83B0     		sub	sp, sp, #12
 255              	.LCFI4:
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 22


 256              		.cfi_def_cfa_offset 16
 948:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitTypeDef NVIC_InitStructure;
 257              		.loc 1 948 2 view .LVU73
 949:bsp/src/bsp_uart_fifo.c **** 
 950:bsp/src/bsp_uart_fifo.c **** 	/* Configure the NVIC Preemption Priority Bits */
 951:bsp/src/bsp_uart_fifo.c **** 	/*	NVIC_PriorityGroupConfig(NVIC_PriorityGroup_0);  --- åœ¨ bsp.c ä¸­ bsp_Init() ä¸­é…ç½®ä¸­æ–­ä¼
 952:bsp/src/bsp_uart_fifo.c **** 
 953:bsp/src/bsp_uart_fifo.c **** #if UART1_FIFO_EN == 1
 954:bsp/src/bsp_uart_fifo.c **** 	/* ä½¿èƒ½ä¸²å£1ä¸­æ–­ */
 955:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitStructure.NVIC_IRQChannel = USART1_IRQn;
 956:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitStructure.NVIC_IRQChannelSubPriority = 0;
 957:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 958:bsp/src/bsp_uart_fifo.c **** 	NVIC_Init(&NVIC_InitStructure);
 959:bsp/src/bsp_uart_fifo.c **** #endif
 960:bsp/src/bsp_uart_fifo.c **** 
 961:bsp/src/bsp_uart_fifo.c **** #if UART2_FIFO_EN == 1
 962:bsp/src/bsp_uart_fifo.c **** 	/* ä½¿èƒ½ä¸²å£2ä¸­æ–­ */
 963:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitStructure.NVIC_IRQChannel = USART2_IRQn;
 258              		.loc 1 963 2 view .LVU74
 259              		.loc 1 963 37 is_stmt 0 view .LVU75
 260 0004 2623     		movs	r3, #38
 261 0006 8DF80430 		strb	r3, [sp, #4]
 964:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitStructure.NVIC_IRQChannelSubPriority = 1;
 262              		.loc 1 964 2 is_stmt 1 view .LVU76
 263              		.loc 1 964 48 is_stmt 0 view .LVU77
 264 000a 0123     		movs	r3, #1
 265 000c 8DF80630 		strb	r3, [sp, #6]
 965:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 266              		.loc 1 965 2 is_stmt 1 view .LVU78
 267              		.loc 1 965 40 is_stmt 0 view .LVU79
 268 0010 8DF80730 		strb	r3, [sp, #7]
 966:bsp/src/bsp_uart_fifo.c **** 	NVIC_Init(&NVIC_InitStructure);
 269              		.loc 1 966 2 is_stmt 1 view .LVU80
 270 0014 01A8     		add	r0, sp, #4
 271 0016 FFF7FEFF 		bl	NVIC_Init
 272              	.LVL10:
 967:bsp/src/bsp_uart_fifo.c **** #endif
 968:bsp/src/bsp_uart_fifo.c **** 
 969:bsp/src/bsp_uart_fifo.c **** #if UART3_FIFO_EN == 1
 970:bsp/src/bsp_uart_fifo.c **** 	/* ä½¿èƒ½ä¸²å£3ä¸­æ–­t */
 971:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitStructure.NVIC_IRQChannel = USART3_IRQn;
 972:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitStructure.NVIC_IRQChannelSubPriority = 2;
 973:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 974:bsp/src/bsp_uart_fifo.c **** 	NVIC_Init(&NVIC_InitStructure);
 975:bsp/src/bsp_uart_fifo.c **** #endif
 976:bsp/src/bsp_uart_fifo.c **** 
 977:bsp/src/bsp_uart_fifo.c **** #if UART4_FIFO_EN == 1
 978:bsp/src/bsp_uart_fifo.c **** 	/* ä½¿èƒ½ä¸²å£4ä¸­æ–­t */
 979:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitStructure.NVIC_IRQChannel = UART4_IRQn;
 980:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitStructure.NVIC_IRQChannelSubPriority = 3;
 981:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 982:bsp/src/bsp_uart_fifo.c **** 	NVIC_Init(&NVIC_InitStructure);
 983:bsp/src/bsp_uart_fifo.c **** #endif
 984:bsp/src/bsp_uart_fifo.c **** 
 985:bsp/src/bsp_uart_fifo.c **** #if UART5_FIFO_EN == 1
 986:bsp/src/bsp_uart_fifo.c **** 	/* ä½¿èƒ½ä¸²å£5ä¸­æ–­t */
 987:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitStructure.NVIC_IRQChannel = UART5_IRQn;
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 23


 988:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitStructure.NVIC_IRQChannelSubPriority = 4;
 989:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 990:bsp/src/bsp_uart_fifo.c **** 	NVIC_Init(&NVIC_InitStructure);
 991:bsp/src/bsp_uart_fifo.c **** #endif
 992:bsp/src/bsp_uart_fifo.c **** 
 993:bsp/src/bsp_uart_fifo.c **** #if UART6_FIFO_EN == 1
 994:bsp/src/bsp_uart_fifo.c **** 	/* ä½¿èƒ½ä¸²å£6ä¸­æ–­t */
 995:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitStructure.NVIC_IRQChannel = USART6_IRQn;
 996:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitStructure.NVIC_IRQChannelSubPriority = 5;
 997:bsp/src/bsp_uart_fifo.c **** 	NVIC_InitStructure.NVIC_IRQChannelCmd = ENABLE;
 998:bsp/src/bsp_uart_fifo.c **** 	NVIC_Init(&NVIC_InitStructure);
 999:bsp/src/bsp_uart_fifo.c **** #endif
1000:bsp/src/bsp_uart_fifo.c **** }
 273              		.loc 1 1000 1 is_stmt 0 view .LVU81
 274 001a 03B0     		add	sp, sp, #12
 275              	.LCFI5:
 276              		.cfi_def_cfa_offset 4
 277              		@ sp needed
 278 001c 5DF804FB 		ldr	pc, [sp], #4
 279              		.cfi_endproc
 280              	.LFE142:
 282              		.section	.text.UartSend,"ax",%progbits
 283              		.align	1
 284              		.syntax unified
 285              		.thumb
 286              		.thumb_func
 287              		.fpu fpv4-sp-d16
 289              	UartSend:
 290              	.LVL11:
 291              	.LFB143:
1001:bsp/src/bsp_uart_fifo.c **** 
1002:bsp/src/bsp_uart_fifo.c **** /*
1003:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
1004:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: UartSend
1005:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: å¡«å†™æ•°æ®åˆ°UARTå‘é€ç¼“å†²åŒº,å¹¶å¯åŠ¨å‘é€ä¸­æ–­ã€‚ä¸­æ–­å¤„ç†å‡½æ•°å‘é€
1006:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚:  æ— 
1007:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: æ— 
1008:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
1009:bsp/src/bsp_uart_fifo.c **** */
1010:bsp/src/bsp_uart_fifo.c **** static void UartSend(UartStr_TypeDef *_pUart, uint8_t *_ucaBuf, uint16_t _usLen)
1011:bsp/src/bsp_uart_fifo.c **** {
 292              		.loc 1 1011 1 is_stmt 1 view -0
 293              		.cfi_startproc
 294              		@ args = 0, pretend = 0, frame = 8
 295              		@ frame_needed = 0, uses_anonymous_args = 0
 296              		.loc 1 1011 1 is_stmt 0 view .LVU83
 297 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 298              	.LCFI6:
 299              		.cfi_def_cfa_offset 20
 300              		.cfi_offset 4, -20
 301              		.cfi_offset 5, -16
 302              		.cfi_offset 6, -12
 303              		.cfi_offset 7, -8
 304              		.cfi_offset 14, -4
 305 0002 83B0     		sub	sp, sp, #12
 306              	.LCFI7:
 307              		.cfi_def_cfa_offset 32
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 24


 308 0004 0446     		mov	r4, r0
 309 0006 0F46     		mov	r7, r1
 310 0008 1646     		mov	r6, r2
1012:bsp/src/bsp_uart_fifo.c **** 	uint16_t i;
 311              		.loc 1 1012 2 is_stmt 1 view .LVU84
1013:bsp/src/bsp_uart_fifo.c **** 
1014:bsp/src/bsp_uart_fifo.c **** 	for (i = 0; i < _usLen; i++)
 312              		.loc 1 1014 2 view .LVU85
 313              	.LVL12:
 314              		.loc 1 1014 9 is_stmt 0 view .LVU86
 315 000a 0025     		movs	r5, #0
 316              		.loc 1 1014 2 view .LVU87
 317 000c 07E0     		b	.L11
 318              	.LVL13:
 319              	.L13:
1015:bsp/src/bsp_uart_fifo.c **** 	{
1016:bsp/src/bsp_uart_fifo.c **** 		/* å¦‚æœå‘é€ç¼“å†²åŒºå·²ç»æ»¡äº†ï¼Œåˆ™ç­‰å¾…ç¼“å†²åŒºç©º */
1017:bsp/src/bsp_uart_fifo.c **** 	#if 0
1018:bsp/src/bsp_uart_fifo.c **** 		/*
1019:bsp/src/bsp_uart_fifo.c **** 			åœ¨è°ƒè¯•GPRSä¾‹ç¨‹æ—¶ï¼Œä¸‹é¢çš„ä»£ç å‡ºç°æ­»æœºï¼Œwhile æ­»å¾ªç¯
1020:bsp/src/bsp_uart_fifo.c **** 			åŸå› ï¼š å‘é€ç¬¬1ä¸ªå­—èŠ‚æ—¶ _pUart->usTxWrite = 1ï¼›_pUart->usTxRead = 0;
1021:bsp/src/bsp_uart_fifo.c **** 			å°†å¯¼è‡´while(1) æ— æ³•é€€å‡º
1022:bsp/src/bsp_uart_fifo.c **** 		*/
1023:bsp/src/bsp_uart_fifo.c **** 		while (1)
1024:bsp/src/bsp_uart_fifo.c **** 		{
1025:bsp/src/bsp_uart_fifo.c **** 			uint16_t usRead;
1026:bsp/src/bsp_uart_fifo.c **** 
1027:bsp/src/bsp_uart_fifo.c **** 			DISABLE_INT();
1028:bsp/src/bsp_uart_fifo.c **** 			usRead = _pUart->usTxRead;
1029:bsp/src/bsp_uart_fifo.c **** 			ENABLE_INT();
1030:bsp/src/bsp_uart_fifo.c **** 
1031:bsp/src/bsp_uart_fifo.c **** 			if (++usRead >= _pUart->usTxBufSize)
1032:bsp/src/bsp_uart_fifo.c **** 			{
1033:bsp/src/bsp_uart_fifo.c **** 				usRead = 0;
1034:bsp/src/bsp_uart_fifo.c **** 			}
1035:bsp/src/bsp_uart_fifo.c **** 
1036:bsp/src/bsp_uart_fifo.c **** 			if (usRead != _pUart->usTxWrite)
1037:bsp/src/bsp_uart_fifo.c **** 			{
1038:bsp/src/bsp_uart_fifo.c **** 				break;
1039:bsp/src/bsp_uart_fifo.c **** 			}
1040:bsp/src/bsp_uart_fifo.c **** 		}
1041:bsp/src/bsp_uart_fifo.c **** 	#else
1042:bsp/src/bsp_uart_fifo.c **** 		/* å½“ _pUart->usTxBufSize == 1 æ—¶, ä¸‹é¢çš„å‡½æ•°ä¼šæ­»æ‰(å¾…å®Œå–„) */
1043:bsp/src/bsp_uart_fifo.c **** 		while (1)
1044:bsp/src/bsp_uart_fifo.c **** 		{
1045:bsp/src/bsp_uart_fifo.c **** 			__IO uint16_t usCount;
1046:bsp/src/bsp_uart_fifo.c **** 
1047:bsp/src/bsp_uart_fifo.c **** 			DISABLE_INT();
1048:bsp/src/bsp_uart_fifo.c **** 			usCount = _pUart->usTxCount;
1049:bsp/src/bsp_uart_fifo.c **** 			ENABLE_INT();
1050:bsp/src/bsp_uart_fifo.c **** 
1051:bsp/src/bsp_uart_fifo.c **** 			if (usCount < _pUart->usTxBufSize)
1052:bsp/src/bsp_uart_fifo.c **** 			{
1053:bsp/src/bsp_uart_fifo.c **** 				break;
1054:bsp/src/bsp_uart_fifo.c **** 			}
1055:bsp/src/bsp_uart_fifo.c **** 		}
1056:bsp/src/bsp_uart_fifo.c **** 	#endif
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 25


1057:bsp/src/bsp_uart_fifo.c **** 
1058:bsp/src/bsp_uart_fifo.c **** 		/* å°†æ–°æ•°æ®å¡«å…¥å‘é€ç¼“å†²åŒº */
1059:bsp/src/bsp_uart_fifo.c **** 		_pUart->pTxBuf[_pUart->usTxWrite] = _ucaBuf[i];
1060:bsp/src/bsp_uart_fifo.c **** 
1061:bsp/src/bsp_uart_fifo.c **** 		DISABLE_INT();
1062:bsp/src/bsp_uart_fifo.c **** 		if (++_pUart->usTxWrite >= _pUart->usTxBufSize)
1063:bsp/src/bsp_uart_fifo.c **** 		{
1064:bsp/src/bsp_uart_fifo.c **** 			_pUart->usTxWrite = 0;
1065:bsp/src/bsp_uart_fifo.c **** 		}
1066:bsp/src/bsp_uart_fifo.c **** 		_pUart->usTxCount++;
 320              		.loc 1 1066 3 is_stmt 1 discriminator 2 view .LVU88
 321              		.loc 1 1066 9 is_stmt 0 discriminator 2 view .LVU89
 322 000e A38A     		ldrh	r3, [r4, #20]
 323              		.loc 1 1066 20 discriminator 2 view .LVU90
 324 0010 0133     		adds	r3, r3, #1
 325 0012 9BB2     		uxth	r3, r3
 326 0014 A382     		strh	r3, [r4, #20]	@ movhi
1067:bsp/src/bsp_uart_fifo.c **** 		ENABLE_INT();
 327              		.loc 1 1067 3 is_stmt 1 discriminator 2 view .LVU91
 328 0016 FFF7FEFF 		bl	vPortExitCritical
 329              	.LVL14:
1014:bsp/src/bsp_uart_fifo.c **** 	{
 330              		.loc 1 1014 27 is_stmt 0 discriminator 2 view .LVU92
 331 001a 0135     		adds	r5, r5, #1
 332              	.LVL15:
1014:bsp/src/bsp_uart_fifo.c **** 	{
 333              		.loc 1 1014 27 discriminator 2 view .LVU93
 334 001c ADB2     		uxth	r5, r5
 335              	.LVL16:
 336              	.L11:
1014:bsp/src/bsp_uart_fifo.c **** 	{
 337              		.loc 1 1014 2 discriminator 1 view .LVU94
 338 001e B542     		cmp	r5, r6
 339 0020 1ED2     		bcs	.L15
 340              	.L12:
1043:bsp/src/bsp_uart_fifo.c **** 		{
 341              		.loc 1 1043 3 is_stmt 1 view .LVU95
 342              	.LBB2:
1045:bsp/src/bsp_uart_fifo.c **** 
 343              		.loc 1 1045 4 view .LVU96
1047:bsp/src/bsp_uart_fifo.c **** 			usCount = _pUart->usTxCount;
 344              		.loc 1 1047 4 view .LVU97
 345 0022 FFF7FEFF 		bl	vPortEnterCritical
 346              	.LVL17:
1048:bsp/src/bsp_uart_fifo.c **** 			ENABLE_INT();
 347              		.loc 1 1048 4 view .LVU98
1048:bsp/src/bsp_uart_fifo.c **** 			ENABLE_INT();
 348              		.loc 1 1048 20 is_stmt 0 view .LVU99
 349 0026 A38A     		ldrh	r3, [r4, #20]
 350 0028 9BB2     		uxth	r3, r3
1048:bsp/src/bsp_uart_fifo.c **** 			ENABLE_INT();
 351              		.loc 1 1048 12 view .LVU100
 352 002a ADF80630 		strh	r3, [sp, #6]	@ movhi
1049:bsp/src/bsp_uart_fifo.c **** 
 353              		.loc 1 1049 4 is_stmt 1 view .LVU101
 354 002e FFF7FEFF 		bl	vPortExitCritical
 355              	.LVL18:
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 26


1051:bsp/src/bsp_uart_fifo.c **** 			{
 356              		.loc 1 1051 4 view .LVU102
1051:bsp/src/bsp_uart_fifo.c **** 			{
 357              		.loc 1 1051 24 is_stmt 0 view .LVU103
 358 0032 A289     		ldrh	r2, [r4, #12]
1051:bsp/src/bsp_uart_fifo.c **** 			{
 359              		.loc 1 1051 16 view .LVU104
 360 0034 BDF80630 		ldrh	r3, [sp, #6]
 361 0038 9BB2     		uxth	r3, r3
1051:bsp/src/bsp_uart_fifo.c **** 			{
 362              		.loc 1 1051 7 view .LVU105
 363 003a 9A42     		cmp	r2, r3
 364 003c F1D9     		bls	.L12
 365              	.LBE2:
1059:bsp/src/bsp_uart_fifo.c **** 
 366              		.loc 1 1059 3 is_stmt 1 view .LVU106
1059:bsp/src/bsp_uart_fifo.c **** 
 367              		.loc 1 1059 9 is_stmt 0 view .LVU107
 368 003e 6268     		ldr	r2, [r4, #4]
1059:bsp/src/bsp_uart_fifo.c **** 
 369              		.loc 1 1059 24 view .LVU108
 370 0040 238A     		ldrh	r3, [r4, #16]
 371 0042 9BB2     		uxth	r3, r3
1059:bsp/src/bsp_uart_fifo.c **** 
 372              		.loc 1 1059 46 view .LVU109
 373 0044 795D     		ldrb	r1, [r7, r5]	@ zero_extendqisi2
1059:bsp/src/bsp_uart_fifo.c **** 
 374              		.loc 1 1059 37 view .LVU110
 375 0046 D154     		strb	r1, [r2, r3]
1061:bsp/src/bsp_uart_fifo.c **** 		if (++_pUart->usTxWrite >= _pUart->usTxBufSize)
 376              		.loc 1 1061 3 is_stmt 1 view .LVU111
 377 0048 FFF7FEFF 		bl	vPortEnterCritical
 378              	.LVL19:
1062:bsp/src/bsp_uart_fifo.c **** 		{
 379              		.loc 1 1062 3 view .LVU112
1062:bsp/src/bsp_uart_fifo.c **** 		{
 380              		.loc 1 1062 15 is_stmt 0 view .LVU113
 381 004c 238A     		ldrh	r3, [r4, #16]
1062:bsp/src/bsp_uart_fifo.c **** 		{
 382              		.loc 1 1062 7 view .LVU114
 383 004e 0133     		adds	r3, r3, #1
 384 0050 9BB2     		uxth	r3, r3
1062:bsp/src/bsp_uart_fifo.c **** 		{
 385              		.loc 1 1062 6 view .LVU115
 386 0052 2382     		strh	r3, [r4, #16]	@ movhi
1062:bsp/src/bsp_uart_fifo.c **** 		{
 387              		.loc 1 1062 36 view .LVU116
 388 0054 A289     		ldrh	r2, [r4, #12]
1062:bsp/src/bsp_uart_fifo.c **** 		{
 389              		.loc 1 1062 6 view .LVU117
 390 0056 9342     		cmp	r3, r2
 391 0058 D9D3     		bcc	.L13
1064:bsp/src/bsp_uart_fifo.c **** 		}
 392              		.loc 1 1064 4 is_stmt 1 view .LVU118
1064:bsp/src/bsp_uart_fifo.c **** 		}
 393              		.loc 1 1064 22 is_stmt 0 view .LVU119
 394 005a 0023     		movs	r3, #0
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 27


 395 005c 2382     		strh	r3, [r4, #16]	@ movhi
 396 005e D6E7     		b	.L13
 397              	.L15:
1068:bsp/src/bsp_uart_fifo.c **** 	}
1069:bsp/src/bsp_uart_fifo.c **** 
1070:bsp/src/bsp_uart_fifo.c **** 	USART_ITConfig(_pUart->uart, USART_IT_TXE, ENABLE);
 398              		.loc 1 1070 2 is_stmt 1 view .LVU120
 399 0060 0122     		movs	r2, #1
 400 0062 40F22771 		movw	r1, #1831
 401 0066 2068     		ldr	r0, [r4]
 402 0068 FFF7FEFF 		bl	USART_ITConfig
 403              	.LVL20:
1071:bsp/src/bsp_uart_fifo.c **** }
 404              		.loc 1 1071 1 is_stmt 0 view .LVU121
 405 006c 03B0     		add	sp, sp, #12
 406              	.LCFI8:
 407              		.cfi_def_cfa_offset 20
 408              		@ sp needed
 409 006e F0BD     		pop	{r4, r5, r6, r7, pc}
 410              		.loc 1 1071 1 view .LVU122
 411              		.cfi_endproc
 412              	.LFE143:
 414              		.section	.text.UartGetChar,"ax",%progbits
 415              		.align	1
 416              		.syntax unified
 417              		.thumb
 418              		.thumb_func
 419              		.fpu fpv4-sp-d16
 421              	UartGetChar:
 422              	.LVL21:
 423              	.LFB144:
1072:bsp/src/bsp_uart_fifo.c **** 
1073:bsp/src/bsp_uart_fifo.c **** /*
1074:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
1075:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: UartGetChar
1076:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: ä»ä¸²å£æ¥æ”¶ç¼“å†²åŒºè¯»å–1å­—èŠ‚æ•°æ® ï¼ˆç”¨äºä¸»ç¨‹åºè°ƒç”¨ï¼‰
1077:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚: _pUart : ä¸²å£è®¾å¤‡
1078:bsp/src/bsp_uart_fifo.c **** *			  _pByte : å­˜æ”¾è¯»å–æ•°æ®çš„æŒ‡é’ˆ
1079:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: 0 è¡¨ç¤ºæ— æ•°æ®  1è¡¨ç¤ºè¯»å–åˆ°æ•°æ®
1080:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
1081:bsp/src/bsp_uart_fifo.c **** */
1082:bsp/src/bsp_uart_fifo.c **** static uint8_t UartGetChar(UartStr_TypeDef *_pUart, uint8_t *_pByte)
1083:bsp/src/bsp_uart_fifo.c **** {
 424              		.loc 1 1083 1 is_stmt 1 view -0
 425              		.cfi_startproc
 426              		@ args = 0, pretend = 0, frame = 0
 427              		@ frame_needed = 0, uses_anonymous_args = 0
 428              		.loc 1 1083 1 is_stmt 0 view .LVU124
 429 0000 70B5     		push	{r4, r5, r6, lr}
 430              	.LCFI9:
 431              		.cfi_def_cfa_offset 16
 432              		.cfi_offset 4, -16
 433              		.cfi_offset 5, -12
 434              		.cfi_offset 6, -8
 435              		.cfi_offset 14, -4
 436 0002 0446     		mov	r4, r0
 437 0004 0E46     		mov	r6, r1
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 28


1084:bsp/src/bsp_uart_fifo.c **** 	uint16_t usCount;
 438              		.loc 1 1084 2 is_stmt 1 view .LVU125
1085:bsp/src/bsp_uart_fifo.c **** 
1086:bsp/src/bsp_uart_fifo.c **** 	/* usRxWrite å˜é‡åœ¨ä¸­æ–­å‡½æ•°ä¸­è¢«æ”¹å†™ï¼Œä¸»ç¨‹åºè¯»å–è¯¥å˜é‡æ—¶ï¼Œå¿…é¡»è¿›è¡Œä¸´ç•Œå
1087:bsp/src/bsp_uart_fifo.c **** 	DISABLE_INT();
 439              		.loc 1 1087 2 view .LVU126
 440 0006 FFF7FEFF 		bl	vPortEnterCritical
 441              	.LVL22:
1088:bsp/src/bsp_uart_fifo.c **** 	usCount = _pUart->usRxCount;
 442              		.loc 1 1088 2 view .LVU127
 443              		.loc 1 1088 10 is_stmt 0 view .LVU128
 444 000a 658B     		ldrh	r5, [r4, #26]
 445 000c ADB2     		uxth	r5, r5
 446              	.LVL23:
1089:bsp/src/bsp_uart_fifo.c **** 	ENABLE_INT();
 447              		.loc 1 1089 2 is_stmt 1 view .LVU129
 448 000e FFF7FEFF 		bl	vPortExitCritical
 449              	.LVL24:
1090:bsp/src/bsp_uart_fifo.c **** 
1091:bsp/src/bsp_uart_fifo.c **** 	/* å¦‚æœè¯»å’Œå†™ç´¢å¼•ç›¸åŒï¼Œåˆ™è¿”å›0 */
1092:bsp/src/bsp_uart_fifo.c **** 	//if (_pUart->usRxRead == usRxWrite)
1093:bsp/src/bsp_uart_fifo.c **** 	if (usCount == 0)	/* å·²ç»æ²¡æœ‰æ•°æ® */
 450              		.loc 1 1093 2 view .LVU130
 451              		.loc 1 1093 5 is_stmt 0 view .LVU131
 452 0012 0DB9     		cbnz	r5, .L21
1094:bsp/src/bsp_uart_fifo.c **** 	{
1095:bsp/src/bsp_uart_fifo.c **** 		return 0;
 453              		.loc 1 1095 10 view .LVU132
 454 0014 0020     		movs	r0, #0
 455              	.L17:
1096:bsp/src/bsp_uart_fifo.c **** 	}
1097:bsp/src/bsp_uart_fifo.c **** 	else
1098:bsp/src/bsp_uart_fifo.c **** 	{
1099:bsp/src/bsp_uart_fifo.c **** 		*_pByte = _pUart->pRxBuf[_pUart->usRxRead];		/* ä»ä¸²å£æ¥æ”¶FIFOå–1ä¸ªæ•°æ® */
1100:bsp/src/bsp_uart_fifo.c **** 
1101:bsp/src/bsp_uart_fifo.c **** 		/* æ”¹å†™FIFOè¯»ç´¢å¼• */
1102:bsp/src/bsp_uart_fifo.c **** 		DISABLE_INT();
1103:bsp/src/bsp_uart_fifo.c **** 		if (++_pUart->usRxRead >= _pUart->usRxBufSize)
1104:bsp/src/bsp_uart_fifo.c **** 		{
1105:bsp/src/bsp_uart_fifo.c **** 			_pUart->usRxRead = 0;
1106:bsp/src/bsp_uart_fifo.c **** 		}
1107:bsp/src/bsp_uart_fifo.c **** 		_pUart->usRxCount--;
1108:bsp/src/bsp_uart_fifo.c **** 		ENABLE_INT();
1109:bsp/src/bsp_uart_fifo.c **** 		return 1;
1110:bsp/src/bsp_uart_fifo.c **** 	}
1111:bsp/src/bsp_uart_fifo.c **** }
 456              		.loc 1 1111 1 view .LVU133
 457 0016 70BD     		pop	{r4, r5, r6, pc}
 458              	.LVL25:
 459              	.L21:
1099:bsp/src/bsp_uart_fifo.c **** 
 460              		.loc 1 1099 3 is_stmt 1 view .LVU134
1099:bsp/src/bsp_uart_fifo.c **** 
 461              		.loc 1 1099 19 is_stmt 0 view .LVU135
 462 0018 A268     		ldr	r2, [r4, #8]
1099:bsp/src/bsp_uart_fifo.c **** 
 463              		.loc 1 1099 34 view .LVU136
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 29


 464 001a 238B     		ldrh	r3, [r4, #24]
 465 001c 9BB2     		uxth	r3, r3
1099:bsp/src/bsp_uart_fifo.c **** 
 466              		.loc 1 1099 27 view .LVU137
 467 001e D35C     		ldrb	r3, [r2, r3]	@ zero_extendqisi2
1099:bsp/src/bsp_uart_fifo.c **** 
 468              		.loc 1 1099 11 view .LVU138
 469 0020 3370     		strb	r3, [r6]
1102:bsp/src/bsp_uart_fifo.c **** 		if (++_pUart->usRxRead >= _pUart->usRxBufSize)
 470              		.loc 1 1102 3 is_stmt 1 view .LVU139
 471 0022 FFF7FEFF 		bl	vPortEnterCritical
 472              	.LVL26:
1103:bsp/src/bsp_uart_fifo.c **** 		{
 473              		.loc 1 1103 3 view .LVU140
1103:bsp/src/bsp_uart_fifo.c **** 		{
 474              		.loc 1 1103 15 is_stmt 0 view .LVU141
 475 0026 238B     		ldrh	r3, [r4, #24]
1103:bsp/src/bsp_uart_fifo.c **** 		{
 476              		.loc 1 1103 7 view .LVU142
 477 0028 0133     		adds	r3, r3, #1
 478 002a 9BB2     		uxth	r3, r3
1103:bsp/src/bsp_uart_fifo.c **** 		{
 479              		.loc 1 1103 6 view .LVU143
 480 002c 2383     		strh	r3, [r4, #24]	@ movhi
1103:bsp/src/bsp_uart_fifo.c **** 		{
 481              		.loc 1 1103 35 view .LVU144
 482 002e E289     		ldrh	r2, [r4, #14]
1103:bsp/src/bsp_uart_fifo.c **** 		{
 483              		.loc 1 1103 6 view .LVU145
 484 0030 9342     		cmp	r3, r2
 485 0032 01D3     		bcc	.L18
1105:bsp/src/bsp_uart_fifo.c **** 		}
 486              		.loc 1 1105 4 is_stmt 1 view .LVU146
1105:bsp/src/bsp_uart_fifo.c **** 		}
 487              		.loc 1 1105 21 is_stmt 0 view .LVU147
 488 0034 0023     		movs	r3, #0
 489 0036 2383     		strh	r3, [r4, #24]	@ movhi
 490              	.L18:
1107:bsp/src/bsp_uart_fifo.c **** 		ENABLE_INT();
 491              		.loc 1 1107 3 is_stmt 1 view .LVU148
1107:bsp/src/bsp_uart_fifo.c **** 		ENABLE_INT();
 492              		.loc 1 1107 9 is_stmt 0 view .LVU149
 493 0038 638B     		ldrh	r3, [r4, #26]
1107:bsp/src/bsp_uart_fifo.c **** 		ENABLE_INT();
 494              		.loc 1 1107 20 view .LVU150
 495 003a 013B     		subs	r3, r3, #1
 496 003c 9BB2     		uxth	r3, r3
 497 003e 6383     		strh	r3, [r4, #26]	@ movhi
1108:bsp/src/bsp_uart_fifo.c **** 		return 1;
 498              		.loc 1 1108 3 is_stmt 1 view .LVU151
 499 0040 FFF7FEFF 		bl	vPortExitCritical
 500              	.LVL27:
1109:bsp/src/bsp_uart_fifo.c **** 	}
 501              		.loc 1 1109 3 view .LVU152
1109:bsp/src/bsp_uart_fifo.c **** 	}
 502              		.loc 1 1109 10 is_stmt 0 view .LVU153
 503 0044 0120     		movs	r0, #1
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 30


 504 0046 E6E7     		b	.L17
 505              		.cfi_endproc
 506              	.LFE144:
 508              		.section	.text.UartIRQ,"ax",%progbits
 509              		.align	1
 510              		.syntax unified
 511              		.thumb
 512              		.thumb_func
 513              		.fpu fpv4-sp-d16
 515              	UartIRQ:
 516              	.LVL28:
 517              	.LFB145:
1112:bsp/src/bsp_uart_fifo.c **** 
1113:bsp/src/bsp_uart_fifo.c **** /*
1114:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
1115:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: UartIRQ
1116:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: ä¾›ä¸­æ–­æœåŠ¡ç¨‹åºè°ƒç”¨ï¼Œé€šç”¨ä¸²å£ä¸­æ–­å¤„ç†å‡½æ•°
1117:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚: _pUart : ä¸²å£è®¾å¤‡
1118:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: æ— 
1119:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
1120:bsp/src/bsp_uart_fifo.c **** */
1121:bsp/src/bsp_uart_fifo.c **** static void UartIRQ(UartStr_TypeDef *_pUart)
1122:bsp/src/bsp_uart_fifo.c **** {
 518              		.loc 1 1122 1 is_stmt 1 view -0
 519              		.cfi_startproc
 520              		@ args = 0, pretend = 0, frame = 0
 521              		@ frame_needed = 0, uses_anonymous_args = 0
 522              		.loc 1 1122 1 is_stmt 0 view .LVU155
 523 0000 10B5     		push	{r4, lr}
 524              	.LCFI10:
 525              		.cfi_def_cfa_offset 8
 526              		.cfi_offset 4, -8
 527              		.cfi_offset 14, -4
 528 0002 0446     		mov	r4, r0
1123:bsp/src/bsp_uart_fifo.c **** 	/* å¤„ç†æ¥æ”¶ä¸­æ–­  */
1124:bsp/src/bsp_uart_fifo.c **** 	if (USART_GetITStatus(_pUart->uart, USART_IT_RXNE) != RESET)
 529              		.loc 1 1124 2 is_stmt 1 view .LVU156
 530              		.loc 1 1124 6 is_stmt 0 view .LVU157
 531 0004 40F22551 		movw	r1, #1317
 532 0008 0068     		ldr	r0, [r0]
 533              	.LVL29:
 534              		.loc 1 1124 6 view .LVU158
 535 000a FFF7FEFF 		bl	USART_GetITStatus
 536              	.LVL30:
 537              		.loc 1 1124 5 view .LVU159
 538 000e B0B9     		cbnz	r0, .L33
 539              	.L23:
1125:bsp/src/bsp_uart_fifo.c **** 	{
1126:bsp/src/bsp_uart_fifo.c **** 		/* ä»ä¸²å£æ¥æ”¶æ•°æ®å¯„å­˜å™¨è¯»å–æ•°æ®å­˜æ”¾åˆ°æ¥æ”¶FIFO */
1127:bsp/src/bsp_uart_fifo.c **** 		uint8_t ch;
1128:bsp/src/bsp_uart_fifo.c **** 
1129:bsp/src/bsp_uart_fifo.c **** 		ch = USART_ReceiveData(_pUart->uart);
1130:bsp/src/bsp_uart_fifo.c **** 		_pUart->pRxBuf[_pUart->usRxWrite] = ch;
1131:bsp/src/bsp_uart_fifo.c **** 		if (++_pUart->usRxWrite >= _pUart->usRxBufSize)
1132:bsp/src/bsp_uart_fifo.c **** 		{
1133:bsp/src/bsp_uart_fifo.c **** 			_pUart->usRxWrite = 0;
1134:bsp/src/bsp_uart_fifo.c **** 		}
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 31


1135:bsp/src/bsp_uart_fifo.c **** 		if (_pUart->usRxCount < _pUart->usRxBufSize)
1136:bsp/src/bsp_uart_fifo.c **** 		{
1137:bsp/src/bsp_uart_fifo.c **** 			_pUart->usRxCount++;
1138:bsp/src/bsp_uart_fifo.c **** 		}
1139:bsp/src/bsp_uart_fifo.c **** 
1140:bsp/src/bsp_uart_fifo.c **** 		/* å›è°ƒå‡½æ•°,é€šçŸ¥åº”ç”¨ç¨‹åºæ”¶åˆ°æ–°æ•°æ®,ä¸€èˆ¬æ˜¯å‘é€1ä¸ªæ¶ˆæ¯æˆ–è€…è®¾ç½®ä¸€ä¸ªæ ‡è
1141:bsp/src/bsp_uart_fifo.c **** 		//if (_pUart->usRxWrite == _pUart->usRxRead)
1142:bsp/src/bsp_uart_fifo.c **** 		//if (_pUart->usRxCount == 1)
1143:bsp/src/bsp_uart_fifo.c **** 		{
1144:bsp/src/bsp_uart_fifo.c **** 			if (_pUart->ReciveNew)
1145:bsp/src/bsp_uart_fifo.c **** 			{
1146:bsp/src/bsp_uart_fifo.c **** 				_pUart->ReciveNew(ch);
1147:bsp/src/bsp_uart_fifo.c **** 			}
1148:bsp/src/bsp_uart_fifo.c **** 		}
1149:bsp/src/bsp_uart_fifo.c **** 	}
1150:bsp/src/bsp_uart_fifo.c **** 
1151:bsp/src/bsp_uart_fifo.c **** 	/* å¤„ç†å‘é€ç¼“å†²åŒºç©ºä¸­æ–­ */
1152:bsp/src/bsp_uart_fifo.c **** 	if (USART_GetITStatus(_pUart->uart, USART_IT_TXE) != RESET)
 540              		.loc 1 1152 2 is_stmt 1 view .LVU160
 541              		.loc 1 1152 6 is_stmt 0 view .LVU161
 542 0010 40F22771 		movw	r1, #1831
 543 0014 2068     		ldr	r0, [r4]
 544 0016 FFF7FEFF 		bl	USART_GetITStatus
 545              	.LVL31:
 546              		.loc 1 1152 5 view .LVU162
 547 001a 0028     		cmp	r0, #0
 548 001c 42D0     		beq	.L26
1153:bsp/src/bsp_uart_fifo.c **** 	{
1154:bsp/src/bsp_uart_fifo.c **** 		//if (_pUart->usTxRead == _pUart->usTxWrite)
1155:bsp/src/bsp_uart_fifo.c **** 		if (_pUart->usTxCount == 0)
 549              		.loc 1 1155 3 is_stmt 1 view .LVU163
 550              		.loc 1 1155 13 is_stmt 0 view .LVU164
 551 001e A38A     		ldrh	r3, [r4, #20]
 552 0020 9BB2     		uxth	r3, r3
 553              		.loc 1 1155 6 view .LVU165
 554 0022 53BB     		cbnz	r3, .L27
1156:bsp/src/bsp_uart_fifo.c **** 		{
1157:bsp/src/bsp_uart_fifo.c **** 			/* å‘é€ç¼“å†²åŒºçš„æ•°æ®å·²å–å®Œæ—¶ï¼Œ ç¦æ­¢å‘é€ç¼“å†²åŒºç©ºä¸­æ–­ ï¼ˆæ³¨æ„ï¼šæ­¤æ—¶æœ€å
1158:bsp/src/bsp_uart_fifo.c **** 			USART_ITConfig(_pUart->uart, USART_IT_TXE, DISABLE);
 555              		.loc 1 1158 4 is_stmt 1 view .LVU166
 556 0024 0022     		movs	r2, #0
 557 0026 40F22771 		movw	r1, #1831
 558 002a 2068     		ldr	r0, [r4]
 559 002c FFF7FEFF 		bl	USART_ITConfig
 560              	.LVL32:
1159:bsp/src/bsp_uart_fifo.c **** 
1160:bsp/src/bsp_uart_fifo.c **** 			/* ä½¿èƒ½æ•°æ®å‘é€å®Œæ¯•ä¸­æ–­ */
1161:bsp/src/bsp_uart_fifo.c **** 			USART_ITConfig(_pUart->uart, USART_IT_TC, ENABLE);
 561              		.loc 1 1161 4 view .LVU167
 562 0030 0122     		movs	r2, #1
 563 0032 40F22661 		movw	r1, #1574
 564 0036 2068     		ldr	r0, [r4]
 565 0038 FFF7FEFF 		bl	USART_ITConfig
 566              	.LVL33:
 567              	.L22:
1162:bsp/src/bsp_uart_fifo.c **** 		}
1163:bsp/src/bsp_uart_fifo.c **** 		else
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 32


1164:bsp/src/bsp_uart_fifo.c **** 		{
1165:bsp/src/bsp_uart_fifo.c **** 			/* ä»å‘é€FIFOå–1ä¸ªå­—èŠ‚å†™å…¥ä¸²å£å‘é€æ•°æ®å¯„å­˜å™¨ */
1166:bsp/src/bsp_uart_fifo.c **** 			USART_SendData(_pUart->uart, _pUart->pTxBuf[_pUart->usTxRead]);
1167:bsp/src/bsp_uart_fifo.c **** 			if (++_pUart->usTxRead >= _pUart->usTxBufSize)
1168:bsp/src/bsp_uart_fifo.c **** 			{
1169:bsp/src/bsp_uart_fifo.c **** 				_pUart->usTxRead = 0;
1170:bsp/src/bsp_uart_fifo.c **** 			}
1171:bsp/src/bsp_uart_fifo.c **** 			_pUart->usTxCount--;
1172:bsp/src/bsp_uart_fifo.c **** 		}
1173:bsp/src/bsp_uart_fifo.c **** 
1174:bsp/src/bsp_uart_fifo.c **** 	}
1175:bsp/src/bsp_uart_fifo.c **** 	/* æ•°æ®bitä½å…¨éƒ¨å‘é€å®Œæ¯•çš„ä¸­æ–­ */
1176:bsp/src/bsp_uart_fifo.c **** 	else if (USART_GetITStatus(_pUart->uart, USART_IT_TC) != RESET)
1177:bsp/src/bsp_uart_fifo.c **** 	{
1178:bsp/src/bsp_uart_fifo.c **** 		//if (_pUart->usTxRead == _pUart->usTxWrite)
1179:bsp/src/bsp_uart_fifo.c **** 		if (_pUart->usTxCount == 0)
1180:bsp/src/bsp_uart_fifo.c **** 		{
1181:bsp/src/bsp_uart_fifo.c **** 			/* å¦‚æœå‘é€FIFOçš„æ•°æ®å…¨éƒ¨å‘é€å®Œæ¯•ï¼Œç¦æ­¢æ•°æ®å‘é€å®Œæ¯•ä¸­æ–­ */
1182:bsp/src/bsp_uart_fifo.c **** 			USART_ITConfig(_pUart->uart, USART_IT_TC, DISABLE);
1183:bsp/src/bsp_uart_fifo.c **** 
1184:bsp/src/bsp_uart_fifo.c **** 			/* å›è°ƒå‡½æ•°, ä¸€èˆ¬ç”¨æ¥å¤„ç†RS485é€šä¿¡ï¼Œå°†RS485èŠ¯ç‰‡è®¾ç½®ä¸ºæ¥æ”¶æ¨¡å¼ï¼Œé¿å…æŠ¢
1185:bsp/src/bsp_uart_fifo.c **** 			if (_pUart->SendOver)
1186:bsp/src/bsp_uart_fifo.c **** 			{
1187:bsp/src/bsp_uart_fifo.c **** 				_pUart->SendOver();
1188:bsp/src/bsp_uart_fifo.c **** 			}
1189:bsp/src/bsp_uart_fifo.c **** 		}
1190:bsp/src/bsp_uart_fifo.c **** 		else
1191:bsp/src/bsp_uart_fifo.c **** 		{
1192:bsp/src/bsp_uart_fifo.c **** 			/* æ­£å¸¸æƒ…å†µä¸‹ï¼Œä¸ä¼šè¿›å…¥æ­¤åˆ†æ”¯ */
1193:bsp/src/bsp_uart_fifo.c **** 
1194:bsp/src/bsp_uart_fifo.c **** 			/* å¦‚æœå‘é€FIFOçš„æ•°æ®è¿˜æœªå®Œæ¯•ï¼Œåˆ™ä»å‘é€FIFOå–1ä¸ªæ•°æ®å†™å…¥å‘é€æ•°æ®å¯„å­˜
1195:bsp/src/bsp_uart_fifo.c **** 			USART_SendData(_pUart->uart, _pUart->pTxBuf[_pUart->usTxRead]);
1196:bsp/src/bsp_uart_fifo.c **** 			if (++_pUart->usTxRead >= _pUart->usTxBufSize)
1197:bsp/src/bsp_uart_fifo.c **** 			{
1198:bsp/src/bsp_uart_fifo.c **** 				_pUart->usTxRead = 0;
1199:bsp/src/bsp_uart_fifo.c **** 			}
1200:bsp/src/bsp_uart_fifo.c **** 			_pUart->usTxCount--;
1201:bsp/src/bsp_uart_fifo.c **** 		}
1202:bsp/src/bsp_uart_fifo.c **** 	}
1203:bsp/src/bsp_uart_fifo.c **** }
 568              		.loc 1 1203 1 is_stmt 0 view .LVU168
 569 003c 10BD     		pop	{r4, pc}
 570              	.LVL34:
 571              	.L33:
 572              	.LBB3:
1127:bsp/src/bsp_uart_fifo.c **** 
 573              		.loc 1 1127 3 is_stmt 1 view .LVU169
1129:bsp/src/bsp_uart_fifo.c **** 		_pUart->pRxBuf[_pUart->usRxWrite] = ch;
 574              		.loc 1 1129 3 view .LVU170
1129:bsp/src/bsp_uart_fifo.c **** 		_pUart->pRxBuf[_pUart->usRxWrite] = ch;
 575              		.loc 1 1129 8 is_stmt 0 view .LVU171
 576 003e 2068     		ldr	r0, [r4]
 577 0040 FFF7FEFF 		bl	USART_ReceiveData
 578              	.LVL35:
1129:bsp/src/bsp_uart_fifo.c **** 		_pUart->pRxBuf[_pUart->usRxWrite] = ch;
 579              		.loc 1 1129 6 view .LVU172
 580 0044 C0B2     		uxtb	r0, r0
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 33


 581              	.LVL36:
1130:bsp/src/bsp_uart_fifo.c **** 		if (++_pUart->usRxWrite >= _pUart->usRxBufSize)
 582              		.loc 1 1130 3 is_stmt 1 view .LVU173
1130:bsp/src/bsp_uart_fifo.c **** 		if (++_pUart->usRxWrite >= _pUart->usRxBufSize)
 583              		.loc 1 1130 9 is_stmt 0 view .LVU174
 584 0046 A268     		ldr	r2, [r4, #8]
1130:bsp/src/bsp_uart_fifo.c **** 		if (++_pUart->usRxWrite >= _pUart->usRxBufSize)
 585              		.loc 1 1130 24 view .LVU175
 586 0048 E38A     		ldrh	r3, [r4, #22]
 587 004a 9BB2     		uxth	r3, r3
1130:bsp/src/bsp_uart_fifo.c **** 		if (++_pUart->usRxWrite >= _pUart->usRxBufSize)
 588              		.loc 1 1130 37 view .LVU176
 589 004c D054     		strb	r0, [r2, r3]
1131:bsp/src/bsp_uart_fifo.c **** 		{
 590              		.loc 1 1131 3 is_stmt 1 view .LVU177
1131:bsp/src/bsp_uart_fifo.c **** 		{
 591              		.loc 1 1131 15 is_stmt 0 view .LVU178
 592 004e E38A     		ldrh	r3, [r4, #22]
1131:bsp/src/bsp_uart_fifo.c **** 		{
 593              		.loc 1 1131 7 view .LVU179
 594 0050 0133     		adds	r3, r3, #1
 595 0052 9BB2     		uxth	r3, r3
1131:bsp/src/bsp_uart_fifo.c **** 		{
 596              		.loc 1 1131 6 view .LVU180
 597 0054 E382     		strh	r3, [r4, #22]	@ movhi
1131:bsp/src/bsp_uart_fifo.c **** 		{
 598              		.loc 1 1131 36 view .LVU181
 599 0056 E289     		ldrh	r2, [r4, #14]
1131:bsp/src/bsp_uart_fifo.c **** 		{
 600              		.loc 1 1131 6 view .LVU182
 601 0058 9342     		cmp	r3, r2
 602 005a 01D3     		bcc	.L24
1133:bsp/src/bsp_uart_fifo.c **** 		}
 603              		.loc 1 1133 4 is_stmt 1 view .LVU183
1133:bsp/src/bsp_uart_fifo.c **** 		}
 604              		.loc 1 1133 22 is_stmt 0 view .LVU184
 605 005c 0023     		movs	r3, #0
 606 005e E382     		strh	r3, [r4, #22]	@ movhi
 607              	.L24:
1135:bsp/src/bsp_uart_fifo.c **** 		{
 608              		.loc 1 1135 3 is_stmt 1 view .LVU185
1135:bsp/src/bsp_uart_fifo.c **** 		{
 609              		.loc 1 1135 13 is_stmt 0 view .LVU186
 610 0060 638B     		ldrh	r3, [r4, #26]
 611 0062 9BB2     		uxth	r3, r3
1135:bsp/src/bsp_uart_fifo.c **** 		{
 612              		.loc 1 1135 6 view .LVU187
 613 0064 9A42     		cmp	r2, r3
 614 0066 03D9     		bls	.L25
1137:bsp/src/bsp_uart_fifo.c **** 		}
 615              		.loc 1 1137 4 is_stmt 1 view .LVU188
1137:bsp/src/bsp_uart_fifo.c **** 		}
 616              		.loc 1 1137 10 is_stmt 0 view .LVU189
 617 0068 638B     		ldrh	r3, [r4, #26]
1137:bsp/src/bsp_uart_fifo.c **** 		}
 618              		.loc 1 1137 21 view .LVU190
 619 006a 0133     		adds	r3, r3, #1
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 34


 620 006c 9BB2     		uxth	r3, r3
 621 006e 6383     		strh	r3, [r4, #26]	@ movhi
 622              	.L25:
1144:bsp/src/bsp_uart_fifo.c **** 			{
 623              		.loc 1 1144 4 is_stmt 1 view .LVU191
1144:bsp/src/bsp_uart_fifo.c **** 			{
 624              		.loc 1 1144 14 is_stmt 0 view .LVU192
 625 0070 636A     		ldr	r3, [r4, #36]
1144:bsp/src/bsp_uart_fifo.c **** 			{
 626              		.loc 1 1144 7 view .LVU193
 627 0072 002B     		cmp	r3, #0
 628 0074 CCD0     		beq	.L23
1146:bsp/src/bsp_uart_fifo.c **** 			}
 629              		.loc 1 1146 5 is_stmt 1 view .LVU194
 630 0076 9847     		blx	r3
 631              	.LVL37:
1146:bsp/src/bsp_uart_fifo.c **** 			}
 632              		.loc 1 1146 5 is_stmt 0 view .LVU195
 633 0078 CAE7     		b	.L23
 634              	.L27:
1146:bsp/src/bsp_uart_fifo.c **** 			}
 635              		.loc 1 1146 5 view .LVU196
 636              	.LBE3:
1166:bsp/src/bsp_uart_fifo.c **** 			if (++_pUart->usTxRead >= _pUart->usTxBufSize)
 637              		.loc 1 1166 4 is_stmt 1 view .LVU197
1166:bsp/src/bsp_uart_fifo.c **** 			if (++_pUart->usTxRead >= _pUart->usTxBufSize)
 638              		.loc 1 1166 39 is_stmt 0 view .LVU198
 639 007a 6268     		ldr	r2, [r4, #4]
1166:bsp/src/bsp_uart_fifo.c **** 			if (++_pUart->usTxRead >= _pUart->usTxBufSize)
 640              		.loc 1 1166 54 view .LVU199
 641 007c 638A     		ldrh	r3, [r4, #18]
 642 007e 9BB2     		uxth	r3, r3
1166:bsp/src/bsp_uart_fifo.c **** 			if (++_pUart->usTxRead >= _pUart->usTxBufSize)
 643              		.loc 1 1166 4 view .LVU200
 644 0080 D15C     		ldrb	r1, [r2, r3]	@ zero_extendqisi2
 645 0082 2068     		ldr	r0, [r4]
 646 0084 FFF7FEFF 		bl	USART_SendData
 647              	.LVL38:
1167:bsp/src/bsp_uart_fifo.c **** 			{
 648              		.loc 1 1167 4 is_stmt 1 view .LVU201
1167:bsp/src/bsp_uart_fifo.c **** 			{
 649              		.loc 1 1167 16 is_stmt 0 view .LVU202
 650 0088 638A     		ldrh	r3, [r4, #18]
1167:bsp/src/bsp_uart_fifo.c **** 			{
 651              		.loc 1 1167 8 view .LVU203
 652 008a 0133     		adds	r3, r3, #1
 653 008c 9BB2     		uxth	r3, r3
1167:bsp/src/bsp_uart_fifo.c **** 			{
 654              		.loc 1 1167 7 view .LVU204
 655 008e 6382     		strh	r3, [r4, #18]	@ movhi
1167:bsp/src/bsp_uart_fifo.c **** 			{
 656              		.loc 1 1167 36 view .LVU205
 657 0090 A289     		ldrh	r2, [r4, #12]
1167:bsp/src/bsp_uart_fifo.c **** 			{
 658              		.loc 1 1167 7 view .LVU206
 659 0092 9342     		cmp	r3, r2
 660 0094 01D3     		bcc	.L29
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 35


1169:bsp/src/bsp_uart_fifo.c **** 			}
 661              		.loc 1 1169 5 is_stmt 1 view .LVU207
1169:bsp/src/bsp_uart_fifo.c **** 			}
 662              		.loc 1 1169 22 is_stmt 0 view .LVU208
 663 0096 0023     		movs	r3, #0
 664 0098 6382     		strh	r3, [r4, #18]	@ movhi
 665              	.L29:
1171:bsp/src/bsp_uart_fifo.c **** 		}
 666              		.loc 1 1171 4 is_stmt 1 view .LVU209
1171:bsp/src/bsp_uart_fifo.c **** 		}
 667              		.loc 1 1171 10 is_stmt 0 view .LVU210
 668 009a A38A     		ldrh	r3, [r4, #20]
1171:bsp/src/bsp_uart_fifo.c **** 		}
 669              		.loc 1 1171 21 view .LVU211
 670 009c 013B     		subs	r3, r3, #1
 671 009e 9BB2     		uxth	r3, r3
 672 00a0 A382     		strh	r3, [r4, #20]	@ movhi
 673 00a2 CBE7     		b	.L22
 674              	.L26:
1176:bsp/src/bsp_uart_fifo.c **** 	{
 675              		.loc 1 1176 7 is_stmt 1 view .LVU212
1176:bsp/src/bsp_uart_fifo.c **** 	{
 676              		.loc 1 1176 11 is_stmt 0 view .LVU213
 677 00a4 40F22661 		movw	r1, #1574
 678 00a8 2068     		ldr	r0, [r4]
 679 00aa FFF7FEFF 		bl	USART_GetITStatus
 680              	.LVL39:
1176:bsp/src/bsp_uart_fifo.c **** 	{
 681              		.loc 1 1176 10 view .LVU214
 682 00ae 0028     		cmp	r0, #0
 683 00b0 C4D0     		beq	.L22
1179:bsp/src/bsp_uart_fifo.c **** 		{
 684              		.loc 1 1179 3 is_stmt 1 view .LVU215
1179:bsp/src/bsp_uart_fifo.c **** 		{
 685              		.loc 1 1179 13 is_stmt 0 view .LVU216
 686 00b2 A38A     		ldrh	r3, [r4, #20]
 687 00b4 9BB2     		uxth	r3, r3
1179:bsp/src/bsp_uart_fifo.c **** 		{
 688              		.loc 1 1179 6 view .LVU217
 689 00b6 53B9     		cbnz	r3, .L30
1182:bsp/src/bsp_uart_fifo.c **** 
 690              		.loc 1 1182 4 is_stmt 1 view .LVU218
 691 00b8 0022     		movs	r2, #0
 692 00ba 40F22661 		movw	r1, #1574
 693 00be 2068     		ldr	r0, [r4]
 694 00c0 FFF7FEFF 		bl	USART_ITConfig
 695              	.LVL40:
1185:bsp/src/bsp_uart_fifo.c **** 			{
 696              		.loc 1 1185 4 view .LVU219
1185:bsp/src/bsp_uart_fifo.c **** 			{
 697              		.loc 1 1185 14 is_stmt 0 view .LVU220
 698 00c4 236A     		ldr	r3, [r4, #32]
1185:bsp/src/bsp_uart_fifo.c **** 			{
 699              		.loc 1 1185 7 view .LVU221
 700 00c6 002B     		cmp	r3, #0
 701 00c8 B8D0     		beq	.L22
1187:bsp/src/bsp_uart_fifo.c **** 			}
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 36


 702              		.loc 1 1187 5 is_stmt 1 view .LVU222
 703 00ca 9847     		blx	r3
 704              	.LVL41:
 705 00cc B6E7     		b	.L22
 706              	.L30:
1195:bsp/src/bsp_uart_fifo.c **** 			if (++_pUart->usTxRead >= _pUart->usTxBufSize)
 707              		.loc 1 1195 4 view .LVU223
1195:bsp/src/bsp_uart_fifo.c **** 			if (++_pUart->usTxRead >= _pUart->usTxBufSize)
 708              		.loc 1 1195 39 is_stmt 0 view .LVU224
 709 00ce 6268     		ldr	r2, [r4, #4]
1195:bsp/src/bsp_uart_fifo.c **** 			if (++_pUart->usTxRead >= _pUart->usTxBufSize)
 710              		.loc 1 1195 54 view .LVU225
 711 00d0 638A     		ldrh	r3, [r4, #18]
 712 00d2 9BB2     		uxth	r3, r3
1195:bsp/src/bsp_uart_fifo.c **** 			if (++_pUart->usTxRead >= _pUart->usTxBufSize)
 713              		.loc 1 1195 4 view .LVU226
 714 00d4 D15C     		ldrb	r1, [r2, r3]	@ zero_extendqisi2
 715 00d6 2068     		ldr	r0, [r4]
 716 00d8 FFF7FEFF 		bl	USART_SendData
 717              	.LVL42:
1196:bsp/src/bsp_uart_fifo.c **** 			{
 718              		.loc 1 1196 4 is_stmt 1 view .LVU227
1196:bsp/src/bsp_uart_fifo.c **** 			{
 719              		.loc 1 1196 16 is_stmt 0 view .LVU228
 720 00dc 638A     		ldrh	r3, [r4, #18]
1196:bsp/src/bsp_uart_fifo.c **** 			{
 721              		.loc 1 1196 8 view .LVU229
 722 00de 0133     		adds	r3, r3, #1
 723 00e0 9BB2     		uxth	r3, r3
1196:bsp/src/bsp_uart_fifo.c **** 			{
 724              		.loc 1 1196 7 view .LVU230
 725 00e2 6382     		strh	r3, [r4, #18]	@ movhi
1196:bsp/src/bsp_uart_fifo.c **** 			{
 726              		.loc 1 1196 36 view .LVU231
 727 00e4 A289     		ldrh	r2, [r4, #12]
1196:bsp/src/bsp_uart_fifo.c **** 			{
 728              		.loc 1 1196 7 view .LVU232
 729 00e6 9342     		cmp	r3, r2
 730 00e8 01D3     		bcc	.L31
1198:bsp/src/bsp_uart_fifo.c **** 			}
 731              		.loc 1 1198 5 is_stmt 1 view .LVU233
1198:bsp/src/bsp_uart_fifo.c **** 			}
 732              		.loc 1 1198 22 is_stmt 0 view .LVU234
 733 00ea 0023     		movs	r3, #0
 734 00ec 6382     		strh	r3, [r4, #18]	@ movhi
 735              	.L31:
1200:bsp/src/bsp_uart_fifo.c **** 		}
 736              		.loc 1 1200 4 is_stmt 1 view .LVU235
1200:bsp/src/bsp_uart_fifo.c **** 		}
 737              		.loc 1 1200 10 is_stmt 0 view .LVU236
 738 00ee A38A     		ldrh	r3, [r4, #20]
1200:bsp/src/bsp_uart_fifo.c **** 		}
 739              		.loc 1 1200 21 view .LVU237
 740 00f0 013B     		subs	r3, r3, #1
 741 00f2 9BB2     		uxth	r3, r3
 742 00f4 A382     		strh	r3, [r4, #20]	@ movhi
 743              		.loc 1 1203 1 view .LVU238
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 37


 744 00f6 A1E7     		b	.L22
 745              		.cfi_endproc
 746              	.LFE145:
 748              		.section	.text.bsp_InitUart,"ax",%progbits
 749              		.align	1
 750              		.global	bsp_InitUart
 751              		.syntax unified
 752              		.thumb
 753              		.thumb_func
 754              		.fpu fpv4-sp-d16
 756              	bsp_InitUart:
 757              	.LFB130:
  75:bsp/src/bsp_uart_fifo.c **** 	UartVarInit();		
 758              		.loc 1 75 1 is_stmt 1 view -0
 759              		.cfi_startproc
 760              		@ args = 0, pretend = 0, frame = 0
 761              		@ frame_needed = 0, uses_anonymous_args = 0
 762 0000 08B5     		push	{r3, lr}
 763              	.LCFI11:
 764              		.cfi_def_cfa_offset 8
 765              		.cfi_offset 3, -8
 766              		.cfi_offset 14, -4
  76:bsp/src/bsp_uart_fifo.c **** 
 767              		.loc 1 76 2 view .LVU240
 768 0002 FFF7FEFF 		bl	UartVarInit
 769              	.LVL43:
  78:bsp/src/bsp_uart_fifo.c **** 
 770              		.loc 1 78 2 view .LVU241
 771 0006 FFF7FEFF 		bl	InitHardUart
 772              	.LVL44:
  80:bsp/src/bsp_uart_fifo.c **** }
 773              		.loc 1 80 2 view .LVU242
 774 000a FFF7FEFF 		bl	ConfigUartNVIC
 775              	.LVL45:
  81:bsp/src/bsp_uart_fifo.c **** 
 776              		.loc 1 81 1 is_stmt 0 view .LVU243
 777 000e 08BD     		pop	{r3, pc}
 778              		.cfi_endproc
 779              	.LFE130:
 781              		.section	.text.ComToUart,"ax",%progbits
 782              		.align	1
 783              		.global	ComToUart
 784              		.syntax unified
 785              		.thumb
 786              		.thumb_func
 787              		.fpu fpv4-sp-d16
 789              	ComToUart:
 790              	.LVL46:
 791              	.LFB131:
  92:bsp/src/bsp_uart_fifo.c **** 	if (_ucPort == COM1)
 792              		.loc 1 92 1 is_stmt 1 view -0
 793              		.cfi_startproc
 794              		@ args = 0, pretend = 0, frame = 0
 795              		@ frame_needed = 0, uses_anonymous_args = 0
 796              		@ link register save eliminated.
  93:bsp/src/bsp_uart_fifo.c **** 	{
 797              		.loc 1 93 2 view .LVU245
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 38


  93:bsp/src/bsp_uart_fifo.c **** 	{
 798              		.loc 1 93 5 is_stmt 0 view .LVU246
 799 0000 28B1     		cbz	r0, .L38
 101:bsp/src/bsp_uart_fifo.c **** 	{
 800              		.loc 1 101 7 is_stmt 1 view .LVU247
 101:bsp/src/bsp_uart_fifo.c **** 	{
 801              		.loc 1 101 10 is_stmt 0 view .LVU248
 802 0002 0128     		cmp	r0, #1
 803 0004 01D0     		beq	.L40
 114:bsp/src/bsp_uart_fifo.c **** 		#endif
 804              		.loc 1 114 11 view .LVU249
 805 0006 0020     		movs	r0, #0
 806              	.LVL47:
 146:bsp/src/bsp_uart_fifo.c **** 
 807              		.loc 1 146 1 view .LVU250
 808 0008 7047     		bx	lr
 809              	.LVL48:
 810              	.L40:
 104:bsp/src/bsp_uart_fifo.c **** 		#else
 811              		.loc 1 104 11 view .LVU251
 812 000a 0248     		ldr	r0, .L41
 813              	.LVL49:
 104:bsp/src/bsp_uart_fifo.c **** 		#else
 814              		.loc 1 104 11 view .LVU252
 815 000c 7047     		bx	lr
 816              	.LVL50:
 817              	.L38:
  98:bsp/src/bsp_uart_fifo.c **** 		#endif
 818              		.loc 1 98 11 view .LVU253
 819 000e 0020     		movs	r0, #0
 820              	.LVL51:
  98:bsp/src/bsp_uart_fifo.c **** 		#endif
 821              		.loc 1 98 11 view .LVU254
 822 0010 7047     		bx	lr
 823              	.L42:
 824 0012 00BF     		.align	2
 825              	.L41:
 826 0014 00000000 		.word	.LANCHOR0
 827              		.cfi_endproc
 828              	.LFE131:
 830              		.section	.text.ComToUSARTx,"ax",%progbits
 831              		.align	1
 832              		.global	ComToUSARTx
 833              		.syntax unified
 834              		.thumb
 835              		.thumb_func
 836              		.fpu fpv4-sp-d16
 838              	ComToUSARTx:
 839              	.LVL52:
 840              	.LFB132:
 158:bsp/src/bsp_uart_fifo.c **** 	if (_ucPort == COM1)
 841              		.loc 1 158 1 is_stmt 1 view -0
 842              		.cfi_startproc
 843              		@ args = 0, pretend = 0, frame = 0
 844              		@ frame_needed = 0, uses_anonymous_args = 0
 845              		@ link register save eliminated.
 159:bsp/src/bsp_uart_fifo.c **** 	{
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 39


 846              		.loc 1 159 2 view .LVU256
 159:bsp/src/bsp_uart_fifo.c **** 	{
 847              		.loc 1 159 5 is_stmt 0 view .LVU257
 848 0000 28B1     		cbz	r0, .L45
 167:bsp/src/bsp_uart_fifo.c **** 	{
 849              		.loc 1 167 7 is_stmt 1 view .LVU258
 167:bsp/src/bsp_uart_fifo.c **** 	{
 850              		.loc 1 167 10 is_stmt 0 view .LVU259
 851 0002 0128     		cmp	r0, #1
 852 0004 01D0     		beq	.L47
 180:bsp/src/bsp_uart_fifo.c **** 		#endif
 853              		.loc 1 180 11 view .LVU260
 854 0006 0020     		movs	r0, #0
 855              	.LVL53:
 204:bsp/src/bsp_uart_fifo.c **** 
 856              		.loc 1 204 1 view .LVU261
 857 0008 7047     		bx	lr
 858              	.LVL54:
 859              	.L47:
 170:bsp/src/bsp_uart_fifo.c **** 		#else
 860              		.loc 1 170 11 view .LVU262
 861 000a 0248     		ldr	r0, .L48
 862              	.LVL55:
 170:bsp/src/bsp_uart_fifo.c **** 		#else
 863              		.loc 1 170 11 view .LVU263
 864 000c 7047     		bx	lr
 865              	.LVL56:
 866              	.L45:
 164:bsp/src/bsp_uart_fifo.c **** 		#endif
 867              		.loc 1 164 11 view .LVU264
 868 000e 0020     		movs	r0, #0
 869              	.LVL57:
 164:bsp/src/bsp_uart_fifo.c **** 		#endif
 870              		.loc 1 164 11 view .LVU265
 871 0010 7047     		bx	lr
 872              	.L49:
 873 0012 00BF     		.align	2
 874              	.L48:
 875 0014 00440040 		.word	1073759232
 876              		.cfi_endproc
 877              	.LFE132:
 879              		.section	.text.comSendBuf,"ax",%progbits
 880              		.align	1
 881              		.global	comSendBuf
 882              		.syntax unified
 883              		.thumb
 884              		.thumb_func
 885              		.fpu fpv4-sp-d16
 887              	comSendBuf:
 888              	.LVL58:
 889              	.LFB133:
 217:bsp/src/bsp_uart_fifo.c **** 	UartStr_TypeDef *pUart;
 890              		.loc 1 217 1 is_stmt 1 view -0
 891              		.cfi_startproc
 892              		@ args = 0, pretend = 0, frame = 0
 893              		@ frame_needed = 0, uses_anonymous_args = 0
 217:bsp/src/bsp_uart_fifo.c **** 	UartStr_TypeDef *pUart;
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 40


 894              		.loc 1 217 1 is_stmt 0 view .LVU267
 895 0000 70B5     		push	{r4, r5, r6, lr}
 896              	.LCFI12:
 897              		.cfi_def_cfa_offset 16
 898              		.cfi_offset 4, -16
 899              		.cfi_offset 5, -12
 900              		.cfi_offset 6, -8
 901              		.cfi_offset 14, -4
 902 0002 0D46     		mov	r5, r1
 903 0004 1646     		mov	r6, r2
 218:bsp/src/bsp_uart_fifo.c **** 
 904              		.loc 1 218 2 is_stmt 1 view .LVU268
 220:bsp/src/bsp_uart_fifo.c **** 	if (pUart == 0)
 905              		.loc 1 220 2 view .LVU269
 220:bsp/src/bsp_uart_fifo.c **** 	if (pUart == 0)
 906              		.loc 1 220 10 is_stmt 0 view .LVU270
 907 0006 FFF7FEFF 		bl	ComToUart
 908              	.LVL59:
 221:bsp/src/bsp_uart_fifo.c **** 	{
 909              		.loc 1 221 2 is_stmt 1 view .LVU271
 221:bsp/src/bsp_uart_fifo.c **** 	{
 910              		.loc 1 221 5 is_stmt 0 view .LVU272
 911 000a 40B1     		cbz	r0, .L50
 912 000c 0446     		mov	r4, r0
 226:bsp/src/bsp_uart_fifo.c **** 	{
 913              		.loc 1 226 2 is_stmt 1 view .LVU273
 226:bsp/src/bsp_uart_fifo.c **** 	{
 914              		.loc 1 226 11 is_stmt 0 view .LVU274
 915 000e C369     		ldr	r3, [r0, #28]
 226:bsp/src/bsp_uart_fifo.c **** 	{
 916              		.loc 1 226 5 view .LVU275
 917 0010 03B1     		cbz	r3, .L52
 228:bsp/src/bsp_uart_fifo.c **** 	}
 918              		.loc 1 228 3 is_stmt 1 view .LVU276
 919 0012 9847     		blx	r3
 920              	.LVL60:
 921              	.L52:
 231:bsp/src/bsp_uart_fifo.c **** }
 922              		.loc 1 231 2 view .LVU277
 923 0014 3246     		mov	r2, r6
 924 0016 2946     		mov	r1, r5
 925 0018 2046     		mov	r0, r4
 926 001a FFF7FEFF 		bl	UartSend
 927              	.LVL61:
 928              	.L50:
 232:bsp/src/bsp_uart_fifo.c **** 
 929              		.loc 1 232 1 is_stmt 0 view .LVU278
 930 001e 70BD     		pop	{r4, r5, r6, pc}
 232:bsp/src/bsp_uart_fifo.c **** 
 931              		.loc 1 232 1 view .LVU279
 932              		.cfi_endproc
 933              	.LFE133:
 935              		.section	.text.comSendChar,"ax",%progbits
 936              		.align	1
 937              		.global	comSendChar
 938              		.syntax unified
 939              		.thumb
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 41


 940              		.thumb_func
 941              		.fpu fpv4-sp-d16
 943              	comSendChar:
 944              	.LVL62:
 945              	.LFB134:
 244:bsp/src/bsp_uart_fifo.c **** 	comSendBuf(_ucPort, &_ucByte, 1);
 946              		.loc 1 244 1 is_stmt 1 view -0
 947              		.cfi_startproc
 948              		@ args = 0, pretend = 0, frame = 8
 949              		@ frame_needed = 0, uses_anonymous_args = 0
 244:bsp/src/bsp_uart_fifo.c **** 	comSendBuf(_ucPort, &_ucByte, 1);
 950              		.loc 1 244 1 is_stmt 0 view .LVU281
 951 0000 00B5     		push	{lr}
 952              	.LCFI13:
 953              		.cfi_def_cfa_offset 4
 954              		.cfi_offset 14, -4
 955 0002 83B0     		sub	sp, sp, #12
 956              	.LCFI14:
 957              		.cfi_def_cfa_offset 16
 958 0004 8DF80710 		strb	r1, [sp, #7]
 245:bsp/src/bsp_uart_fifo.c **** }
 959              		.loc 1 245 2 is_stmt 1 view .LVU282
 960 0008 0122     		movs	r2, #1
 961 000a 0DF10701 		add	r1, sp, #7
 962              	.LVL63:
 245:bsp/src/bsp_uart_fifo.c **** }
 963              		.loc 1 245 2 is_stmt 0 view .LVU283
 964 000e FFF7FEFF 		bl	comSendBuf
 965              	.LVL64:
 246:bsp/src/bsp_uart_fifo.c **** 
 966              		.loc 1 246 1 view .LVU284
 967 0012 03B0     		add	sp, sp, #12
 968              	.LCFI15:
 969              		.cfi_def_cfa_offset 4
 970              		@ sp needed
 971 0014 5DF804FB 		ldr	pc, [sp], #4
 972              		.cfi_endproc
 973              	.LFE134:
 975              		.section	.text.comGetChar,"ax",%progbits
 976              		.align	1
 977              		.global	comGetChar
 978              		.syntax unified
 979              		.thumb
 980              		.thumb_func
 981              		.fpu fpv4-sp-d16
 983              	comGetChar:
 984              	.LVL65:
 985              	.LFB135:
 258:bsp/src/bsp_uart_fifo.c **** 	UartStr_TypeDef *pUart;
 986              		.loc 1 258 1 is_stmt 1 view -0
 987              		.cfi_startproc
 988              		@ args = 0, pretend = 0, frame = 0
 989              		@ frame_needed = 0, uses_anonymous_args = 0
 258:bsp/src/bsp_uart_fifo.c **** 	UartStr_TypeDef *pUart;
 990              		.loc 1 258 1 is_stmt 0 view .LVU286
 991 0000 10B5     		push	{r4, lr}
 992              	.LCFI16:
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 42


 993              		.cfi_def_cfa_offset 8
 994              		.cfi_offset 4, -8
 995              		.cfi_offset 14, -4
 996 0002 0C46     		mov	r4, r1
 259:bsp/src/bsp_uart_fifo.c **** 
 997              		.loc 1 259 2 is_stmt 1 view .LVU287
 261:bsp/src/bsp_uart_fifo.c **** 	if (pUart == 0)
 998              		.loc 1 261 2 view .LVU288
 261:bsp/src/bsp_uart_fifo.c **** 	if (pUart == 0)
 999              		.loc 1 261 10 is_stmt 0 view .LVU289
 1000 0004 FFF7FEFF 		bl	ComToUart
 1001              	.LVL66:
 262:bsp/src/bsp_uart_fifo.c **** 	{
 1002              		.loc 1 262 2 is_stmt 1 view .LVU290
 262:bsp/src/bsp_uart_fifo.c **** 	{
 1003              		.loc 1 262 5 is_stmt 0 view .LVU291
 1004 0008 18B1     		cbz	r0, .L58
 267:bsp/src/bsp_uart_fifo.c **** }
 1005              		.loc 1 267 2 is_stmt 1 view .LVU292
 267:bsp/src/bsp_uart_fifo.c **** }
 1006              		.loc 1 267 9 is_stmt 0 view .LVU293
 1007 000a 2146     		mov	r1, r4
 1008 000c FFF7FEFF 		bl	UartGetChar
 1009              	.LVL67:
 1010              	.L57:
 268:bsp/src/bsp_uart_fifo.c **** 
 1011              		.loc 1 268 1 view .LVU294
 1012 0010 10BD     		pop	{r4, pc}
 1013              	.LVL68:
 1014              	.L58:
 264:bsp/src/bsp_uart_fifo.c **** 	}
 1015              		.loc 1 264 10 view .LVU295
 1016 0012 0020     		movs	r0, #0
 1017              	.LVL69:
 264:bsp/src/bsp_uart_fifo.c **** 	}
 1018              		.loc 1 264 10 view .LVU296
 1019 0014 FCE7     		b	.L57
 1020              		.cfi_endproc
 1021              	.LFE135:
 1023              		.section	.text.comClearTxFifo,"ax",%progbits
 1024              		.align	1
 1025              		.global	comClearTxFifo
 1026              		.syntax unified
 1027              		.thumb
 1028              		.thumb_func
 1029              		.fpu fpv4-sp-d16
 1031              	comClearTxFifo:
 1032              	.LVL70:
 1033              	.LFB136:
 279:bsp/src/bsp_uart_fifo.c **** 	UartStr_TypeDef *pUart;
 1034              		.loc 1 279 1 is_stmt 1 view -0
 1035              		.cfi_startproc
 1036              		@ args = 0, pretend = 0, frame = 0
 1037              		@ frame_needed = 0, uses_anonymous_args = 0
 279:bsp/src/bsp_uart_fifo.c **** 	UartStr_TypeDef *pUart;
 1038              		.loc 1 279 1 is_stmt 0 view .LVU298
 1039 0000 08B5     		push	{r3, lr}
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 43


 1040              	.LCFI17:
 1041              		.cfi_def_cfa_offset 8
 1042              		.cfi_offset 3, -8
 1043              		.cfi_offset 14, -4
 280:bsp/src/bsp_uart_fifo.c **** 
 1044              		.loc 1 280 2 is_stmt 1 view .LVU299
 282:bsp/src/bsp_uart_fifo.c **** 	if (pUart == 0)
 1045              		.loc 1 282 2 view .LVU300
 282:bsp/src/bsp_uart_fifo.c **** 	if (pUart == 0)
 1046              		.loc 1 282 10 is_stmt 0 view .LVU301
 1047 0002 FFF7FEFF 		bl	ComToUart
 1048              	.LVL71:
 283:bsp/src/bsp_uart_fifo.c **** 	{
 1049              		.loc 1 283 2 is_stmt 1 view .LVU302
 283:bsp/src/bsp_uart_fifo.c **** 	{
 1050              		.loc 1 283 5 is_stmt 0 view .LVU303
 1051 0006 18B1     		cbz	r0, .L60
 288:bsp/src/bsp_uart_fifo.c **** 	pUart->usTxRead = 0;
 1052              		.loc 1 288 2 is_stmt 1 view .LVU304
 288:bsp/src/bsp_uart_fifo.c **** 	pUart->usTxRead = 0;
 1053              		.loc 1 288 19 is_stmt 0 view .LVU305
 1054 0008 0022     		movs	r2, #0
 1055 000a 0282     		strh	r2, [r0, #16]	@ movhi
 289:bsp/src/bsp_uart_fifo.c **** 	pUart->usTxCount = 0;
 1056              		.loc 1 289 2 is_stmt 1 view .LVU306
 289:bsp/src/bsp_uart_fifo.c **** 	pUart->usTxCount = 0;
 1057              		.loc 1 289 18 is_stmt 0 view .LVU307
 1058 000c 4282     		strh	r2, [r0, #18]	@ movhi
 290:bsp/src/bsp_uart_fifo.c **** }
 1059              		.loc 1 290 2 is_stmt 1 view .LVU308
 290:bsp/src/bsp_uart_fifo.c **** }
 1060              		.loc 1 290 19 is_stmt 0 view .LVU309
 1061 000e 8282     		strh	r2, [r0, #20]	@ movhi
 1062              	.L60:
 291:bsp/src/bsp_uart_fifo.c **** 
 1063              		.loc 1 291 1 view .LVU310
 1064 0010 08BD     		pop	{r3, pc}
 1065              		.cfi_endproc
 1066              	.LFE136:
 1068              		.section	.text.comClearRxFifo,"ax",%progbits
 1069              		.align	1
 1070              		.global	comClearRxFifo
 1071              		.syntax unified
 1072              		.thumb
 1073              		.thumb_func
 1074              		.fpu fpv4-sp-d16
 1076              	comClearRxFifo:
 1077              	.LVL72:
 1078              	.LFB137:
 302:bsp/src/bsp_uart_fifo.c **** 	UartStr_TypeDef *pUart;
 1079              		.loc 1 302 1 is_stmt 1 view -0
 1080              		.cfi_startproc
 1081              		@ args = 0, pretend = 0, frame = 0
 1082              		@ frame_needed = 0, uses_anonymous_args = 0
 302:bsp/src/bsp_uart_fifo.c **** 	UartStr_TypeDef *pUart;
 1083              		.loc 1 302 1 is_stmt 0 view .LVU312
 1084 0000 08B5     		push	{r3, lr}
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 44


 1085              	.LCFI18:
 1086              		.cfi_def_cfa_offset 8
 1087              		.cfi_offset 3, -8
 1088              		.cfi_offset 14, -4
 303:bsp/src/bsp_uart_fifo.c **** 
 1089              		.loc 1 303 2 is_stmt 1 view .LVU313
 305:bsp/src/bsp_uart_fifo.c **** 	if (pUart == 0)
 1090              		.loc 1 305 2 view .LVU314
 305:bsp/src/bsp_uart_fifo.c **** 	if (pUart == 0)
 1091              		.loc 1 305 10 is_stmt 0 view .LVU315
 1092 0002 FFF7FEFF 		bl	ComToUart
 1093              	.LVL73:
 306:bsp/src/bsp_uart_fifo.c **** 	{
 1094              		.loc 1 306 2 is_stmt 1 view .LVU316
 306:bsp/src/bsp_uart_fifo.c **** 	{
 1095              		.loc 1 306 5 is_stmt 0 view .LVU317
 1096 0006 18B1     		cbz	r0, .L63
 311:bsp/src/bsp_uart_fifo.c **** 	pUart->usRxRead = 0;
 1097              		.loc 1 311 2 is_stmt 1 view .LVU318
 311:bsp/src/bsp_uart_fifo.c **** 	pUart->usRxRead = 0;
 1098              		.loc 1 311 19 is_stmt 0 view .LVU319
 1099 0008 0022     		movs	r2, #0
 1100 000a C282     		strh	r2, [r0, #22]	@ movhi
 312:bsp/src/bsp_uart_fifo.c **** 	pUart->usRxCount = 0;
 1101              		.loc 1 312 2 is_stmt 1 view .LVU320
 312:bsp/src/bsp_uart_fifo.c **** 	pUart->usRxCount = 0;
 1102              		.loc 1 312 18 is_stmt 0 view .LVU321
 1103 000c 0283     		strh	r2, [r0, #24]	@ movhi
 313:bsp/src/bsp_uart_fifo.c **** }
 1104              		.loc 1 313 2 is_stmt 1 view .LVU322
 313:bsp/src/bsp_uart_fifo.c **** }
 1105              		.loc 1 313 19 is_stmt 0 view .LVU323
 1106 000e 4283     		strh	r2, [r0, #26]	@ movhi
 1107              	.L63:
 314:bsp/src/bsp_uart_fifo.c **** 
 1108              		.loc 1 314 1 view .LVU324
 1109 0010 08BD     		pop	{r3, pc}
 1110              		.cfi_endproc
 1111              	.LFE137:
 1113              		.section	.text.USART_SetBaudRate,"ax",%progbits
 1114              		.align	1
 1115              		.global	USART_SetBaudRate
 1116              		.syntax unified
 1117              		.thumb
 1118              		.thumb_func
 1119              		.fpu fpv4-sp-d16
 1121              	USART_SetBaudRate:
 1122              	.LVL74:
 1123              	.LFB139:
 349:bsp/src/bsp_uart_fifo.c **** 	uint32_t tmpreg = 0x00, apbclock = 0x00;
 1124              		.loc 1 349 1 is_stmt 1 view -0
 1125              		.cfi_startproc
 1126              		@ args = 0, pretend = 0, frame = 16
 1127              		@ frame_needed = 0, uses_anonymous_args = 0
 349:bsp/src/bsp_uart_fifo.c **** 	uint32_t tmpreg = 0x00, apbclock = 0x00;
 1128              		.loc 1 349 1 is_stmt 0 view .LVU326
 1129 0000 30B5     		push	{r4, r5, lr}
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 45


 1130              	.LCFI19:
 1131              		.cfi_def_cfa_offset 12
 1132              		.cfi_offset 4, -12
 1133              		.cfi_offset 5, -8
 1134              		.cfi_offset 14, -4
 1135 0002 85B0     		sub	sp, sp, #20
 1136              	.LCFI20:
 1137              		.cfi_def_cfa_offset 32
 1138 0004 0446     		mov	r4, r0
 1139 0006 0D46     		mov	r5, r1
 350:bsp/src/bsp_uart_fifo.c **** 	uint32_t integerdivider = 0x00;
 1140              		.loc 1 350 2 is_stmt 1 view .LVU327
 1141              	.LVL75:
 351:bsp/src/bsp_uart_fifo.c **** 	uint32_t fractionaldivider = 0x00;
 1142              		.loc 1 351 2 view .LVU328
 352:bsp/src/bsp_uart_fifo.c **** 	RCC_ClocksTypeDef RCC_ClocksStatus;
 1143              		.loc 1 352 2 view .LVU329
 353:bsp/src/bsp_uart_fifo.c **** 
 1144              		.loc 1 353 2 view .LVU330
 356:bsp/src/bsp_uart_fifo.c **** 	assert_param(IS_USART_BAUDRATE(BaudRate));  
 1145              		.loc 1 356 2 view .LVU331
 357:bsp/src/bsp_uart_fifo.c **** 
 1146              		.loc 1 357 2 view .LVU332
 361:bsp/src/bsp_uart_fifo.c **** 
 1147              		.loc 1 361 2 view .LVU333
 1148 0008 6846     		mov	r0, sp
 1149              	.LVL76:
 361:bsp/src/bsp_uart_fifo.c **** 
 1150              		.loc 1 361 2 is_stmt 0 view .LVU334
 1151 000a FFF7FEFF 		bl	RCC_GetClocksFreq
 1152              	.LVL77:
 363:bsp/src/bsp_uart_fifo.c **** 	{
 1153              		.loc 1 363 2 is_stmt 1 view .LVU335
 363:bsp/src/bsp_uart_fifo.c **** 	{
 1154              		.loc 1 363 5 is_stmt 0 view .LVU336
 1155 000e 1F4B     		ldr	r3, .L77
 1156 0010 9C42     		cmp	r4, r3
 1157 0012 05D0     		beq	.L67
 363:bsp/src/bsp_uart_fifo.c **** 	{
 1158              		.loc 1 363 25 discriminator 1 view .LVU337
 1159 0014 03F58063 		add	r3, r3, #1024
 1160 0018 9C42     		cmp	r4, r3
 1161 001a 01D0     		beq	.L67
 369:bsp/src/bsp_uart_fifo.c **** 	}
 1162              		.loc 1 369 3 is_stmt 1 view .LVU338
 369:bsp/src/bsp_uart_fifo.c **** 	}
 1163              		.loc 1 369 12 is_stmt 0 view .LVU339
 1164 001c 0299     		ldr	r1, [sp, #8]
 1165              	.LVL78:
 369:bsp/src/bsp_uart_fifo.c **** 	}
 1166              		.loc 1 369 12 view .LVU340
 1167 001e 00E0     		b	.L69
 1168              	.LVL79:
 1169              	.L67:
 365:bsp/src/bsp_uart_fifo.c **** 	}
 1170              		.loc 1 365 3 is_stmt 1 view .LVU341
 365:bsp/src/bsp_uart_fifo.c **** 	}
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 46


 1171              		.loc 1 365 12 is_stmt 0 view .LVU342
 1172 0020 0399     		ldr	r1, [sp, #12]
 1173              	.LVL80:
 1174              	.L69:
 373:bsp/src/bsp_uart_fifo.c **** 	{
 1175              		.loc 1 373 2 is_stmt 1 view .LVU343
 373:bsp/src/bsp_uart_fifo.c **** 	{
 1176              		.loc 1 373 13 is_stmt 0 view .LVU344
 1177 0022 A389     		ldrh	r3, [r4, #12]
 373:bsp/src/bsp_uart_fifo.c **** 	{
 1178              		.loc 1 373 5 view .LVU345
 1179 0024 13F4004F 		tst	r3, #32768
 1180 0028 1ED1     		bne	.L75
 381:bsp/src/bsp_uart_fifo.c **** 	}
 1181              		.loc 1 381 3 is_stmt 1 view .LVU346
 381:bsp/src/bsp_uart_fifo.c **** 	}
 1182              		.loc 1 381 25 is_stmt 0 view .LVU347
 1183 002a 01EB8101 		add	r1, r1, r1, lsl #2
 1184              	.LVL81:
 381:bsp/src/bsp_uart_fifo.c **** 	}
 1185              		.loc 1 381 25 view .LVU348
 1186 002e 01EB8101 		add	r1, r1, r1, lsl #2
 381:bsp/src/bsp_uart_fifo.c **** 	}
 1187              		.loc 1 381 42 view .LVU349
 1188 0032 AA00     		lsls	r2, r5, #2
 381:bsp/src/bsp_uart_fifo.c **** 	}
 1189              		.loc 1 381 18 view .LVU350
 1190 0034 B1FBF2F2 		udiv	r2, r1, r2
 1191              	.LVL82:
 1192              	.L71:
 383:bsp/src/bsp_uart_fifo.c **** 
 1193              		.loc 1 383 2 is_stmt 1 view .LVU351
 383:bsp/src/bsp_uart_fifo.c **** 
 1194              		.loc 1 383 27 is_stmt 0 view .LVU352
 1195 0038 1549     		ldr	r1, .L77+4
 1196 003a A1FB0231 		umull	r3, r1, r1, r2
 1197 003e 4809     		lsrs	r0, r1, #5
 383:bsp/src/bsp_uart_fifo.c **** 
 1198              		.loc 1 383 9 view .LVU353
 1199 0040 0501     		lsls	r5, r0, #4
 1200              	.LVL83:
 386:bsp/src/bsp_uart_fifo.c **** 
 1201              		.loc 1 386 2 is_stmt 1 view .LVU354
 386:bsp/src/bsp_uart_fifo.c **** 
 1202              		.loc 1 386 20 is_stmt 0 view .LVU355
 1203 0042 6421     		movs	r1, #100
 1204 0044 00FB1121 		mls	r1, r0, r1, r2
 1205              	.LVL84:
 389:bsp/src/bsp_uart_fifo.c **** 	{
 1206              		.loc 1 389 2 is_stmt 1 view .LVU356
 389:bsp/src/bsp_uart_fifo.c **** 	{
 1207              		.loc 1 389 13 is_stmt 0 view .LVU357
 1208 0048 A389     		ldrh	r3, [r4, #12]
 389:bsp/src/bsp_uart_fifo.c **** 	{
 1209              		.loc 1 389 5 view .LVU358
 1210 004a 13F4004F 		tst	r3, #32768
 1211 004e 13D1     		bne	.L76
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 47


 395:bsp/src/bsp_uart_fifo.c **** 	}
 1212              		.loc 1 395 3 is_stmt 1 view .LVU359
 395:bsp/src/bsp_uart_fifo.c **** 	}
 1213              		.loc 1 395 35 is_stmt 0 view .LVU360
 1214 0050 0901     		lsls	r1, r1, #4
 1215              	.LVL85:
 395:bsp/src/bsp_uart_fifo.c **** 	}
 1216              		.loc 1 395 41 view .LVU361
 1217 0052 3231     		adds	r1, r1, #50
 395:bsp/src/bsp_uart_fifo.c **** 	}
 1218              		.loc 1 395 47 view .LVU362
 1219 0054 0E4B     		ldr	r3, .L77+4
 1220 0056 A3FB0131 		umull	r3, r1, r3, r1
 395:bsp/src/bsp_uart_fifo.c **** 	}
 1221              		.loc 1 395 55 view .LVU363
 1222 005a C1F34311 		ubfx	r1, r1, #5, #4
 395:bsp/src/bsp_uart_fifo.c **** 	}
 1223              		.loc 1 395 10 view .LVU364
 1224 005e 2943     		orrs	r1, r1, r5
 1225              	.LVL86:
 1226              	.L73:
 399:bsp/src/bsp_uart_fifo.c **** }
 1227              		.loc 1 399 2 is_stmt 1 view .LVU365
 399:bsp/src/bsp_uart_fifo.c **** }
 1228              		.loc 1 399 16 is_stmt 0 view .LVU366
 1229 0060 89B2     		uxth	r1, r1
 1230              	.LVL87:
 399:bsp/src/bsp_uart_fifo.c **** }
 1231              		.loc 1 399 14 view .LVU367
 1232 0062 2181     		strh	r1, [r4, #8]	@ movhi
 400:bsp/src/bsp_uart_fifo.c **** 
 1233              		.loc 1 400 1 view .LVU368
 1234 0064 05B0     		add	sp, sp, #20
 1235              	.LCFI21:
 1236              		.cfi_remember_state
 1237              		.cfi_def_cfa_offset 12
 1238              		@ sp needed
 1239 0066 30BD     		pop	{r4, r5, pc}
 1240              	.LVL88:
 1241              	.L75:
 1242              	.LCFI22:
 1243              		.cfi_restore_state
 376:bsp/src/bsp_uart_fifo.c **** 	}
 1244              		.loc 1 376 3 is_stmt 1 view .LVU369
 376:bsp/src/bsp_uart_fifo.c **** 	}
 1245              		.loc 1 376 25 is_stmt 0 view .LVU370
 1246 0068 01EB8101 		add	r1, r1, r1, lsl #2
 1247              	.LVL89:
 376:bsp/src/bsp_uart_fifo.c **** 	}
 1248              		.loc 1 376 25 view .LVU371
 1249 006c 01EB8101 		add	r1, r1, r1, lsl #2
 376:bsp/src/bsp_uart_fifo.c **** 	}
 1250              		.loc 1 376 42 view .LVU372
 1251 0070 6A00     		lsls	r2, r5, #1
 376:bsp/src/bsp_uart_fifo.c **** 	}
 1252              		.loc 1 376 18 view .LVU373
 1253 0072 B1FBF2F2 		udiv	r2, r1, r2
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 48


 1254              	.LVL90:
 376:bsp/src/bsp_uart_fifo.c **** 	}
 1255              		.loc 1 376 18 view .LVU374
 1256 0076 DFE7     		b	.L71
 1257              	.LVL91:
 1258              	.L76:
 391:bsp/src/bsp_uart_fifo.c **** 	}
 1259              		.loc 1 391 3 is_stmt 1 view .LVU375
 391:bsp/src/bsp_uart_fifo.c **** 	}
 1260              		.loc 1 391 35 is_stmt 0 view .LVU376
 1261 0078 CB00     		lsls	r3, r1, #3
 391:bsp/src/bsp_uart_fifo.c **** 	}
 1262              		.loc 1 391 40 view .LVU377
 1263 007a 3233     		adds	r3, r3, #50
 391:bsp/src/bsp_uart_fifo.c **** 	}
 1264              		.loc 1 391 46 view .LVU378
 1265 007c 0449     		ldr	r1, .L77+4
 1266              	.LVL92:
 391:bsp/src/bsp_uart_fifo.c **** 	}
 1267              		.loc 1 391 46 view .LVU379
 1268 007e A1FB0323 		umull	r2, r3, r1, r3
 1269              	.LVL93:
 391:bsp/src/bsp_uart_fifo.c **** 	}
 1270              		.loc 1 391 54 view .LVU380
 1271 0082 C3F34213 		ubfx	r3, r3, #5, #3
 391:bsp/src/bsp_uart_fifo.c **** 	}
 1272              		.loc 1 391 10 view .LVU381
 1273 0086 43EA0501 		orr	r1, r3, r5
 1274              	.LVL94:
 391:bsp/src/bsp_uart_fifo.c **** 	}
 1275              		.loc 1 391 10 view .LVU382
 1276 008a E9E7     		b	.L73
 1277              	.L78:
 1278              		.align	2
 1279              	.L77:
 1280 008c 00100140 		.word	1073811456
 1281 0090 1F85EB51 		.word	1374389535
 1282              		.cfi_endproc
 1283              	.LFE139:
 1285              		.section	.text.comSetBaud,"ax",%progbits
 1286              		.align	1
 1287              		.global	comSetBaud
 1288              		.syntax unified
 1289              		.thumb
 1290              		.thumb_func
 1291              		.fpu fpv4-sp-d16
 1293              	comSetBaud:
 1294              	.LVL95:
 1295              	.LFB138:
 326:bsp/src/bsp_uart_fifo.c **** 	USART_TypeDef* USARTx;
 1296              		.loc 1 326 1 is_stmt 1 view -0
 1297              		.cfi_startproc
 1298              		@ args = 0, pretend = 0, frame = 0
 1299              		@ frame_needed = 0, uses_anonymous_args = 0
 326:bsp/src/bsp_uart_fifo.c **** 	USART_TypeDef* USARTx;
 1300              		.loc 1 326 1 is_stmt 0 view .LVU384
 1301 0000 10B5     		push	{r4, lr}
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 49


 1302              	.LCFI23:
 1303              		.cfi_def_cfa_offset 8
 1304              		.cfi_offset 4, -8
 1305              		.cfi_offset 14, -4
 1306 0002 0C46     		mov	r4, r1
 327:bsp/src/bsp_uart_fifo.c **** 	
 1307              		.loc 1 327 2 is_stmt 1 view .LVU385
 329:bsp/src/bsp_uart_fifo.c **** 	if (USARTx == 0)
 1308              		.loc 1 329 2 view .LVU386
 329:bsp/src/bsp_uart_fifo.c **** 	if (USARTx == 0)
 1309              		.loc 1 329 11 is_stmt 0 view .LVU387
 1310 0004 FFF7FEFF 		bl	ComToUSARTx
 1311              	.LVL96:
 330:bsp/src/bsp_uart_fifo.c **** 	{
 1312              		.loc 1 330 2 is_stmt 1 view .LVU388
 330:bsp/src/bsp_uart_fifo.c **** 	{
 1313              		.loc 1 330 5 is_stmt 0 view .LVU389
 1314 0008 10B1     		cbz	r0, .L79
 335:bsp/src/bsp_uart_fifo.c **** }
 1315              		.loc 1 335 2 is_stmt 1 view .LVU390
 1316 000a 2146     		mov	r1, r4
 1317 000c FFF7FEFF 		bl	USART_SetBaudRate
 1318              	.LVL97:
 1319              	.L79:
 336:bsp/src/bsp_uart_fifo.c **** 
 1320              		.loc 1 336 1 is_stmt 0 view .LVU391
 1321 0010 10BD     		pop	{r4, pc}
 336:bsp/src/bsp_uart_fifo.c **** 
 1322              		.loc 1 336 1 view .LVU392
 1323              		.cfi_endproc
 1324              	.LFE138:
 1326              		.section	.text.USART2_IRQHandler,"ax",%progbits
 1327              		.align	1
 1328              		.global	USART2_IRQHandler
 1329              		.syntax unified
 1330              		.thumb
 1331              		.thumb_func
 1332              		.fpu fpv4-sp-d16
 1334              	USART2_IRQHandler:
 1335              	.LFB146:
1204:bsp/src/bsp_uart_fifo.c **** 
1205:bsp/src/bsp_uart_fifo.c **** /*
1206:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
1207:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: USART1_IRQHandler  USART2_IRQHandler USART3_IRQHandler UART4_IRQHandler UART5_IRQHan
1208:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: USARTä¸­æ–­æœåŠ¡ç¨‹åº
1209:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚: æ— 
1210:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: æ— 
1211:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
1212:bsp/src/bsp_uart_fifo.c **** */
1213:bsp/src/bsp_uart_fifo.c **** #if UART1_FIFO_EN == 1
1214:bsp/src/bsp_uart_fifo.c **** void USART1_IRQHandler(void)
1215:bsp/src/bsp_uart_fifo.c **** {
1216:bsp/src/bsp_uart_fifo.c **** 	UartIRQ(&g_tUart1);
1217:bsp/src/bsp_uart_fifo.c **** }
1218:bsp/src/bsp_uart_fifo.c **** #endif
1219:bsp/src/bsp_uart_fifo.c **** 
1220:bsp/src/bsp_uart_fifo.c **** #if UART2_FIFO_EN == 1
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 50


1221:bsp/src/bsp_uart_fifo.c **** void USART2_IRQHandler(void)
1222:bsp/src/bsp_uart_fifo.c **** {
 1336              		.loc 1 1222 1 is_stmt 1 view -0
 1337              		.cfi_startproc
 1338              		@ args = 0, pretend = 0, frame = 0
 1339              		@ frame_needed = 0, uses_anonymous_args = 0
 1340 0000 08B5     		push	{r3, lr}
 1341              	.LCFI24:
 1342              		.cfi_def_cfa_offset 8
 1343              		.cfi_offset 3, -8
 1344              		.cfi_offset 14, -4
1223:bsp/src/bsp_uart_fifo.c **** 	UartIRQ(&g_tUart2);
 1345              		.loc 1 1223 2 view .LVU394
 1346 0002 0248     		ldr	r0, .L84
 1347 0004 FFF7FEFF 		bl	UartIRQ
 1348              	.LVL98:
1224:bsp/src/bsp_uart_fifo.c **** }
 1349              		.loc 1 1224 1 is_stmt 0 view .LVU395
 1350 0008 08BD     		pop	{r3, pc}
 1351              	.L85:
 1352 000a 00BF     		.align	2
 1353              	.L84:
 1354 000c 00000000 		.word	.LANCHOR0
 1355              		.cfi_endproc
 1356              	.LFE146:
 1358              		.section	.text.fputc,"ax",%progbits
 1359              		.align	1
 1360              		.global	fputc
 1361              		.syntax unified
 1362              		.thumb
 1363              		.thumb_func
 1364              		.fpu fpv4-sp-d16
 1366              	fputc:
 1367              	.LVL99:
 1368              	.LFB147:
1225:bsp/src/bsp_uart_fifo.c **** #endif
1226:bsp/src/bsp_uart_fifo.c **** 
1227:bsp/src/bsp_uart_fifo.c **** #if UART3_FIFO_EN == 1
1228:bsp/src/bsp_uart_fifo.c **** void USART3_IRQHandler(void)
1229:bsp/src/bsp_uart_fifo.c **** {
1230:bsp/src/bsp_uart_fifo.c **** 	UartIRQ(&g_tUart3);
1231:bsp/src/bsp_uart_fifo.c **** }
1232:bsp/src/bsp_uart_fifo.c **** #endif
1233:bsp/src/bsp_uart_fifo.c **** 
1234:bsp/src/bsp_uart_fifo.c **** #if UART4_FIFO_EN == 1
1235:bsp/src/bsp_uart_fifo.c **** void UART4_IRQHandler(void)
1236:bsp/src/bsp_uart_fifo.c **** {
1237:bsp/src/bsp_uart_fifo.c **** 	UartIRQ(&g_tUart4);
1238:bsp/src/bsp_uart_fifo.c **** }
1239:bsp/src/bsp_uart_fifo.c **** #endif
1240:bsp/src/bsp_uart_fifo.c **** 
1241:bsp/src/bsp_uart_fifo.c **** #if UART5_FIFO_EN == 1
1242:bsp/src/bsp_uart_fifo.c **** void UART5_IRQHandler(void)
1243:bsp/src/bsp_uart_fifo.c **** {
1244:bsp/src/bsp_uart_fifo.c **** 	UartIRQ(&g_tUart5);
1245:bsp/src/bsp_uart_fifo.c **** }
1246:bsp/src/bsp_uart_fifo.c **** #endif
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 51


1247:bsp/src/bsp_uart_fifo.c **** 
1248:bsp/src/bsp_uart_fifo.c **** #if UART6_FIFO_EN == 1
1249:bsp/src/bsp_uart_fifo.c **** void USART6_IRQHandler(void)
1250:bsp/src/bsp_uart_fifo.c **** {
1251:bsp/src/bsp_uart_fifo.c **** 	UartIRQ(&g_tUart6);
1252:bsp/src/bsp_uart_fifo.c **** }
1253:bsp/src/bsp_uart_fifo.c **** #endif
1254:bsp/src/bsp_uart_fifo.c **** 
1255:bsp/src/bsp_uart_fifo.c **** /*
1256:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
1257:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: fputc
1258:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: é‡å®šä¹‰putcå‡½æ•°ï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨printfå‡½æ•°ä»ä¸²å£1æ‰“å°è¾“å‡º
1259:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚: æ— 
1260:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: æ— 
1261:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
1262:bsp/src/bsp_uart_fifo.c **** */
1263:bsp/src/bsp_uart_fifo.c **** int fputc(int ch, FILE *f)
1264:bsp/src/bsp_uart_fifo.c **** {
 1369              		.loc 1 1264 1 is_stmt 1 view -0
 1370              		.cfi_startproc
 1371              		@ args = 0, pretend = 0, frame = 0
 1372              		@ frame_needed = 0, uses_anonymous_args = 0
 1373              		.loc 1 1264 1 is_stmt 0 view .LVU397
 1374 0000 10B5     		push	{r4, lr}
 1375              	.LCFI25:
 1376              		.cfi_def_cfa_offset 8
 1377              		.cfi_offset 4, -8
 1378              		.cfi_offset 14, -4
 1379 0002 0446     		mov	r4, r0
1265:bsp/src/bsp_uart_fifo.c **** #if 1	/* å°†éœ€è¦printfçš„å­—ç¬¦é€šè¿‡ä¸²å£ä¸­æ–­FIFOå‘é€å‡ºå»ï¼Œprintfå‡½æ•°ä¼šç«‹å³è¿”å› *
1266:bsp/src/bsp_uart_fifo.c **** 	comSendChar(COM1, ch);
 1380              		.loc 1 1266 2 is_stmt 1 view .LVU398
 1381 0004 C1B2     		uxtb	r1, r0
 1382              	.LVL100:
 1383              		.loc 1 1266 2 is_stmt 0 view .LVU399
 1384 0006 0020     		movs	r0, #0
 1385              	.LVL101:
 1386              		.loc 1 1266 2 view .LVU400
 1387 0008 FFF7FEFF 		bl	comSendChar
 1388              	.LVL102:
1267:bsp/src/bsp_uart_fifo.c **** 
1268:bsp/src/bsp_uart_fifo.c **** 	return ch;
 1389              		.loc 1 1268 2 is_stmt 1 view .LVU401
1269:bsp/src/bsp_uart_fifo.c **** #else	/* é‡‡ç”¨é˜»å¡æ–¹å¼å‘é€æ¯ä¸ªå­—ç¬¦,ç­‰å¾…æ•°æ®å‘é€å®Œæ¯• */
1270:bsp/src/bsp_uart_fifo.c **** 	/* å†™ä¸€ä¸ªå­—èŠ‚åˆ°USART1 */
1271:bsp/src/bsp_uart_fifo.c **** 	USART_SendData(USART1, (uint8_t) ch);
1272:bsp/src/bsp_uart_fifo.c **** 
1273:bsp/src/bsp_uart_fifo.c **** 	/* ç­‰å¾…å‘é€ç»“æŸ */
1274:bsp/src/bsp_uart_fifo.c **** 	while (USART_GetFlagStatus(USART1, USART_FLAG_TC) == RESET)
1275:bsp/src/bsp_uart_fifo.c **** 	{}
1276:bsp/src/bsp_uart_fifo.c **** 
1277:bsp/src/bsp_uart_fifo.c **** 	return ch;
1278:bsp/src/bsp_uart_fifo.c **** #endif
1279:bsp/src/bsp_uart_fifo.c **** }
 1390              		.loc 1 1279 1 is_stmt 0 view .LVU402
 1391 000c 2046     		mov	r0, r4
 1392 000e 10BD     		pop	{r4, pc}
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 52


 1393              		.loc 1 1279 1 view .LVU403
 1394              		.cfi_endproc
 1395              	.LFE147:
 1397              		.section	.text.fgetc,"ax",%progbits
 1398              		.align	1
 1399              		.global	fgetc
 1400              		.syntax unified
 1401              		.thumb
 1402              		.thumb_func
 1403              		.fpu fpv4-sp-d16
 1405              	fgetc:
 1406              	.LFB148:
1280:bsp/src/bsp_uart_fifo.c **** 
1281:bsp/src/bsp_uart_fifo.c **** /*
1282:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
1283:bsp/src/bsp_uart_fifo.c **** *	å‡½ æ•° å: fgetc
1284:bsp/src/bsp_uart_fifo.c **** *	åŠŸèƒ½è¯´æ˜: é‡å®šä¹‰getcå‡½æ•°ï¼Œè¿™æ ·å¯ä»¥ä½¿ç”¨getcharå‡½æ•°ä»ä¸²å£1è¾“å…¥æ•°æ®
1285:bsp/src/bsp_uart_fifo.c **** *	å½¢    å‚: æ— 
1286:bsp/src/bsp_uart_fifo.c **** *	è¿” å› å€¼: æ— 
1287:bsp/src/bsp_uart_fifo.c **** ***************************************************************************************************
1288:bsp/src/bsp_uart_fifo.c **** */
1289:bsp/src/bsp_uart_fifo.c **** int fgetc(FILE *f)
1290:bsp/src/bsp_uart_fifo.c **** {
 1407              		.loc 1 1290 1 is_stmt 1 view -0
 1408              		.cfi_startproc
 1409              		@ args = 0, pretend = 0, frame = 8
 1410              		@ frame_needed = 0, uses_anonymous_args = 0
 1411              	.LVL103:
 1412              		.loc 1 1290 1 is_stmt 0 view .LVU405
 1413 0000 00B5     		push	{lr}
 1414              	.LCFI26:
 1415              		.cfi_def_cfa_offset 4
 1416              		.cfi_offset 14, -4
 1417 0002 83B0     		sub	sp, sp, #12
 1418              	.LCFI27:
 1419              		.cfi_def_cfa_offset 16
 1420              	.LVL104:
 1421              	.L89:
1291:bsp/src/bsp_uart_fifo.c **** 
1292:bsp/src/bsp_uart_fifo.c **** #if 1	/* ä»ä¸²å£æ¥æ”¶FIFOä¸­å–1ä¸ªæ•°æ®, åªæœ‰å–åˆ°æ•°æ®æ‰è¿”å› */
1293:bsp/src/bsp_uart_fifo.c **** 	uint8_t ucData;
1294:bsp/src/bsp_uart_fifo.c **** 
1295:bsp/src/bsp_uart_fifo.c **** 	while(comGetChar(COM1, &ucData) == 0);
 1422              		.loc 1 1295 39 is_stmt 1 discriminator 1 view .LVU406
 1423              		.loc 1 1295 8 is_stmt 0 discriminator 1 view .LVU407
 1424 0004 0DF10701 		add	r1, sp, #7
 1425 0008 0020     		movs	r0, #0
 1426 000a FFF7FEFF 		bl	comGetChar
 1427              	.LVL105:
 1428              		.loc 1 1295 7 discriminator 1 view .LVU408
 1429 000e 0028     		cmp	r0, #0
 1430 0010 F8D0     		beq	.L89
1296:bsp/src/bsp_uart_fifo.c **** 
1297:bsp/src/bsp_uart_fifo.c **** 	return ucData;
 1431              		.loc 1 1297 2 is_stmt 1 view .LVU409
1298:bsp/src/bsp_uart_fifo.c **** #else
1299:bsp/src/bsp_uart_fifo.c **** 	/* ç­‰å¾…ä¸²å£1è¾“å…¥æ•°æ® */
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 53


1300:bsp/src/bsp_uart_fifo.c **** 	while (USART_GetFlagStatus(USART1, USART_FLAG_RXNE) == RESET);
1301:bsp/src/bsp_uart_fifo.c **** 
1302:bsp/src/bsp_uart_fifo.c **** 	return (int)USART_ReceiveData(USART1);
1303:bsp/src/bsp_uart_fifo.c **** #endif
1304:bsp/src/bsp_uart_fifo.c **** }
 1432              		.loc 1 1304 1 is_stmt 0 view .LVU410
 1433 0012 9DF80700 		ldrb	r0, [sp, #7]	@ zero_extendqisi2
 1434 0016 03B0     		add	sp, sp, #12
 1435              	.LCFI28:
 1436              		.cfi_def_cfa_offset 4
 1437              		@ sp needed
 1438 0018 5DF804FB 		ldr	pc, [sp], #4
 1439              		.cfi_endproc
 1440              	.LFE148:
 1442              		.section	.bss.g_RxBuf2,"aw",%nobits
 1443              		.align	2
 1444              		.set	.LANCHOR2,. + 0
 1447              	g_RxBuf2:
 1448 0000 00000000 		.space	1024
 1448      00000000 
 1448      00000000 
 1448      00000000 
 1448      00000000 
 1449              		.section	.bss.g_TxBuf2,"aw",%nobits
 1450              		.align	2
 1451              		.set	.LANCHOR1,. + 0
 1454              	g_TxBuf2:
 1455 0000 00000000 		.space	1024
 1455      00000000 
 1455      00000000 
 1455      00000000 
 1455      00000000 
 1456              		.section	.bss.g_tUart2,"aw",%nobits
 1457              		.align	2
 1458              		.set	.LANCHOR0,. + 0
 1461              	g_tUart2:
 1462 0000 00000000 		.space	40
 1462      00000000 
 1462      00000000 
 1462      00000000 
 1462      00000000 
 1463              		.text
 1464              	.Letext0:
 1465              		.file 2 "/Users/gordon/Documents/soft_proj/gcc-arm-none-eabi-8-2018-q4-major/arm-none-eabi/include
 1466              		.file 3 "/Users/gordon/Documents/soft_proj/gcc-arm-none-eabi-8-2018-q4-major/arm-none-eabi/include
 1467              		.file 4 "User/FreeRTOSConfig.h"
 1468              		.file 5 "Libraries/CMSIS/Include/core_cm4.h"
 1469              		.file 6 "Libraries/CMSIS/Device/ST/STM32F4xx/Include/stm32f4xx.h"
 1470              		.file 7 "Libraries/STM32F4xx_StdPeriph_Driver/inc/stm32f4xx_gpio.h"
 1471              		.file 8 "Libraries/STM32F4xx_StdPeriph_Driver/inc/stm32f4xx_rcc.h"
 1472              		.file 9 "Libraries/STM32F4xx_StdPeriph_Driver/inc/stm32f4xx_usart.h"
 1473              		.file 10 "Libraries/STM32F4xx_StdPeriph_Driver/inc/misc.h"
 1474              		.file 11 "/Users/gordon/Documents/soft_proj/gcc-arm-none-eabi-8-2018-q4-major/arm-none-eabi/includ
 1475              		.file 12 "/Users/gordon/Documents/soft_proj/gcc-arm-none-eabi-8-2018-q4-major/arm-none-eabi/includ
 1476              		.file 13 "/Users/gordon/Documents/soft_proj/gcc-arm-none-eabi-8-2018-q4-major/lib/gcc/arm-none-eab
 1477              		.file 14 "/Users/gordon/Documents/soft_proj/gcc-arm-none-eabi-8-2018-q4-major/arm-none-eabi/includ
 1478              		.file 15 "/Users/gordon/Documents/soft_proj/gcc-arm-none-eabi-8-2018-q4-major/arm-none-eabi/includ
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 54


 1479              		.file 16 "/Users/gordon/Documents/soft_proj/gcc-arm-none-eabi-8-2018-q4-major/arm-none-eabi/includ
 1480              		.file 17 "bsp/inc/bsp_uart_fifo.h"
 1481              		.file 18 "FreeRTOS/portable/GCC/ARM_CM4F/portmacro.h"
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 55


DEFINED SYMBOLS
                            *ABS*:0000000000000000 bsp_uart_fifo.c
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:18     .text.UartVarInit:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:25     .text.UartVarInit:0000000000000000 UartVarInit
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:86     .text.UartVarInit:000000000000002c $d
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:94     .text.InitHardUart:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:100    .text.InitHardUart:0000000000000000 InitHardUart
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:232    .text.InitHardUart:00000000000000a8 $d
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:238    .text.ConfigUartNVIC:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:244    .text.ConfigUartNVIC:0000000000000000 ConfigUartNVIC
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:283    .text.UartSend:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:289    .text.UartSend:0000000000000000 UartSend
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:415    .text.UartGetChar:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:421    .text.UartGetChar:0000000000000000 UartGetChar
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:509    .text.UartIRQ:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:515    .text.UartIRQ:0000000000000000 UartIRQ
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:749    .text.bsp_InitUart:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:756    .text.bsp_InitUart:0000000000000000 bsp_InitUart
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:782    .text.ComToUart:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:789    .text.ComToUart:0000000000000000 ComToUart
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:826    .text.ComToUart:0000000000000014 $d
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:831    .text.ComToUSARTx:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:838    .text.ComToUSARTx:0000000000000000 ComToUSARTx
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:875    .text.ComToUSARTx:0000000000000014 $d
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:880    .text.comSendBuf:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:887    .text.comSendBuf:0000000000000000 comSendBuf
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:936    .text.comSendChar:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:943    .text.comSendChar:0000000000000000 comSendChar
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:976    .text.comGetChar:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:983    .text.comGetChar:0000000000000000 comGetChar
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1024   .text.comClearTxFifo:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1031   .text.comClearTxFifo:0000000000000000 comClearTxFifo
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1069   .text.comClearRxFifo:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1076   .text.comClearRxFifo:0000000000000000 comClearRxFifo
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1114   .text.USART_SetBaudRate:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1121   .text.USART_SetBaudRate:0000000000000000 USART_SetBaudRate
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1280   .text.USART_SetBaudRate:000000000000008c $d
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1286   .text.comSetBaud:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1293   .text.comSetBaud:0000000000000000 comSetBaud
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1327   .text.USART2_IRQHandler:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1334   .text.USART2_IRQHandler:0000000000000000 USART2_IRQHandler
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1354   .text.USART2_IRQHandler:000000000000000c $d
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1359   .text.fputc:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1366   .text.fputc:0000000000000000 fputc
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1398   .text.fgetc:0000000000000000 $t
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1405   .text.fgetc:0000000000000000 fgetc
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1443   .bss.g_RxBuf2:0000000000000000 $d
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1447   .bss.g_RxBuf2:0000000000000000 g_RxBuf2
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1450   .bss.g_TxBuf2:0000000000000000 $d
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1454   .bss.g_TxBuf2:0000000000000000 g_TxBuf2
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1457   .bss.g_tUart2:0000000000000000 $d
/var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s:1461   .bss.g_tUart2:0000000000000000 g_tUart2

UNDEFINED SYMBOLS
RCC_AHB1PeriphClockCmd
RCC_APB1PeriphClockCmd
GPIO_PinAFConfig
ARM GAS  /var/folders/3x/w4njr7bn61lgchzhylxd3k6w0000gn/T//ccp5NHGB.s 			page 56


GPIO_Init
USART_Init
USART_ITConfig
USART_Cmd
USART_ClearFlag
NVIC_Init
vPortExitCritical
vPortEnterCritical
USART_GetITStatus
USART_ReceiveData
USART_SendData
RCC_GetClocksFreq
